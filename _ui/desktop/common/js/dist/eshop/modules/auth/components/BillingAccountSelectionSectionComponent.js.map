{
    "version": 3,
    "sources": ["../../../../../../es6/eshop/modules/auth/components/BillingAccountSelectionSectionComponent.jsx"],
    "names": ["BillingAccountSelectionSectionComponent", "props", "state", "filteredAccounts", "selectedBillingAccountId", "selectedBillingAccountCode", "getAccountCodeById", "nxtProps", "console", "log", "length", "billingAccounts", "accountByMsisdn", "accounts", "getFilteredAccounts", "setState", "isB2B", "requestMobileBillingAccountsAndChooseDefault", "requestMobileBillingAccounts", "main", "className", "accept", "onClick", "selectAccount", "bind", "type", "text", "value", "name", "labelClassName", "readOnly", "checked", "onChange", "useAccount", "accountId", "accountCode", "event", "target", "setSelectedBillingAccount", "find", "account", "filter", "a", "mobileAccount", "accountContracts", "serviceNumber", "msisdn", "push", "getChooseAccountButtonProps", "descriptions", "chooseAccountLabel", "map", "id", "processType", "getPropsForRadio", "useNewAccountLabel", "next", "React", "Component"],
    "mappings": "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",
    "sourcesContent": ["import React from \"react\";\nimport {OraButton, OraComplexRadio, OraSimpleRadio} from \"eshop/components/OraCommonComponents\";\nimport OnlineUtils from \"eshop/utils/OnlineUtils\";\nimport {BillingAccountSelectionSectionB2BComponent} from \"eshop/modules/auth/components/BillingAccountSelectionSectionB2BComponent\";\nimport {MobileBillingAccount} from \"eshop/modules/auth/components/MobileBillingAccount\";\nimport {MobileBillingAccountTitle} from \"eshop/modules/auth/components/MobileBillingAccountTitle\";\n\nclass BillingAccountSelectionSectionComponent extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {filteredAccounts:[],selectedBillingAccountId:this.props.selectedBillingAccountId,selectedBillingAccountCode:this.getAccountCodeById(null,this.props.selectedBillingAccountId)};\n\n    }\n\n    componentWillUpdate(nxtProps){\n        console.log(\"BillingAccountSelectionSectionComponent componentWillUpdate\",nxtProps,this.state);\n        if(this.state.filteredAccounts.length==0 && ((nxtProps.billingAccounts != null && nxtProps.billingAccounts.length > 0)|| nxtProps.accountByMsisdn != null)) {\n            let accounts=this.getFilteredAccounts();\n            this.setState({filteredAccounts:accounts,selectedBillingAccountId:this.props.selectedBillingAccountId,selectedBillingAccountCode:this.getAccountCodeById(accounts,this.props.selectedBillingAccountId)});\n        }\n    }\n\n    componentDidMount() {\n        console.log(\"BillingAccountSelectionSectionComponent componentDidMount\");\n        if (this.props.accountByMsisdn == null) {\n            if (this.props.isB2B) {\n                this.props.requestMobileBillingAccountsAndChooseDefault();\n            } else {\n                this.props.requestMobileBillingAccounts();\n            }\n        }\n    }\n\n    getChooseAccountButtonProps(main) {\n        return {\n            className: \"o-btn opl-btn opl-btn--primary u-w-100\",\n            accept: main,\n            onClick: this.selectAccount.bind(this),\n            type: main ? \"primary\" : \"secondary\",\n        };\n    }\n\n\n    selectAccount() {\n        this.props.selectAccount(this.state.selectedBillingAccountId,this.state.selectedBillingAccountCode);\n    }\n\n    getPropsForRadio(text, value) {\n        return {\n            name: \"accountSelect\",\n            text: text,\n            value: value,\n            labelClassName: \"o-radio opl-radio\",\n            readOnly: false,\n            checked: !!(value == this.state.selectedBillingAccountId),\n            onChange: this.useAccount.bind(this),\n        };\n    }\n    setSelectedBillingAccount(accountId,accountCode) {\n        console.log(\"BillingAccountSelectionSectionComponent useAccountAction =\", accountId,accountCode);\n        this.setState({selectedBillingAccountId: accountId});\n        this.setState({selectedBillingAccountCode: accountCode});\n    }\n    useAccount(event) {\n        let accountId=event.target.value;\n        console.log(\"useAccount= id\", accountId);\n        this.setSelectedBillingAccount(accountId,this.getAccountCodeById(accountId));\n    }\n    getAccountCodeById(accounts,accountId){\n        console.log(\"BillingAccountSelectionSectionComponent accounts =\", accounts);\n        if(accounts && accounts.find(account => account.accountId==accountId)) {\n            console.log(\"BillingAccountSelectionSectionComponent accounts =\", accounts.find(account => account.accountId == accountId).accountCode);\n            return accounts.find(account => account.accountId == accountId).accountCode;\n        }\n        return null;\n\n    }\n    getFilteredAccounts(){\n        var filteredAccounts = [];\n        if (this.props.billingAccounts != null && this.props.billingAccounts.length > 0) {\n            console.log(\"BillingAccountSelectionSectionComponent ACCOUNTS COMPONENT\");\n            console.log(this.props.billingAccounts);\n            filteredAccounts = this.props.billingAccounts.filter(a => (a.mobileAccount && a.accountContracts.length > 0));\n        } else if (this.props.accountByMsisdn != null) {\n            var accountByMsisdn = {\n                ...this.props.accountByMsisdn,\n                accountContracts: [{serviceNumber: this.props.msisdn}],\n            };\n            filteredAccounts.push(accountByMsisdn);\n            console.log(\"filteredAccounts: \", accountByMsisdn);\n        }\n        console.log(\"BillingAccountSelectionSectionComponent selectedBillingAccountId=\", this.props.selectedBillingAccountId);\n        console.log(\"BillingAccountSelectionSectionComponent accounts\", filteredAccounts);\n        return filteredAccounts;\n    }\n\n    render() {\n        if (this.props.billingAccounts == null && this.props.accountByMsisdn == null && !this.props.isB2B)\n            return null;\n\n        if (!!this.props.isB2B)\n            return (<div id=\"smsVerificationChooseAccountSection\">\n                <BillingAccountSelectionSectionB2BComponent\n                    id=\"select-billing-account-popup\"\n                    {...this.getChooseAccountButtonProps(false)}\n                    {...this.props}\n                    {...this.state}\n                    selectAccount={this.selectAccount.bind(this)}\n                    setSelectedBillingAccount={this.setSelectedBillingAccount.bind(this)}\n                    filteredAccounts={this.state.filteredAccounts}\n                />\n            </div>);\n\n        return (<div id=\"smsVerificationChooseAccountSection\">\n                <p className=\"\">\n                    {this.props.descriptions.chooseAccountLabel || \"Do faktury wskazanego przez ciebie konta, dołączone będą numery umieszczone na koszyku. Dołączenie wybranych numerów do Twojego istniejącego konta sprawi, że co miesiąc będziesz opłacać tylko jeden rachunek, na którym wyszczególnione będą opłaty za wszystkie numery.\"}\n                </p>\n                <fieldset>\n                    {this.state.filteredAccounts && this.state.filteredAccounts.length > 0 && this.state.filteredAccounts.map(account => [<MobileBillingAccountTitle\n                            key={account.id}\n                            selectedBillingAccountId={this.state.selectedBillingAccountId}\n                            setSelectedBillingAccount={this.setSelectedBillingAccount.bind(this)}\n                            account={account}/>\n                        , <MobileBillingAccount account={account}/>])}\n\n                    <div className=\"l-row u-padding-top-m\" hidden={this.props.processType === 'ASSIGNMENT'}>\n                        <div className=\"l-col l-col-small-12 l-col-medium-12 l-col-12 \">\n                            <OraSimpleRadio {...this.getPropsForRadio((this.props.descriptions.useNewAccountLabel || \"Stwórz nowe konto.\"), \"\")} />\n                        </div>\n                    </div>\n                    <div className=\"l-row u-padding-top-m\">\n                        <div className=\"l-col l-col-small-12 l-col-medium-8 l-col-8 \">\n                        </div>\n                        <div className=\"l-col l-col-small-12 l-col-medium-4 l-col-4 \">\n                            <OraButton {...this.getChooseAccountButtonProps(false)}>{this.props.descriptions.next}</OraButton>\n                        </div>\n                    </div>\n                </fieldset>\n            </div>\n        )\n    }\n}\n\nexport default BillingAccountSelectionSectionComponent;"],
    "file": "BillingAccountSelectionSectionComponent.js"
}