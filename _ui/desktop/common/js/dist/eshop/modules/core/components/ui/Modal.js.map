{
    "version": 3,
    "sources": ["../../../../../../../es6/eshop/modules/core/components/ui/Modal.jsx"],
    "names": ["window", "modalId", "undefined", "SIZE_SMALL", "SIZE_NARROW", "SIZE_MEDIUM", "SIZE_FULLSCREEN", "SIZE_NONE", "modalStack", "OraModal", "props", "onClose", "bind", "show", "overrideShowClose", "close", "state", "open", "setContainerRef", "el", "container", "id", "triggerId", "contentClass", "OPL", "UI", "on", "EVENTS", "modules", "modal", "closed", "data", "length", "element", "fire", "initModules", "indexOf", "setTimeout", "doOpen", "push", "console", "log", "setState", "modalIndex", "splice", "off", "stopModules", "document", "body", "classList", "remove", "options", "modalClass", "size", "additionalClass", "closeText", "showCloseText", "showClose", "$", "find", "removeClass", "addClass", "noPadding", "fullscreenMobile", "JSON", "stringify", "getModalOptions", "portalClassName", "getElementsByClassName", "children", "Component", "propTypes", "PropTypes", "string", "bool", "isRequired", "escapeClose", "clickClose", "contentHeight", "number", "func", "oneOf", "defaultProps"],
    "mappings": "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",
    "sourcesContent": ["import React, {Component} from \"react\";\nimport PropTypes from \"prop-types\";\nimport Portal from \"./Portal\";\nimport {pickProps} from \"eshop/modules/core/utils/ui\";\n\nwindow.modalId = ((window.modalId != undefined) ? window.modalId + 1 : 1);\n\nconst SIZE_SMALL = \"small\";\nconst SIZE_NARROW = \"narrow\";\nconst SIZE_MEDIUM = \"medium\";\nconst SIZE_FULLSCREEN = \"fullscreen\";\nconst SIZE_NONE = \"\";\n\nwindow.modalStack = window.modalStack || [];\n\nclass OraModal extends Component {\n    constructor(props) {\n        super(props);\n        this.onClose = this.onClose.bind(this);\n        this.show = this.show.bind(this);\n        this.overrideShowClose=this.overrideShowClose.bind(this);\n        this.close = this.close.bind(this);\n        this.state={open:false};\n        this.setContainerRef = el => {\n            this.container = el;\n        };\n    }\n\n    componentWillMount() {\n        var id = this.props.id || window.modalId++;\n        this.modalId = \"react-modal-\" + id;\n        this.triggerId = \"react-modal-\" + id + \"-trigger\";\n        this.contentClass = \"react-modal-\" + id + \"-content\";\n    }\n\n    componentDidMount() {\n        OPL.UI.on(OPL.UI.EVENTS.modules.modal.closed, this.onClose, this.triggerId);\n        OPL.UI.on('module.started', function(data) {\n            if(window.modalStack.length==1 && window.modalStack[0] === data.element.id){\n                OPL.UI.fire(OPL.UI.EVENTS.modules.modal.open, \"\", data.element.id);\n            }\n        });\n\n        OPL.UI.initModules(this.container);\n    }\n\n    componentWillReceiveProps(props) {\n        this.overrideShowClose();\n        if ((props.open && !this.props.open) ||  (props.open && !this.state.open)) {\n            this.show();\n        }\n        if (!props.open && this.props.open) {\n            this.close();\n        }\n    }\n    show() {\n        if (window.modalStack.indexOf(this.triggerId) === -1) {\n            if (window.modalStack.length > 0) {\n                OPL.UI.fire(OPL.UI.EVENTS.modules.modal.close, \"\", window.modalStack[0]);\n                //wait untill first modal closes\n                setTimeout(this.doOpen.bind(this), 600);\n            }\n            else {\n                this.doOpen();\n            }\n            window.modalStack.push(this.triggerId);\n        }\n        console.log(\"window.modalStack\", window.modalStack);\n    }\n\n    doOpen() {\n;\n        OPL.UI.fire(OPL.UI.EVENTS.modules.modal.open, \"\", this.triggerId);\n        this.setState({open:true});\n    }\n\n    close() {\n        const modalIndex = window.modalStack.indexOf(this.triggerId);\n        if (modalIndex > -1) {\n            window.modalStack.splice(modalIndex, 1);\n        }\n        OPL.UI.fire(OPL.UI.EVENTS.modules.modal.close, \"\", this.triggerId);\n\n    }\n\n    componentWillUnmount() {\n        OPL.UI.off(OPL.UI.EVENTS.modules.modal.closed, this.onClose, this.triggerId);\n        OPL.UI.stopModules(this.container);\n    }\n\n    onClose() {\n        if (!!this.props.onClose) {\n            this.props.onClose();\n        }\n        if (window.modalStack.length === 0) {\n            window.document.body.classList.remove(\"toplayer__open\");\n        }\n        this.setState({open:false});\n        const modalIndex = window.modalStack.indexOf(this.triggerId);\n        if (modalIndex > -1) {\n            window.modalStack.splice(modalIndex, 1);\n        }\n    }\n\n    getModalOptions() {\n        const options = pickProps(this.props, [\"showClose\", \"escapeClose\", \"clickClose\", \"contentHeight\", \"closeText\", \"openOnStart\"]);\n        options.modalClass = \"o-modal\" + (!!this.props.size ? (\" o-modal--\" + this.props.size) : \"\");\n        options.additionalClass = this.contentClass;\n        if (this.props.closeText !== null) {\n            options.showCloseText = true;\n        }\n        return options;\n    }\n\n    overrideShowClose(){\n        if(this.props.showClose){\n            $(\"#\"+this.modalId).find(\".close-modal\").removeClass(\"u-hide\");\n        }else{\n\n            $(\"#\"+this.modalId).find(\".close-modal\").addClass(\"u-hide\");\n        }\n    }\n\n    portalClassName(){\n        return \"u-hide--soft\" +\n        (this.props.noPadding ? \" o-modal__no-padding\": \"\") +\n        (this.props.fullscreenMobile ? \" o-modal--fullscreen-mobile\": \"\");\n    }\n\n    render() {\n\n        return <div ref={this.setContainerRef}>\n            <a href={\"#\" + this.modalId}\n                id={this.triggerId}\n                className=\"o-modal__trigger u-hide\"\n                data-type=\"modal:custom\" data-js-module=\"core/modules/modal\"\n                data-js-options={JSON.stringify(this.getModalOptions())}/>\n            <Portal\n                portalId={this.modalId}\n                portalClassName={this.portalClassName()}\n                getDestinationNode={() => document.getElementsByClassName(this.contentClass)[0]}>\n                {this.props.children}\n            </Portal>\n        </div>;\n    }\n}\n\nOraModal.propTypes = {\n    id: PropTypes.string,\n    open: PropTypes.bool.isRequired,\n    showClose: PropTypes.bool,\n    noPadding: PropTypes.bool,\n    fullscreenMobile: PropTypes.bool,\n    closeText: PropTypes.string,\n    escapeClose: PropTypes.bool,\n    clickClose: PropTypes.bool,\n    contentHeight: PropTypes.number,\n    onClose: PropTypes.func,\n    size: PropTypes.oneOf([SIZE_SMALL, SIZE_NARROW, SIZE_MEDIUM, SIZE_FULLSCREEN, SIZE_NONE]),\n};\n\nOraModal.defaultProps = {\n    showClose: true,\n    noPadding: false,\n    fullscreenMobile: false,\n    closeText: null,\n    contentHeight: null,\n    escapeClose: null,\n    clickClose: null,\n    size: SIZE_NONE,\n};\n\nexport default OraModal;\n"],
    "file": "Modal.js"
}