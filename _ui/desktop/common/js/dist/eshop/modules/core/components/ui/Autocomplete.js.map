{
    "version": 3,
    "sources": ["../../../../../../../es6/eshop/modules/core/components/ui/Autocomplete.jsx"],
    "names": ["moduleId", "AutocompleteInput", "props", "id", "modulePromise", "ref", "path", "options", "noWrap", "arrayData", "minLength", "maxResults", "completecallback", "onSelect", "bind", "updateSuggestions", "prevProps", "suggestions", "map", "mapSuggestion", "OPL", "UI", "fire", "EVENTS", "modules", "autocomplete", "onChange", "name", "value", "event", "target", "OWN_PROPS", "onChangeValue", "Component", "propTypes", "PropTypes", "array", "func", "isRequired", "number", "string", "defaultProps", "suggestion", "label", "Autocomplete", "LabeledAutocomplete", "wrapperClassName"],
    "mappings": "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",
    "sourcesContent": ["import React, {Component} from \"react\";\nimport PropTypes from \"prop-types\";\nimport {addLabelToInput} from \"../hoc/input\";\nimport {loadModule, excludeProps} from \"eshop/modules/core/utils/ui\";\n\nvar moduleId = 0;\n// Raw autocomplete input component - needs to be wrapped with an element with 'opl-autocomplete' class to be styled properly.\nexport class AutocompleteInput extends Component {\n    constructor(props) {\n        super(props);\n        this.id = props.id || \"react-autocomplete-\" + moduleId++;\n    }\n\n    componentDidMount() {\n        this.modulePromise = loadModule(this.ref, {\n            path: \"common/modules/opl-autocomplete\",\n            options: {\n                noWrap: true,\n                arrayData: true,\n                minLength: this.props.minLength,\n                maxResults: this.props.maxResults,\n                completecallback: this.onSelect.bind(this)\n            }\n        });\n        this.updateSuggestions();\n    }\n\n    componentDidUpdate(prevProps) {\n        if (prevProps.suggestions !== this.props.suggestions) {\n            this.updateSuggestions();\n        }\n    }\n\n    updateSuggestions() {\n        //TODO: use the promise when OPL.UI.off is fixed and doesn't recognize a handler only by its source code\n        //this.modulePromise = this.modulePromise.then(() => {\n            if (!this.props.suggestions) return;\n            let suggestions = this.props.suggestions.map(this.props.mapSuggestion);\n            OPL.UI.fire(OPL.UI.EVENTS.modules.autocomplete.arrayData, suggestions, this.id);\n        //});\n    }\n\n    onSelect() {\n        if (this.props.onChange) {\n            let {id, name, value} = this.ref;\n            this.props.onChange({id, name, value});\n        }\n    }\n\n    onChangeValue(event) {\n        if (this.props.onChange) {\n            let {id, name, value} = event.target;\n            this.props.onChange({id, name, value});\n        }\n    }\n\n    render() {\n        return <input type=\"text\" {...excludeProps(this.props, AutocompleteInput.OWN_PROPS)} id={this.id} onChange={this.onChangeValue.bind(this)} ref={ref => this.ref = ref}/>;\n    }\n}\n\nAutocompleteInput.OWN_PROPS = [\"suggestions\", \"mapSuggestion\", \"minLength\", \"maxResults\", \"errors\", \"labelType\"];\nAutocompleteInput.propTypes = {\n    suggestions: PropTypes.array,\n    mapSuggestion: PropTypes.func.isRequired,\n    minLength: PropTypes.number,\n    maxResults: PropTypes.number,\n    value: PropTypes.string.isRequired,\n    onChange: PropTypes.func.isRequired\n}\n\nAutocompleteInput.defaultProps = {\n    minLength: 3,\n    mapSuggestion: (suggestion) => ({value: suggestion, label: suggestion})\n};\n\n// Full autocomplete component, for use without higher order components that work on inputs\nexport const Autocomplete = props => <div className=\"opl-autocomplete\"><AutocompleteInput {...props}/></div>;\nexport default Autocomplete;\n\nexport const LabeledAutocomplete = addLabelToInput(AutocompleteInput);\nLabeledAutocomplete.defaultProps = {\n        ...LabeledAutocomplete.defaultProps,\n        ...AutocompleteInput.defaultProps,\n        wrapperClassName: \"opl-autocomplete\"\n    };\n"],
    "file": "Autocomplete.js"
}