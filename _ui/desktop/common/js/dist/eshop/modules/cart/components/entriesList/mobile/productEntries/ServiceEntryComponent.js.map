{
    "version": 3,
    "sources": ["../../../../../../../../../es6/eshop/modules/cart/components/entriesList/mobile/productEntries/ServiceEntryComponent.jsx"],
    "names": ["ServiceEntryComponent", "props", "name", "entry", "bundleNo", "entryNo", "submitChangePackagesModal", "bind", "changePackages", "header", "detailsHeader", "details", "JSON", "parse", "err", "console", "log", "ModalService", "add", "data", "showNet", "open", "resourceModalOpen", "lowerInstallmentsModalOpen", "includes", "processType", "editable", "OnlineUtils", "isAssignment", "changePackagesModalInitData", "OraVasPacketPickerComponent", "openPopup", "submit", "error", "toAdd", "toRemove", "conflicts", "toRemoveAndConflicts", "concat", "updateCartVases", "bundleCode", "productCode", "idx", "onRemoveClicked", "mainIcon", "isMnpApplication", "chooseStartPricePropertyName", "onDetailsClicked", "onMsisdnChangeClicked", "lowerInstallmentsClicked", "tooltipValues", "bottomBorder", "shouldNotBeEditable", "processName", "Component", "propTypes", "PropTypes", "number", "isRequired", "string", "object", "defaultProps", "mapStateToProps", "state", "mapDispatchToProps", "dispatch", "bundle", "offer", "cartBundle", "productsToRemove", "productsToAdd"],
    "mappings": "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",
    "sourcesContent": ["import React, {Component} from \"react\";\nimport PropTypes from 'prop-types';\nimport {connect} from \"react-redux\";\nimport MultiCartItemComponent from \"../MultiCartItemComponent\";\nimport ModalService from \"eshop/flux/utils/OraModalService\";\nimport CartDetailsModal from \"../../../CartDetailsModal\";\nimport {resourceModalOpen, lowerInstallmentsModalOpen} from \"eshop/modules/cart/actions/resources\";\nimport { getPriceIsNet, getChangePackagesModalInitData} from \"eshop/modules/cart/selectors\"\nimport OnlineUtils from \"eshop/utils/OnlineUtils\";\nimport OraVasPacketPickerComponent from \"eshop/modules/simfree/components/modals/OraVasPacketPickerComponent\";\nimport {updateCartVases} from \"eshop/modules/cart/actions/cart\";\n\nclass ServiceEntryComponent extends Component {\n\n    constructor (props) {\n        super(props);\n        this.name = this.props.entry.bundleNo+\"_\"+this.props.entry.entryNo;\n        this.submitChangePackagesModal = this.submitChangePackagesModal.bind(this);\n        this.changePackages = this.changePackages.bind(this);\n    }\n\n    componentWillMount() {\n        var header = this.props.detailsHeader ? this.props.detailsHeader : \"Szczegóły\";\n        let details = JSON.parse('[{\"key\":\"brak\", \"value\":\"danych\"}]')\n        try {\n            details = JSON.parse(this.props.entry.details)\n        } catch(err) {\n            console.log(\"## details on cart parsing error##   \")\n        }\n        ModalService.add((data) => <CartDetailsModal id={\"productDetails-\"+this.name} header={header} details={details} showNet={this.props.showNet} proposition={this.props.entry}/>);\n    }\n\n    onDetailsClicked(){\n        console.log(\"Service details modal open clicked\");\n        ModalService.open(\"productDetails-\"+this.name);\n    }\n\n    onRemoveClicked(){\n        console.log(\"Service delete clicked\");\n    }\n\n    onChangeClicked(){\n        console.log(\"Service change clicked\");\n    }\n\n    onMsisdnChangeClicked(bundleNo){\n        this.props.resourceModalOpen(bundleNo);\n    }\n\n    lowerInstallmentsClicked(bundleNo){\n        this.props.lowerInstallmentsModalOpen(bundleNo);\n    }\n\n    shouldNotBeEditable(){\n        return (['ASSIGNMENT','ASSIGNMENT_DEATH','MNP_APPLICATION','ASSIGNMENT_B2C_B2B','ASSIGNMENT_B2C_JDG'].includes(this.props.entry.processType)) ? false : this.props.editable;\n    }\n\n    chooseStartPricePropertyName(){\n        return (OnlineUtils.isAssignment(this.props.entry.processType))  ? \"checkoutPrice\" : \"firstBillPrice\";\n    }\n\n\n    changePackages(){\n        let data = this.props.changePackagesModalInitData[this.props.entry.bundleNo];\n        if(data){\n            OraVasPacketPickerComponent.openPopup({...data, submit: this.submitChangePackagesModal});\n        } else {\n            console.error('Cannot fetch changePackagesModalInitData for bundle ' + this.props.entry.bundleNo)\n        }\n    }\n\n    submitChangePackagesModal(toAdd, toRemove, conflicts){\n        let toRemoveAndConflicts = conflicts.concat(toRemove)\n        if(toRemoveAndConflicts[0] || toAdd[0]){\n            this.props.updateCartVases(\n                this.props.entry.bundleCode,\n                this.props.entry.productCode,\n                this.props.entry.bundleNo,\n                toRemoveAndConflicts,\n                toAdd\n            );\n        }\n    }\n\n    render(){\n        return (\n                <MultiCartItemComponent key={\"SIM_\" + this.props.idx}\n                                        onRemoveClicked={this.props.editable&&this.props.onRemoveClicked}\n                                        icon={this.props.mainIcon}\n                                        entry={this.props.entry}\n                                        type=\"SIM\"\n                                        showStartPriceAsActivation={this.props.editable && !OnlineUtils.isMnpApplication(this.props.entry.processType)}\n                                        startPricePropertyName={this.chooseStartPricePropertyName()}\n                                        onDetailsClicked={this.onDetailsClicked.bind(this)}\n                                        onMsisdnChangeClicked={this.onMsisdnChangeClicked.bind(this, this.props.entry.bundleNo)}\n                                        lowerInstallmentsClicked={this.lowerInstallmentsClicked.bind(this, this.props.entry.bundleNo)}\n                                        tooltipValues={this.props.tooltipValues}\n                                        bottomBorder={this.props.bottomBorder}\n                                        editable={this.shouldNotBeEditable()}\n                                        processName={this.props.processName}\n                                        changePackages = {this.changePackages}\n                />\n        )\n    }\n}\n\nServiceEntryComponent.propTypes = {\n    idx: PropTypes.number.isRequired,\n    mainIcon: PropTypes.string.isRequired,\n    entry: PropTypes.object.isRequired\n}\n\nServiceEntryComponent.defaultProps = {\n    bottomBorder: false,\n    editable:true\n}\nconst mapStateToProps = state => ({\n    showNet: getPriceIsNet(state),\n    changePackagesModalInitData: getChangePackagesModalInitData(state)\n});\n\nconst mapDispatchToProps = (dispatch) => ({\n    resourceModalOpen: (bundleNo) => dispatch(resourceModalOpen(bundleNo)),\n    lowerInstallmentsModalOpen: (bundleNo) => dispatch(lowerInstallmentsModalOpen(bundleNo)),\n    updateCartVases: (bundle, offer, cartBundle, productsToRemove, productsToAdd) => dispatch(updateCartVases(bundle, offer, cartBundle, productsToRemove, productsToAdd)),\n})\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ServiceEntryComponent);\n"],
    "file": "ServiceEntryComponent.js"
}