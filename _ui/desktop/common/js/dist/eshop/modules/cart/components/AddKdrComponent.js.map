{
    "version": 3,
    "sources": ["../../../../../../es6/eshop/modules/cart/components/AddKdrComponent.jsx"],
    "names": ["AddKdrComponent", "props", "state", "showModal", "getKdrNumberFromCart", "prevProps", "saving", "errors", "Object", "keys", "length", "closeModal", "modalState", "setState", "setShowModal", "open", "size", "showClose", "escapeClose", "clickClose", "onClose", "bind", "kdrAccepted", "changeKdrNumber", "clearIfNotAccepted", "getModalContentProps", "showAddLink", "addBtnText", "getDescription", "label", "tooltipBtnText", "tooltipContent", "tooltipId", "addRowIcon", "descriptions", "getAddedRovProps", "kdrNumber", "kdrSource", "clearData", "id", "inputValue", "error", "mask", "placeholder", "modalHeader", "modalMainText", "inputPlaceHolder", "modalBtnText", "onButtonClick", "onInputNext", "setInputValue", "value", "kdrNumberPattern", "test", "dispatchKdrError", "level", "message", "approveKdrNumber", "saveKdrData", "number", "source", "event", "preventDefault", "clearKdrNumber", "name", "getModalProps", "getModalContent", "getAddedRowView", "onAddClick", "Component", "mapStateToProps", "mapDispatchToProps", "dispatch", "kdrData", "propTypes", "PropTypes", "string", "isRequired", "modalInputPlaceholder", "addedRowTitle", "addedRowIcon", "addedRowTooltip", "func", "bool", "defaultProps", "kdrNumberError", "descriptionName"],
    "mappings": "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",
    "sourcesContent": ["import React, {Component} from \"react\";\nimport {connect} from \"react-redux\";\nimport PropTypes from \"prop-types\";\nimport OraModal from \"../../core/components/ui/Modal\";\nimport {HideWhenCartIsEmpty} from \"./Utils\";\nimport AddComponent from \"./AddComponent\";\nimport {getKdrNumber, getKdrSource, getKdrAccepted, getKdrErrors, getKdrSaving} from \"../selectors\";\nimport {changeKdrNumber, getKdrDataFromCart, clearKdrNumber, saveKdrData, approveKdrNumber, dispatchKdrError} from \"../actions/cart\";\nimport SingleInputModalContent from \"./SingleInputModalContent\";\nimport {kdrNumberPattern} from \"../constants\";\nimport {OraLoader} from \"eshop/components/OraCommonComponents\";\n\nexport class AddKdrComponent extends Component {\n    constructor(props) {\n        super(props);\n        this.state = ({showModal: false});\n    }\n\n    componentDidMount() {\n        this.props.getKdrNumberFromCart();\n    }\n\n    componentDidUpdate(prevProps) {\n        if(prevProps.saving && !this.props.saving && (!this.props.errors || Object.keys(this.props.errors).length === 0)) {\n            this.closeModal();\n        }\n    }\n\n    setShowModal(modalState) {\n        this.setState({showModal: modalState});\n    }\n\n    onAddClick() {\n        this.setShowModal(true);\n    }\n\n    getModalProps() {\n        return {\n            open: this.state.showModal,\n            size: \"small\",\n            showClose: true,\n            escapeClose: false,\n            clickClose: false,\n            onClose: this.closeModal.bind(this)\n        };\n    }\n\n    clearIfNotAccepted() {\n        if(!this.props.kdrAccepted) {\n            this.props.changeKdrNumber(\"\");\n        }\n    }\n\n    closeModal() {\n        this.clearIfNotAccepted();\n        this.setShowModal(false);\n    }\n\n    getModalContent() {\n        return <SingleInputModalContent {...this.getModalContentProps()}/>;\n    }\n\n    getAddedRovProps() {\n        return {\n            showAddLink: false,\n            addBtnText: getDescription('addBtnText', this.props),\n            label: getDescription('addedRowTitle', this.props),\n            tooltipBtnText: getDescription('tooltipBtnText', this.props),\n            tooltipContent: getDescription('addedRowTooltip', this.props),\n            tooltipId: \"addedKdr\",\n            addRowIcon: getDescription('addedRowIcon', this.props),\n            descriptions: {}\n        };\n    }\n\n    getAddedRowView() {\n        return (\n            <AddComponent {...this.getAddedRovProps()}>\n                <p className=\"u-font-normal\">{this.props.kdrNumber}</p>\n                {\n                    this.props.kdrSource === \"legacy\" ?\n                        null :\n                        <a href=\"#\" className=\"u-font-bold\" onClick={this.clearData.bind(this)}>\n                            Usuń\n                        </a>\n                }\n            </AddComponent>\n        );\n    }\n\n    getModalContentProps() {\n        return {\n            id: \"kdrNumber\",\n            inputValue: this.props.kdrNumber,\n            error: this.props.errors,\n            mask: \"99999999999999999\",\n            placeholder: \"_________________\",\n            modalHeader: getDescription('modalHeader', this.props),\n            modalMainText: getDescription('modalMainText', this.props),\n            inputPlaceHolder: getDescription('modalInputPlaceholder', this.props),\n            modalBtnText: getDescription('modalBtnText', this.props),\n            onButtonClick: this.onInputNext.bind(this),\n            setInputValue: this.changeKdrNumber.bind(this)\n        };\n    }\n\n    onInputNext(value) {\n        if(!kdrNumberPattern.test(this.props.kdrNumber)) {\n            this.props.dispatchKdrError({level: \"error\", message: getDescription('kdrNumberError', this.props)});\n        } else {\n            this.props.approveKdrNumber();\n            this.props.saveKdrData({\n                number: this.props.kdrNumber,\n                source: this.props.kdrSource\n            });\n        }\n    }\n\n    clearData(event) {\n        event.preventDefault();\n        this.props.clearKdrNumber();\n    }\n\n    changeKdrNumber({id, name, value}) {\n        this.props.changeKdrNumber(value);\n    }\n\n    render() {\n        return (\n            <HideWhenCartIsEmpty className=\"g-gray1-bg\">\n                <div className=\"l-page-row u-padding-l u-small-padding-left u-small-padding-right\">\n                    <OraModal {...this.getModalProps()} id=\"kdrNumberModal\">\n                        <OraLoader id=\"kdrLoader\"\n                                   loading={this.props.saving}\n                                   parentId=\"kdr-loader\">\n                            {this.getModalContent()}\n                        </OraLoader>\n                    </OraModal>\n\n                    {\n                        this.props.kdrAccepted ?\n                            this.getAddedRowView() :\n                            <AddComponent {...this.props} onAddClick={this.onAddClick.bind(this)}/>\n                    }\n                </div>\n            </HideWhenCartIsEmpty>\n        )\n    }\n}\n\nconst mapStateToProps = state => ({\n    kdrNumber: getKdrNumber(state),\n    kdrSource: getKdrSource(state),\n    errors: getKdrErrors(state),\n    saving: getKdrSaving(state),\n    kdrAccepted: getKdrAccepted(state)\n});\n\nconst mapDispatchToProps = (dispatch) => ({\n    changeKdrNumber: (kdrNumber) => dispatch(changeKdrNumber(kdrNumber)),\n    getKdrNumberFromCart: () => dispatch(getKdrDataFromCart()),\n    approveKdrNumber: () => dispatch(approveKdrNumber()),\n    clearKdrNumber: () => dispatch(clearKdrNumber()),\n    saveKdrData: (kdrData) => dispatch(saveKdrData(kdrData)),\n    dispatchKdrError: (error) => dispatch(dispatchKdrError(error))\n});\n\nAddKdrComponent.propTypes = {\n    label: PropTypes.string,\n    addBtnText: PropTypes.string,\n    tooltipBtnText: PropTypes.string,\n    tooltipId: PropTypes.string.isRequired,\n    modalHeader: PropTypes.string,\n    modalMainText: PropTypes.string,\n    modalBtnText: PropTypes.string,\n    modalInputPlaceholder: PropTypes.string,\n    addRowIcon: PropTypes.string,\n    addedRowTitle: PropTypes.string,\n    addedRowIcon: PropTypes.string,\n    addedRowTooltip: PropTypes.string,\n    changeKdrNumber: PropTypes.func,\n    getKdrNumberFromCart: PropTypes.func,\n    approveKdrNumber: PropTypes.func,\n    clearKdrNumber: PropTypes.func,\n    kdrNumber: PropTypes.string,\n    kdrSource: PropTypes.string,\n    kdrAccepted: PropTypes.bool\n};\n\nAddKdrComponent.defaultProps = {\n    label: \"Posiadam Kartę Dużej rodzinki\",\n    addBtnText: \"Kliknij aby potwierdzić posiadanie Karty Dużej rodzinki\",\n    tooltipBtnText: \"Otwórz podpowiedź\",\n    tooltipId: \"tooltip_kdr\",\n    modalHeader: \"Karta Dużej Rodzinki\",\n    modalMainText: \"\",\n    modalBtnText: \"Potwierdź\",\n    modalInputPlaceholder: \"Wpisz nr karty Dużej rodzinki\",\n    addRowIcon: \"g-icon--voucher\",\n    addedRowTitle: \"Karta Dużej Rodziny\",\n    addedRowIcon: \"g-icon--person-group2\",\n    addedRowTooltip: \"\",\n    kdrNumberError: \"Nieprawidłowy numer Karty Dużej rodzinki\"\n};\n\nfunction getDescription(descriptionName, props) {\n    return props.descriptions[descriptionName] || props[descriptionName];\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(AddKdrComponent);"],
    "file": "AddKdrComponent.js"
}