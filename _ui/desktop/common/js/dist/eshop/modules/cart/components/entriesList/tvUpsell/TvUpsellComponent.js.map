{
    "version": 3,
    "sources": ["../../../../../../../../es6/eshop/modules/cart/components/entriesList/tvUpsell/TvUpsellComponent.jsx"],
    "names": ["TvUpsellComponentView", "addTV", "addButtonClicked", "console", "warn", "productCode", "removeButtonClicked", "entry", "props", "ModalService", "open", "bundleNo", "offerIndex", "add", "data", "sectionConf", "deleteEntryPopupTitle", "deleteEntryPopupContent", "declineDeleteEntryPopupButtonLabel", "confirmDeleteEntryPopupButtonLabel", "removeFromCart", "bind", "sectionTitle", "registerRemovePopup", "title", "idx", "configurables", "trigger", "migratedProducts", "changeableVases", "vases", "hiddenTv", "filter", "tv", "addonType", "map", "id", "shift", "forEach", "vas", "mandatoryProducts", "includes", "push", "confVas", "services", "find", "service", "AddonType", "SFH", "mandatory", "openRemovePopup", "index", "onChangeFunction", "tvChangeClicked", "onRemoveFunction", "tvRemoveClicked", "bundleCode", "productSections", "section", "propsToPass", "icon", "label", "buyMoreLabel", "header", "descriptions", "inner", "productList", "entryType", "ProductEntryType", "TV_PACKAGE", "tvPackages", "migratedTvPackages", "p", "extendedPackages", "inputType", "extendedPackagesCodes", "extendedPack", "tvPackage", "sumOfTvPackages", "concat", "length", "getWrappedInstance", "Component", "TvUpsellComponent", "fetchFixConfigurables", "mapStateToProps", "state", "mapDispatchToProps", "dispatch", "cartBundle"],
    "mappings": "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",
    "sourcesContent": ["import React, {Component} from \"react\";\nimport {connect} from \"react-redux\";\nimport MultiCartExpandingSectionComponent from \"../shared/MultiCartExpandingSectionComponent\";\nimport MultiCartCollapsedItemComponent from \"../mobile/MultiCartCollapsedItemComponent\";\nimport {fetchFixConfigurables, removeFromCart} from \"eshop/modules/cart/actions/cart\";\nimport {getFixConfigurables} from \"eshop/modules/cart/selectors\";\nimport AddTVButton from \"../fix/buymore/buttons/AddTVButton\";\nimport UniversalEntryComponent from \"../shared/UniversalEntryComponent\";\nimport ProductEntryType from \"../../../../checkout/constants/ProductEntryTypeEnum\";\nimport MultiCartRemovePopup from \"eshop/modules/cart/components/entriesList/mobile/MultiCartRemovePopup\";\n\nimport ModalService from \"eshop/flux/utils/OraModalService\";\n\nimport {getConfigurables, getTvPackages} from \"eshop/modules/cart/analyzer/ProductInfoUtils\"\nimport {FloatingBox} from \"../fix/BoxFragments\";\n\nclass TvUpsellComponentView extends Component {\n\n    tvChangeClicked(){\n        if(this.addTV && this.addTV.addButtonClicked){\n            this.addTV.addButtonClicked();\n        } else {\n            console.warn(\"No add TV button found\");\n        }\n    }\n\n    tvRemoveClicked(productCode){\n        if(this.addTV && this.addTV.removeButtonClicked){\n            this.addTV.removeButtonClicked(productCode);\n        } else {\n            console.warn(\"No add TV button found\");\n        }\n    }\n\n    openRemovePopup() {\n        const {entry} = this.props;\n        ModalService.open('remove-from-cart-modal-' + entry.bundleNo, {\n            bundleNo: entry.bundleNo,\n            offerIndex: entry.bundleNo\n        });\n    }\n\n    registerRemovePopup(entry) {\n        ModalService.add((data) => <MultiCartRemovePopup id={'remove-from-cart-modal-' + entry.bundleNo}\n        bundleNo={entry.bundleNo}\n        title={this.props.sectionConf.deleteEntryPopupTitle}\n        content={this.props.sectionConf.deleteEntryPopupContent}\n        decline={this.props.sectionConf.declineDeleteEntryPopupButtonLabel}\n        confirm={this.props.sectionConf.confirmDeleteEntryPopupButtonLabel}\n        onClickRemove={this.props.removeFromCart.bind(this, null, entry.bundleNo)}\n        textRepresentation={this.props.sectionConf.sectionTitle}/>);\n    }\n\n    componentDidMount() {\n        this.registerRemovePopup(this.props.entry);\n    }\n\n    render(){\n        const title = this.props.sectionConf.sectionTitle;\n        let idx = \"video_section\"+this.props.idx;\n        let configurables = getConfigurables(this.props.configurables);\n\n        const trigger = 'ost-' + this.props.entry.bundleNo;\n        const migratedProducts = this.props.entry.migratedProducts || [];\n\n        let changeableVases = [];\n        if(this.props.entry.vases && configurables){\n            let hiddenTv = getTvPackages(configurables).filter(tv => tv.addonType === \"TVBASIC\").map(tv => tv.id).shift();\n            this.props.entry.vases.forEach((vas) => {\n                if(!configurables.mandatoryProducts.includes(vas.productCode) && vas.productCode != hiddenTv){\n                    changeableVases.push(vas);\n                } else {\n                    const confVas = configurables.services.find(service => service.id === vas.productCode);\n                    if (confVas && confVas.addonType === AddonType.SFH) {\n                        changeableVases.push({...vas, mandatory: configurables.mandatoryProducts.includes(vas.productCode)});\n                    }\n                }\n            })\n        }\n\n        return (<div>\n            <MultiCartExpandingSectionComponent title={title} key={idx} entry={this.props.entry}\n                trigger={trigger}\n                conf={this.props.sectionConf}\n                onRemoveClicked={() => this.openRemovePopup(this.props.entry)}>\n                <div>\n                    {changeableVases.map((vas, index) =>{\n                        let onChangeFunction = this.tvChangeClicked.bind(this);\n                        let onRemoveFunction = this.tvRemoveClicked.bind(this);\n\n                        return (\n                            <FloatingBox key={\"fb_\"+index}>\n                            <UniversalEntryComponent\n                                key={index}\n                                entry={vas}\n                                detailsHeader={\"Szczegóły usługi\"}\n                                propositionId={this.props.entry.bundleCode}\n                                bundle={this.props.entry.productCode}\n                                onChangeClicked={onChangeFunction}\n                                onRemoveClicked={onRemoveFunction}\n                            />\n                            </FloatingBox>\n                        )\n                    })}\n                    {this.props.sectionConf.productSections.map((section,index) => {\n                        let propsToPass = {};\n                        propsToPass.icon = section.icon;\n                        propsToPass.label = section.buyMoreLabel;\n                        propsToPass.header = section.buyMoreLabel;\n                        propsToPass.descriptions = section.descriptions;\n                        propsToPass.configurables=configurables;\n                        propsToPass.entry=this.props.entry;\n                        propsToPass.inner=section.productList;\n                        switch(section.entryType){\n                            case ProductEntryType.TV_PACKAGE: {\n                                let tvPackages = getTvPackages(configurables);\n                                let migratedTvPackages = migratedProducts.filter(p => !!p.addonType);\n                                let extendedPackages = migratedTvPackages.map(tv => {\n                                    tv.id = tv.productCode;\n                                    tv.inputType = \"MIGRATED\";\n                                    return tv;\n                                });\n                                let extendedPackagesCodes = extendedPackages.map(extendedPack => extendedPack.productCode);\n                                tvPackages = tvPackages.filter(tvPackage => !extendedPackagesCodes.includes(tvPackage.id));\n                                let sumOfTvPackages = tvPackages.concat(extendedPackages);\n                                return tvPackages.length > 0\n                                ? (<AddTVButton\n                                key={\"TVS\"+index}\n                                {...propsToPass}\n                                migratedTvPacks={extendedPackages ? extendedPackages : []}\n                                presentable={sumOfTvPackages}\n                                ref={(addTV) => {this.addTV =  !!addTV ? addTV.getWrappedInstance() : null}}\n                                />) : <div key=\"NULL_TVS\"/>;\n                            }\n                            default:\n                            return <div key=\"DEFAULT_NULL\"/>;\n                        }\n                    })}\n                </div>\n                <MultiCartCollapsedItemComponent key={\"collapsed\" + idx}/>\n            </MultiCartExpandingSectionComponent>\n        </div>);\n    }\n}\n\nclass TvUpsellComponent extends Component {\n    constructor(props){\n        super(props);\n    }\n\n    componentWillMount(){\n        if(this.props.entry.bundleNo){\n            this.props.fetchFixConfigurables(this.props.entry.bundleNo);\n        }\n    }\n\n    render(){\n        return (<TvUpsellComponentView {...this.props}/>);\n    }\n}\n\nconst mapStateToProps = (state) => ({\n    configurables: getFixConfigurables(state)\n});\n\nconst mapDispatchToProps = (dispatch) => ({\n    removeFromCart: (data, id) => dispatch(removeFromCart(data, id)),\n    fetchFixConfigurables: (cartBundle) => dispatch(fetchFixConfigurables(cartBundle))\n});\n\nexport default connect(mapStateToProps,mapDispatchToProps)(TvUpsellComponent);"],
    "file": "TvUpsellComponent.js"
}