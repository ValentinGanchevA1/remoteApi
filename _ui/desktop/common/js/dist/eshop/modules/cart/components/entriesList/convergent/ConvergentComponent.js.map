{
    "version": 3,
    "sources": ["../../../../../../../../es6/eshop/modules/cart/components/entriesList/convergent/ConvergentComponent.jsx"],
    "names": ["ConvergentComponent", "vasModalIsOpen", "tvPackageModalIsOpen", "servicesAndDevices", "getServicesAndDevices", "props", "convergentConfigurables", "configurables", "vasSection", "selectedSection", "entry", "ModalService", "open", "bundleNo", "offerIndex", "removeMagnumFromMultiCart", "convergentBundleNos", "productCode", "removeTerminalFromConvergentCartBundle", "section", "vas", "updateMagnumTerminal", "setState", "tvPackageSection", "fixBonusModalIsOpen", "fixBonusModalSection", "products", "entriesProducts", "_", "forEach", "productsList", "propositionId", "propositionEntry", "find", "entries", "proposition", "push", "updateCartProducts", "registerRemovePopup", "fetchConvergentConfigurables", "nextProps", "add", "data", "sectionConf", "deleteEntryPopupTitle", "deleteEntryPopupContent", "declineDeleteEntryPopupButtonLabel", "confirmDeleteEntryPopupButtonLabel", "removeFromCart", "sectionTitle", "adapter", "removeButtonClicked", "lowerInstallmentsModalOpen", "migratedProducts", "apply", "getMigratedProducts", "devices", "services", "length", "product", "migrated", "isMigrated", "filter", "element", "base", "id", "bonusEntry", "conf", "factoryName", "CartEntryType", "FIX", "secondaryServices", "addonType", "AddonType", "SECONDARY_CHOICE_DISCOUNT", "productType", "productSections", "productLists", "entryType", "ProductEntryType", "SECONDARY_CHOICE", "map", "productList", "flatMap", "fixMigrationEntry", "p", "deviceType", "presentables", "Object", "keys", "state", "idx", "triggerClass", "migratedDevices", "filterMigratedDevices", "getPresentables", "customRules", "fixBonusModalDescriptions", "descriptions", "openRemovePopup", "updateTerminal", "removeProductFromCartBundle", "bind", "removeTerminalFromCartBundle", "lowerInstallmentsActive", "lowerInstallmentsClicked", "undefined", "showVasModal", "showTvPackageModal", "showFixBonusModal", "isSatTechnologyEntry", "isDslTechnologyEntry", "showNetPrices", "areSecondaryChoiceBonusesAvailable", "buyMoreLabel", "hideVasModal", "icon", "saveVasesButton", "hideTvPackageModal", "customFilters", "getSecondaryChoiceDiscountsWithRelatedBonuses", "bonus", "uid", "header", "relatedProducts", "hideFixBonusModal", "getProductListForSecondaryChoiceDiscount", "isSecondaryConfigurable", "Component", "PropTypes", "any", "number", "shape", "ConvergentComponentDescriptionsType", "bool", "func", "mapStateToProps", "cart", "marketSegment", "mapDispatchToProps", "dispatch", "updateConvergentCartProducts"],
    "mappings": "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",
    "sourcesContent": ["import React, {Component} from \"react\";\nimport PropTypes from \"prop-types\";\nimport {bindActionCreators} from \"redux\";\nimport {connect} from \"react-redux\";\nimport _ from \"lodash\";\n\nimport MultiCartExpandingSectionComponent from \"../shared/MultiCartExpandingSectionComponent\";\nimport ConvergentMultiCartExpandedItemComponent from \"./ConvergentMultiCartExpandedItemComponent\";\nimport ConvergentMultiCartCollapsedItemComponent from \"./ConvergentMultiCartCollapsedItemComponent\";\nimport ModalService from \"eshop/flux/utils/OraModalService\";\nimport MultiCartRemovePopup from \"../shared/MultiCartRemovePopup\"\nimport {getConvergentBundleNos} from \"eshop/modules/checkout/selectors\";\nimport {removeMagnumFromMultiCart, removeTerminalFromConvergentCartBundle} from \"eshop/modules/cart/actions/cart\";\nimport ConvergentVasModal from \"./vasModal/ConvergentVasModal\";\nimport {getBonusEntry, getCustomFilters, isDslTechnologyEntry, isSatTechnologyEntry} from \"../../../selectors\";\nimport {fetchConvergentConfigurables, updateConvergentCartProducts} from \"../../../actions/cart\";\nimport ConvergentAnalyzerAdapter from \"./vasModal/ConvergentAnalyzerAdapter\";\nimport {ConvergentTvPackageModal} from \"./tvPackage/ConvergentTvPackageModal\";\nimport {ConvergentFixBonusModal} from \"./fixBonusModal/ConvergentFixBonusModal\";\nimport {ConvergentComponentDescriptionsType} from \"./typings\";\nimport {createCustomRules, getDevicesWithAdjustedDeviceType} from \"../../../analyzer/DeviceUtils\";\nimport {getMarketContext} from \"../../../../configurator/selectors/filters\";\nimport {updateMagnumTerminal} from \"eshop/modules/checkout/actions/app\"\nimport ProductEntryType from \"../../../../checkout/constants/ProductEntryTypeEnum\";\nimport CartEntryType from \"../../../../checkout/constants/CartEntryTypeEnum\";\nimport {getSecondaryChoiceDiscountsWithRelatedBonuses} from \"../utils/CartUtils\";\nimport AddonType from \"../../../../checkout/constants/AddonTypeEnum\";\nimport {lowerInstallmentsModalOpen} from \"eshop/modules/cart/actions/resources\";\n\nclass ConvergentComponent extends Component {\n\n    static propTypes = {\n        entry: PropTypes.any,\n        sectionConf: PropTypes.any,\n        idx: PropTypes.number,\n        descriptions: PropTypes.shape(ConvergentComponentDescriptionsType),\n        convergentConfigurables: PropTypes.any,\n        convergentBundleNos: PropTypes.any,\n        isSatTechnologyEntry: PropTypes.bool,\n        isDslTechnologyEntry: PropTypes.bool,\n        fetchConvergentConfigurables: PropTypes.func,\n        removeMagnumFromMultiCart: PropTypes.func,\n        removeTerminalFromConvergentCartBundle: PropTypes.func,\n        updateCartProducts: PropTypes.func,\n    };\n\n    state = {\n        vasModalIsOpen: false,\n        tvPackageModalIsOpen: false,\n        servicesAndDevices: this.getServicesAndDevices(this.props.convergentConfigurables.configurables),\n        vasSection: null,\n        selectedSection: null\n    };\n\n    componentDidMount() {\n        this.registerRemovePopup(this.props.entry);\n        if(this.props.entry.propositionId) {\n            this.props.fetchConvergentConfigurables(this.props.entry.propositionId, this.props.convergentBundleNos);\n        }\n    }\n\n    componentWillReceiveProps(nextProps) {\n        if (nextProps.convergentConfigurables.configurables !== this.props.convergentConfigurables.configurables) {\n            this.setState({\n                servicesAndDevices: this.getServicesAndDevices(nextProps.convergentConfigurables.configurables)\n            });\n        }\n    }\n\n    openRemovePopup = () => {\n        const {entry} = this.props;\n        ModalService.open('remove-from-cart-modal-' + entry.bundleNo, {\n            bundleNo: entry.bundleNo,\n            offerIndex: entry.bundleNo\n        });\n    };\n\n    registerRemovePopup(entry) {\n        ModalService.add((data) => (\n            <MultiCartRemovePopup\n                id={'remove-from-cart-modal-' + entry.bundleNo}\n                bundleNo={entry.bundleNo}\n                deleteEntryPopupTitle={this.props.sectionConf.deleteEntryPopupTitle}\n                deleteEntryPopupContent={this.props.sectionConf.deleteEntryPopupContent}\n                declineDeleteEntryPopupButtonLabel={this.props.sectionConf.declineDeleteEntryPopupButtonLabel}\n                confirmDeleteEntryPopupButtonLabel={this.props.sectionConf.confirmDeleteEntryPopupButtonLabel}\n                onClickRemove={this.removeFromCart}\n                textRepresentation={this.props.sectionConf.sectionTitle}\n            />\n        ));\n    }\n\n    removeFromCart = () => {\n        this.props.removeMagnumFromMultiCart(this.props.convergentBundleNos);\n    };\n\n    removeProductFromCartBundle(productCode, bundleNo){\n        let propositionId = this.props.entry.entries.find(entry => entry.bundleNo === bundleNo).propositionId;\n        this.adapter.removeButtonClicked(productCode, propositionId);\n    }\n\n    removeTerminalFromCartBundle = (productCode, bundleNo) => {\n        this.props.removeTerminalFromConvergentCartBundle(bundleNo, productCode);\n    };\n\n    updateTerminal = ({section, vas}) => {\n        this.props.updateMagnumTerminal(vas.bundleNo);\n    }\n\n    lowerInstallmentsClicked(bundleNo){\n        this.props.lowerInstallmentsModalOpen(bundleNo);\n    }\n\n    showVasModal = ({section, selectedSection}) => {\n        this.setState({\n            vasModalIsOpen: true,\n            vasSection: section,\n            selectedSection,\n        });\n    };\n\n    hideVasModal = () => {\n        this.setState({vasModalIsOpen: false});\n    };\n\n    showTvPackageModal = ({section}) => {\n        this.setState({\n            tvPackageModalIsOpen: true,\n            tvPackageSection: section\n        });\n    };\n\n    hideTvPackageModal = () => {\n        this.setState({tvPackageModalIsOpen: false});\n    };\n\n    showFixBonusModal = ({section}) => {\n        this.setState({\n            fixBonusModalIsOpen: true,\n            fixBonusModalSection: section\n        });\n    };\n\n    hideFixBonusModal = () => {\n        this.setState({fixBonusModalIsOpen: false});\n    };\n\n    getMigratedProducts(){\n        const entries = this.props.entry.entries || [];\n        let migratedProducts = [];\n        entries.forEach( entry => {\n            const products = entry.migratedProducts || [];\n            migratedProducts.push.apply(migratedProducts, products);\n        });\n        return migratedProducts;\n    }\n\n    getServicesAndDevices(configurables) {\n        const servicesAndDevices = {};\n        const migratedProducts = this.getMigratedProducts();\n        _.forEach(configurables, (entry) => {\n            const {devices, services, propositionId} = entry;\n            servicesAndDevices[propositionId] = [];\n            if (services && services.length > 0) {\n                servicesAndDevices[propositionId].push(...services);\n            }\n            if (devices && devices.length > 0) {\n                servicesAndDevices[propositionId].push(...getDevicesWithAdjustedDeviceType(devices));\n            }\n            servicesAndDevices[propositionId].forEach( product =>\n                product.migrated = this.isMigrated(product, migratedProducts)\n            );\n        });\n\n        return servicesAndDevices;\n    }\n\n    isMigrated(product, migratedProducts){\n\n        if (migratedProducts && product) {\n            return (\n                migratedProducts\n                    .filter(element => element.base === product.base && element.productCode === product.id)\n                    .length > 0\n            );\n        }\n        return false;\n    }\n\n    updateCartProducts = (products) => {\n        const entriesProducts = [];\n        const {entry} = this.props;\n        _.forEach(products, (productsList, propositionId) => {\n            const propositionEntry = _.find(entry.entries, proposition => proposition.propositionId === propositionId);\n            entriesProducts.push({\n                bundleNo: propositionEntry ? propositionEntry.bundleNo : null,\n                products: productsList\n            });\n        });\n        this.props.updateCartProducts(entriesProducts);\n    };\n\n    areSecondaryChoiceBonusesAvailable() {\n        return getSecondaryChoiceDiscountsWithRelatedBonuses(this.props.convergentConfigurables.configurables, this.props.bonusEntry).length > 0;\n    }\n\n    getSecondaryChoiceDiscountsWithRelatedBonuses() {\n        return getSecondaryChoiceDiscountsWithRelatedBonuses(this.props.convergentConfigurables.configurables, this.props.bonusEntry);\n    }\n\n    isSecondaryConfigurable(conf) {\n        if (conf) {\n            if (conf.factoryName === CartEntryType.FIX) {\n                let secondaryServices = conf.services.filter(vas => vas.addonType === AddonType.SECONDARY_CHOICE_DISCOUNT);\n                return secondaryServices.length > 0;\n            } else {\n                let secondaryServices = conf.services.filter(vas => vas.productType === AddonType.SECONDARY_CHOICE_DISCOUNT);\n                return secondaryServices.length > 0;\n            }\n        } else {\n            return false;\n        }\n    }\n\n    getProductListForSecondaryChoiceDiscount() {\n        const productSections = this.props.sectionConf ? this.props.sectionConf.productSections : [];\n        let productLists = productSections\n            .filter(section => section.entryType === ProductEntryType.SECONDARY_CHOICE)\n            .map(section => section.productList);\n        return _.flatMap(productLists);\n    }\n\n    filterMigratedDevices() {\n        let fixMigrationEntry = this.props.entry.entries.filter(entry => entry.entryType === \"FIX\").find(entry => entry.migratedProducts);\n        return fixMigrationEntry && fixMigrationEntry.migratedProducts && fixMigrationEntry.migratedProducts.filter(p => !!p.deviceType) || [];\n    }\n\n    getPresentables() {\n        let presentables = [];\n        Object.keys(this.state.servicesAndDevices).forEach(propositionId => {\n            presentables.push(...this.state.servicesAndDevices[propositionId]);\n        });\n        return presentables;\n    }\n\n    render() {\n        const idx = this.props.idx;\n        const triggerClass = 'ost-' + this.props.entry.bundleNo;\n        let migratedDevices = this.filterMigratedDevices();\n        let presentables = this.getPresentables();\n        let customRules = createCustomRules(presentables, migratedDevices);\n        let fixBonusModalDescriptions= this.state.fixBonusModalSection ? this.state.fixBonusModalSection.descriptions : '';\n        return (\n            <div>\n                <MultiCartExpandingSectionComponent\n                    title={this.props.sectionConf.sectionTitle}\n                    key={idx}\n                    entry={this.props.entry}\n                    conf={this.props.sectionConf}\n                    trigger={triggerClass}\n                    onRemoveClicked={this.openRemovePopup}\n                >\n                    <ConvergentMultiCartExpandedItemComponent\n                        entry={this.props.entry}\n                        sectionConf={this.props.sectionConf}\n                        key={\"expanded-\" + idx}\n                        descriptions={this.props.descriptions}\n                        onDeviceChange={this.updateTerminal}\n                        onRemoveProduct={this.removeProductFromCartBundle.bind(this)}\n                        onRemoveTerminal={this.removeTerminalFromCartBundle}\n                        lowerInstallmentsClicked={!!this.props.lowerInstallmentsActive ? this.lowerInstallmentsClicked.bind(this) : undefined}\n                        onClickAddVas={this.showVasModal}\n                        onClickAddTvPackage={this.showTvPackageModal}\n                        onClickAddFixBonus={this.showFixBonusModal}\n                        isSatTechnology={this.props.isSatTechnologyEntry}\n                        isDslTechnology={this.props.isDslTechnologyEntry}\n                        openRemovePopup={this.openRemovePopup}\n                        configurables={this.props.convergentConfigurables && this.props.convergentConfigurables.configurables}\n                        showNetPrices={this.props.showNetPrices}\n                        areSecondaryChoiceBonusesAvailable={this.areSecondaryChoiceBonusesAvailable()}\n                    />\n                    <ConvergentMultiCartCollapsedItemComponent\n                        entry={this.props.entry}\n                        sectionConf={this.props.sectionConf}\n                        key={\"collapsed-\" + idx}\n                        trigger={triggerClass}\n                    />\n                </MultiCartExpandingSectionComponent>\n                {this.props.convergentConfigurables.configurables && (\n                    <ConvergentAnalyzerAdapter\n                        configurables={this.props.convergentConfigurables.configurables}\n                        entry={this.props.entry}\n                        updateCartProducts={this.updateCartProducts}\n                        customRules={customRules}\n                        ref={(adapter) => {this.adapter = adapter}}\n                    >\n                        <ConvergentVasModal\n                            open={this.state.vasModalIsOpen}\n                            label={this.state.vasSection && this.state.vasSection.buyMoreLabel}\n                            services={this.state.servicesAndDevices}\n                            productList={this.state.vasSection && (this.state.vasSection.productList)}\n                            onClose={this.hideVasModal}\n                            icon={this.state.vasSection && this.state.vasSection.icon}\n                            header={this.state.vasSection && this.state.vasSection.buyMoreLabel}\n                            saveVasesButtonText={this.props.descriptions.saveVasesButton}\n                            selectedSection={this.state.selectedSection}\n                            descriptions={this.state.vasSection && this.state.vasSection.descriptions}\n                            showNetPrices={this.props.showNetPrices}\n                            configurables={this.props.convergentConfigurables.configurables}\n                            migratedProducts={migratedDevices}\n                        />\n                    </ConvergentAnalyzerAdapter>\n                )}\n                {this.props.convergentConfigurables.configurables\n                  && <ConvergentTvPackageModal\n                        header = {this.state.tvPackageSection && this.state.tvPackageSection.buyMoreLabel}\n                        descriptions = {this.state.tvPackageSection && this.state.tvPackageSection.descriptions}\n                        convergentConfigurables={this.props.convergentConfigurables}\n                        entry={this.props.entry}\n                        inner={this.state.tvPackageSection && this.state.tvPackageSection.productList}\n                        modalVisible={this.state.tvPackageModalIsOpen}\n                        closeModalClicked={this.hideTvPackageModal}\n                        updateCartProducts={this.updateCartProducts}\n                        showNetPrices={this.props.showNetPrices}\n                        customFilters={this.props.customFilters}\n                    />\n                }\n                {this.props.convergentConfigurables.configurables && this.getSecondaryChoiceDiscountsWithRelatedBonuses().map(bonus =>\n                    <ConvergentFixBonusModal\n                        convergentConfigurables={this.props.convergentConfigurables}\n                        updateCartProducts={this.updateCartProducts}\n                        entry={this.props.entry}\n                        uid={`FBM_${this.props.uid}`}\n                        label={this.props.header}\n                        fixBonusModalVisible={this.state.fixBonusModalIsOpen}\n                        bonus={bonus}\n                        services={bonus.relatedProducts}\n                        onClose={this.hideFixBonusModal}\n                        productList={this.getProductListForSecondaryChoiceDiscount()}\n                        descriptions={fixBonusModalDescriptions}\n                        showNetPrices={this.props.showNetPrices}\n                        isSecondaryConfigurable={this.isSecondaryConfigurable}\n                        migratedProducts={migratedDevices}\n                        customRules={customRules}\n                    />)\n                }\n            </div>\n        )\n    }\n\n}\n\nconst mapStateToProps = state => ({\n    convergentBundleNos: getConvergentBundleNos(state),\n    convergentConfigurables: state.cart.convergentConfigurables,\n    isSatTechnologyEntry: isSatTechnologyEntry(state),\n    isDslTechnologyEntry: isDslTechnologyEntry(state),\n    marketSegment: getMarketContext(state),\n    bonusEntry: getBonusEntry(state),\n    customFilters: getCustomFilters(state)\n});\n\nconst mapDispatchToProps = dispatch => ({\n    ...bindActionCreators({\n        removeMagnumFromMultiCart,\n        removeTerminalFromConvergentCartBundle,\n        fetchConvergentConfigurables,\n        updateCartProducts: updateConvergentCartProducts,\n        lowerInstallmentsModalOpen: lowerInstallmentsModalOpen,\n        updateMagnumTerminal: updateMagnumTerminal\n    }, dispatch)\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ConvergentComponent);"],
    "file": "ConvergentComponent.js"
}