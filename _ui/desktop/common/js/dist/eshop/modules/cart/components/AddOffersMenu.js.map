{
    "version": 3,
    "sources": ["../../../../../../es6/eshop/modules/cart/components/AddOffersMenu.jsx"],
    "names": ["AddOffersMenuAdapter", "props", "marketContext", "menuHeader", "addItemIcon", "menuItems", "entries", "propTypes", "PropTypes", "string", "isRequired", "array", "arrayOf", "object", "AddOffersMenu", "length", "menuItem", "type", "restrictionResults", "availabilityRestrictions", "map", "restriction", "itemType", "menuItemType", "indexOf", "slice", "matchingEntries", "filter", "entry", "bundleType", "cartBundleNumberLimit", "some", "result", "presentableItems", "_checkAvailabilityRestriction", "createHeader", "_renderMenuItem", "console", "log", "label", "Component", "MenuHeader", "LFullRow", "className", "children", "LPageRow", "mapStateToProps", "state"],
    "mappings": "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",
    "sourcesContent": ["import React, {Component} from \"react\";\nimport {PropTypes} from \"prop-types\";\nimport {connect} from \"react-redux\";\nimport {getCartEntries} from \"../selectors\";\nimport {getMarketContext} from \"eshop/modules/configurator/selectors/filters\"\n\nimport MenuItem from \"eshop/modules/cart/components/MenuItem\";\nimport SimfreeMenuItem from \"eshop/modules/cart/components/entriesList/simfree/SimfreeMenuItem\";\n\nconst AddOffersMenuAdapter = (props) => {\n    return (<AddOffersMenu marketContext={props.marketContext} menuHeader={props.menuHeader} addItemIcon={props.addItemIcon} menuItems={props.menuItems}\n                           entries={props.entries}/>);\n}\n\nAddOffersMenuAdapter.propTypes = {\n    menuHeader: PropTypes.string.isRequired,\n    addItemIcon: PropTypes.string.isRequired,\n    menuItems: PropTypes.array.isRequired,\n    entries: PropTypes.arrayOf(PropTypes.object)\n}\n\nclass AddOffersMenu extends Component {\n    constructor(props) {\n        super(props);\n    }\n\n    createHeader() {\n        if (this.props.entries != null && this.props.entries.length > 0) {\n            return <MenuHeader menuHeader={this.props.menuHeader}/>\n        } else {\n            return null;\n        }\n    }\n\n    _checkAvailabilityRestriction(menuItem,entries){\n\n        if (!!menuItem.type && menuItem.type == 'B2B' && this.props.marketContext != \"B2B\" ){\n            return false;\n        }\n\n        let restrictionResults = menuItem.availabilityRestrictions.map(restriction => {\n            let itemType = restriction.menuItemType;\n            //Enum definitions in items.xml cannot start with a number, so fix types are prefixed with '_'\n            if(itemType.indexOf(\"_\")===0){\n                itemType=itemType.slice(1);\n            }\n            let matchingEntries = entries.filter(entry => itemType === entry.bundleType).length;\n            return matchingEntries > restriction.cartBundleNumberLimit;\n        });\n\n        //Positive results means that restriction has been triggered\n        return !restrictionResults.some(result => result);\n    }\n\n    render() {\n        let presentableItems = this.props.entries && this.props.entries.length > 0? this.props.menuItems\n            .filter(menuItem => \n                this._checkAvailabilityRestriction(menuItem,this.props.entries)) : this.props.menuItems;\n        return (\n            (presentableItems\n                && presentableItems.length > 0)\n                ? <div id=\"menu\" className=\"g-gray1-bg u-padding-l\">\n                    <LFullRow className=\"u-padding-top-l\">\n                        <LPageRow>\n                            {this.createHeader()}\n                            {presentableItems\n                                .map(menuItem => this._renderMenuItem(menuItem)\n                            )}\n                        </LPageRow>\n                    </LFullRow>\n                </div>\n                : null);\n    }\n\n    _renderMenuItem(menuItem){\n        console.log(menuItem.type)\n        let type = menuItem.type;\n        if(this.props.marketContext == \"B2B\") {\n            if(type === \"B2B\") {\n                return <SimfreeMenuItem key={menuItem.label} addItemIcon={this.props.addItemIcon} {...menuItem}\n                                        entries={menuItem.entries}/>;\n            } else return null\n\n        } else {\n            if(type == \"VK_SIMFREE\"){\n                return <SimfreeMenuItem key={menuItem.label} addItemIcon={this.props.addItemIcon} {...menuItem}\n                                        entries={menuItem.entries}/>;\n            } else if(type !== \"B2B\") {\n                return <MenuItem key={menuItem.label} addItemIcon={this.props.addItemIcon} {...menuItem}\n                                 entries={menuItem.entries}/>;\n            }\n        }\n    }\n}\n\nAddOffersMenu.propTypes = {\n    menuHeader: PropTypes.string.isRequired,\n    addItemIcon: PropTypes.string.isRequired,\n    menuItems: PropTypes.arrayOf(PropTypes.object).isRequired,\n    entries: PropTypes.arrayOf(PropTypes.object)\n}\n\nconst MenuHeader = (props) => {\n    return (<h3 className=\"h2 u-no-spacing\">{props.menuHeader}</h3>)\n}\n\nMenuHeader.propTypes = {\n    menuHeader: PropTypes.string.isRequired\n}\n\n\nconst LFullRow = (props) => {\n    return <div className={\"l-full-row \" + (props.className ? props.className : \"\")}>{props.children}</div>\n}\n\nconst LPageRow = (props) => {\n    return <div className={\"l-page-row u-small-padding-left u-small-padding-right \" + (props.className ? props.className : \"\")}>{props.children}</div>\n}\n\nconst mapStateToProps = state => ({\n    entries: getCartEntries(state),\n    marketContext: getMarketContext(state)\n});\n\nexport default connect(mapStateToProps, null)(AddOffersMenuAdapter);\n"],
    "file": "AddOffersMenu.js"
}