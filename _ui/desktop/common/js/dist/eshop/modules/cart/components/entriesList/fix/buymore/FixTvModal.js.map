{
    "version": 3,
    "sources": ["../../../../../../../../../es6/eshop/modules/cart/components/entriesList/fix/buymore/FixTvModal.jsx"],
    "names": ["FixTVModal", "props", "state", "open", "popup", "callback", "event", "nextProps", "setState", "wasRendered", "nextState", "customFilters", "loyaltyDuration", "shouldDisplayLoyaltyDurationChoice", "selectLoyaltyDurationChoiceFilter", "TvPackagesChoiceFilter", "TV_LOYALTY_DURATION_24", "onClose", "onSave", "productCode", "propositionId", "onClick", "_cancelInterceptedClick", "preventDefault", "selectTvPackagesChoiceFilter", "TV_DEFAULT_CHOICE_PRODUCT", "TV_SECONDARY_CHOICE_PRODUCT", "filtersVisible", "isWwwChannel", "secondaryChoice", "showBaseOffer", "bind", "showSecondaryChoiceOffer", "filterDescriptions", "vasesWithStatuses", "services", "map", "vas", "selected", "presentation", "entries", "Object", "keys", "filter", "find", "id", "forEach", "hidden", "renderFilters", "channels", "tvPackages", "productList", "migratedServices", "clickable", "_onClickInterceptor", "onClickMigratedCheckBox", "_onSaveWrapper", "saveVasesButtonText", "showNetPrices", "includedInThePackageTitle", "_runInterceptedClick", "subModalTitle", "subModalContents", "Component", "propTypes", "header", "PropTypes", "string", "bundle", "cartBundle", "bool", "defaultProps", "content", "baseOffer", "discountOffer", "loyaltyDuration12", "loyaltyDuration24", "TvModalContents", "innerLists", "section", "index", "type", "productFilter", "products", "productsOrder", "productCodes", "sort", "migratedProducts", "val", "indexOf", "base", "inputType", "descriptions", "sectionTitle", "mapStateToProps", "mapDispatchToProps", "dispatch", "selectedChoice"],
    "mappings": "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",
    "sourcesContent": ["import React, {Component} from \"react\";\nimport {connect} from \"react-redux\";\nimport {PropTypes} from \"prop-types\";\nimport OraModal from \"eshop/modules/core/components/ui/Modal\";\nimport {compareByProductListAndPartnerAndMandatoryAndTitle, Filters} from \"eshop/modules/cart/analyzer/CartInfoUtils\";\nimport {IfCollectionNotEmpty} from \"./Utils\";\nimport {TitledProductGroup} from \"./modalFragments/ModalFragments\";\nimport {Warning} from \"../../shared/MessageBox\";\nimport {CloseAndSaveVasesButtons} from \"eshop/modules/cart/components/entriesList/convergent/vasModal/CloseAndSaveVasesButtons\";\nimport {getTvPackages} from \"eshop/modules/cart/selectors\"\nimport SecondaryChoiceTvPackagesComponent from \"../../../../../fix/components/SecondaryChoiceTvPackagesComponent\";\nimport LoyaltyDurationChoiceTvPackagesComponent from \"../../../../../fix/components/LoyaltyDurationChoiceTvPackagesComponent\";\nimport TvPackagesChoiceFilter from \"../../../../../fix/enum/TvPackagesChoiceFilter\";\nimport {selectLoyaltyDurationChoiceFilter, selectTvPackagesChoiceFilter} from \"../../../../actions/filters\";\nimport {getCustomFilters, isWwwChannel, shouldDisplayLoyaltyDurationChoice} from \"../../../../selectors\";\n\n  class FixTVModal extends Component  {\n    constructor (props) {\n        super(props);\n        this.state = {\n            open: this.props.open,\n            popup: false,\n            callback: null,\n            event: null\n        }\n    }\n\n    componentWillReceiveProps(nextProps){\n        this.setState({\n            open: nextProps.open,\n            popup: false,\n            callback: null,\n            event: null,\n            wasRendered: this.props.open || nextProps.open\n        })\n    }\n\n    componentWillUpdate(nextProps, nextState) {\n        if (nextProps.customFilters && nextProps.customFilters.loyaltyDuration === null && nextProps.shouldDisplayLoyaltyDurationChoice) {\n            this.props.selectLoyaltyDurationChoiceFilter(TvPackagesChoiceFilter.TV_LOYALTY_DURATION_24);\n        }\n    }\n\n    _onSaveWrapper(){\n        this.props.onClose();\n        this.props.onSave();\n    }\n\n    _onClickInterceptor(productCode,propositionId){\n        return (event) => {\n            this.setState({\n                popup: true,\n                callback: this.props.onClick(productCode,propositionId),\n                event: event\n            });\n        }\n    }\n\n    _runInterceptedClick(){\n        this.state.callback(this.state.event);\n        this._cancelInterceptedClick();\n    }\n\n    _cancelInterceptedClick(){\n        this.setState({\n            popup: false,\n            callback: null,\n            event: null\n        });\n    }\n\n    showBaseOffer(event) {\n        event.preventDefault();\n        if (this.props.shouldDisplayLoyaltyDurationChoice) {\n            this.props.selectLoyaltyDurationChoiceFilter(TvPackagesChoiceFilter.TV_LOYALTY_DURATION_24);\n        }\n        this.props.selectTvPackagesChoiceFilter(TvPackagesChoiceFilter.TV_DEFAULT_CHOICE_PRODUCT);\n    }\n\n    showSecondaryChoiceOffer(event) {\n        event.preventDefault();\n        if (this.props.shouldDisplayLoyaltyDurationChoice) {\n            this.props.selectLoyaltyDurationChoiceFilter(TvPackagesChoiceFilter.TV_LOYALTY_DURATION_24);\n        }\n        this.props.selectTvPackagesChoiceFilter(TvPackagesChoiceFilter.TV_SECONDARY_CHOICE_PRODUCT);\n    }\n\n    renderFilters() {\n        return (this.props.filtersVisible &&\n            <div>\n                {!this.props.isWwwChannel &&\n                <SecondaryChoiceTvPackagesComponent\n                    selectedSecondaryChoice={this.props.customFilters.secondaryChoice}\n                    showBaseOffer={this.showBaseOffer.bind(this)}\n                    showSecondaryChoiceOffer={this.showSecondaryChoiceOffer.bind(this)}\n                    descriptions={this.props.filterDescriptions.secondaryChoice}\n                />}\n                {this.props.shouldDisplayLoyaltyDurationChoice && (<LoyaltyDurationChoiceTvPackagesComponent\n                    selectedLoyaltyDuration={this.props.customFilters.loyaltyDuration}\n                    selectLoyaltyDurationChoiceFilter={this.props.selectLoyaltyDurationChoiceFilter}\n                    descriptions={this.props.filterDescriptions.loyaltyDuration}\n                />)}\n            </div>\n        );\n    }\n\n    render(){\n\n        //Render modal on demand, not always when it's on the page.\n        if (!this.state.open && !this.state.wasRendered) {\n            return (<OraModal open={this.state.open}\n                              onClose={this.props.onClose} size=\"medium\"\n                              showClose={!this.state.popup}/>)\n        }\n\n        let vasesWithStatuses = this.props.services.map(vas => {\n            vas.selected = false;\n            //TODO: make an enum for presentation types\n            vas.presentation = \"visible\";\n            return vas;\n        });\n\n        this.props.entries && Object.keys(this.props.entries)\n                .filter(productCode => this.props.entries[productCode])\n        .map(productCode => vasesWithStatuses.find(vas => vas.id === productCode))\n        .filter(vas => vas)\n        .forEach(vas => vas.selected = true);\n\n        if(this.props.hidden) {\n            this.props.hidden\n                .map(productCode => vasesWithStatuses.find(vas => vas.id === productCode))\n                .filter(vas => vas)\n                .forEach(vas => vas.presentation = \"hidden\");\n        }\n        return(\n        <OraModal open={this.state.open} onClose={this.props.onClose} size=\"medium\" showClose={!this.state.popup}>\n            {this.renderFilters()}\n            <TvModalContents\n                channels={this.props.channels}\n                tvPackages={this.props.tvPackages}\n                productList={this.props.productList}\n                vasesWithStatuses={vasesWithStatuses}\n                migratedServices={this.props.migratedServices}\n                onClickWrapped={this.props.clickable ? this._onClickInterceptor.bind(this) : () => {}}\n                onClick={this.props.clickable ? this.props.onClick : () => {}}\n                onClickMigratedCheckBox={this.props.onClickMigratedCheckBox}\n                onSave={this._onSaveWrapper.bind(this)}\n                saveVasesButtonText={this.props.saveVasesButtonText}\n                showNetPrices={this.props.showNetPrices}\n                includedInThePackageTitle={this.props.includedInThePackageTitle}\n                onClose={this.props.onClose}\n            />\n            {this.state.popup && (<Warning\n                onAccept={this._runInterceptedClick.bind(this)}\n                onCancel={this._cancelInterceptedClick.bind(this)}\n                modalTitle={this.props.subModalTitle}\n                modalContents={this.props.subModalContents}\n                onAcceptLabel={\"Zmień pakiet TV\"}\n                showCancel={false}\n            />)}\n        </OraModal>)\n    }\n}\n\nFixTVModal.propTypes = {\n    header: PropTypes.string,\n    bundle: PropTypes.string,\n    cartBundle: PropTypes.string,\n    propositionId: PropTypes.string,\n    open: PropTypes.bool,\n    clickable: PropTypes.bool,\n    saveVasesButtonText: PropTypes.string,\n    includedInThePackageTitle: PropTypes.string,\n    filtersVisible: PropTypes.bool\n};\n\nFixTVModal.defaultProps = {\n    clickable: true,\n    saveVasesButtonText: \"Wybierz\",\n    includedInThePackageTitle: \"W cenie pakietu\",\n    filtersVisible: false,\n    filterDescriptions: {\n        secondaryChoice: {\n            content: \"Jeśli klient nie jest zainteresowany ofertą standardową zaproponuj mu <strong>ofertę negocjowaną</strong>\",\n            baseOffer: \"Oferta standardowa\",\n            discountOffer: \"Oferta negocjowana\"\n        },\n        loyaltyDuration: {\n            content: \"<strong>Pakiety Canal+</strong><br> Dostępne także z opcją na 12 miesięcy\",\n            loyaltyDuration12: \"Umowa na 12 miesięcy\",\n            loyaltyDuration24: \"Umowa na 24 miesiące\"\n        }\n    }\n};\n\nconst TvModalContents = (props) => {\n    return (\n        <div>\n            <h1 className=\"u-acc-hide\">Dobierz pakiety TV</h1>\n            <div className=\"opl-multicheckout-services\">\n                <ul>\n                    {props.productList\n                    && props.productList.innerLists\n                    && props.productList.innerLists.map((section,index) => {\n                        let type = section.productFilter;\n                        let products = Filters()[type](props.vasesWithStatuses);\n                        let productsOrder = section.productCodes ? section.productCodes : [];\n                        products.sort(compareByProductListAndPartnerAndMandatoryAndTitle(productsOrder));\n                        let migratedProducts = [];\n                        if (props.migratedServices != null) {\n                            migratedProducts = products.filter(function (val) {\n                                return props.migratedServices.products.indexOf(val.base) > -1;\n                            });\n                            products = products.filter(function (val) {\n                                return props.migratedServices.products.indexOf(val.base) === -1;\n                            });\n                        }\n                        let onClick = props.onClick; //NOR-161730\n                        return (<IfCollectionNotEmpty array={products} key={\"ICNE_\" + index}>\n                            <TitledProductGroup\n                                channels={props.channels}\n                                tvPackages={props.tvPackages}\n                                key={\"TPG_\" + index}\n                                inputType={section.inputType}\n                                migratedServices={props.migratedServices}\n                                idx={type}\n                                products={products}\n                                migratedProducts={migratedProducts}\n                                label={section.descriptions.sectionTitle || section.sectionTitle}\n                                onClick={onClick}\n                                onClickMigratedCheckBox={props.onClickMigratedCheckBox}\n                                net={props.showNetPrices}\n                                includedInThePackageTitle={props.includedInThePackageTitle}\n                            />\n                        </IfCollectionNotEmpty>);\n                        })\n                    }\n\n                    <div className=\"l-row\">\n                        <CloseAndSaveVasesButtons onClose={props.onClose} saveVasesClicked={props.onSave} saveVasesButtonText={props.saveVasesButtonText}/>\n                    </div>\n                </ul>\n            </div>\n        </div>\n    );\n};\n\nconst mapStateToProps = (state) => ({\n    tvPackages: getTvPackages(state),\n    customFilters: getCustomFilters(state),\n    isWwwChannel: isWwwChannel(state),\n    shouldDisplayLoyaltyDurationChoice: shouldDisplayLoyaltyDurationChoice(state)\n});\n\nconst mapDispatchToProps = dispatch => ({\n    selectTvPackagesChoiceFilter: (selectedChoice) => dispatch(selectTvPackagesChoiceFilter(selectedChoice)),\n    selectLoyaltyDurationChoiceFilter: (selectedChoice) => dispatch(selectLoyaltyDurationChoiceFilter(selectedChoice)),\n});\nexport default connect(mapStateToProps, mapDispatchToProps)(FixTVModal);"],
    "file": "FixTvModal.js"
}