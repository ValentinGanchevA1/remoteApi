{
    "version": 3,
    "sources": ["../../../../../../../../../es6/eshop/modules/cart/components/entriesList/fix/buymore/FixSecondaryChoiceBonusModal.jsx"],
    "names": ["FixSecondaryChoiceBonusModal", "props", "state", "open", "popup", "callback", "event", "modalContent", "nextProps", "setState", "onClose", "onSave", "productCode", "propositionId", "onClick", "_cancelInterceptedClick", "vasesWithStatuses", "services", "map", "vas", "selected", "mandatory", "presentation", "bonusWithStatus", "bonus", "Object", "keys", "entries", "filter", "find", "id", "forEach", "mandatories", "hidden", "presentableProducts", "p", "deviceType", "descriptions", "migratedProducts", "presentableBonus", "bonusModalTitle", "bonusRelatedProductSectionTitle", "showNetPrices", "configurables", "bonusSectionTitle", "_onSaveWrapper", "bind", "Component", "propTypes", "uid", "PropTypes", "string", "header", "bundle", "cartBundle", "bool", "object", "array"],
    "mappings": "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",
    "sourcesContent": ["import React, {Component} from \"react\";\nimport {PropTypes} from \"prop-types\";\nimport OraModal from \"eshop/modules/core/components/ui/Modal\";\nimport {ProductGroup, SaveVasesButton} from \"./modalFragments/ModalFragments\"\nimport {prepareDevices} from \"../../../../analyzer/DeviceUtils\";\n\nexport default class FixSecondaryChoiceBonusModal extends Component  {\n    constructor (props) {\n        super(props);\n        this.state = {\n            open: this.props.open,\n            popup: false,\n            callback: null,\n            event: null,\n            modalContent: null\n        }\n    }\n\n    componentWillReceiveProps(nextProps){\n        this.setState({\n            open: nextProps.open\n        })\n    }\n\n    _onSaveWrapper(){\n        this.props.onClose();\n        this.props.onSave();\n    }\n\n    _onClickInterceptor(productCode, propositionId, modalContent) {\n        return (event) => {\n            this.setState({\n                popup: true,\n                callback: this.props.onClick(productCode, propositionId),\n                event: event,\n                modalContent: modalContent\n            });\n        }\n    }\n\n    _runInterceptedClick() {\n        this.state.callback(this.state.event);\n        this._cancelInterceptedClick();\n    }\n\n    _cancelInterceptedClick() {\n        this.setState({\n            popup: false,\n            callback: null,\n            event: null,\n            modalContent: null\n        });\n    }\n\n    render(){\n        let vasesWithStatuses = this.props.services.map(vas => {\n            vas.selected = false;\n            vas.mandatory = false;\n            vas.presentation = \"visible\";\n            return vas;\n        });\n\n        let bonusWithStatus = [this.props.bonus].map(bonus => {\n            bonus.selected = false;\n            bonus.mandatory = false;\n            bonus.presentation = \"visible\";\n            return bonus;\n        });\n\n        Object.keys(this.props.entries)\n            .filter(productCode => this.props.entries[productCode])\n            .map(productCode => vasesWithStatuses.find(vas => vas.id === productCode))\n            .filter(vas => vas)\n            .forEach(vas => vas.selected = true);\n\n        Object.keys(this.props.entries)\n            .filter(productCode => this.props.entries[productCode])\n            .map(productCode => bonusWithStatus.find(bonus => bonus.id === productCode))\n            .filter(bonus => bonus)\n            .forEach(bonus => bonus.selected = true);\n\n        this.props.mandatories\n            .filter(productCode => this.props.entries[productCode])\n            .map(productCode => vasesWithStatuses.find(vas => vas.id === productCode))\n            .filter(vas => vas)\n            .forEach(vas => vas.mandatory = true);\n        if(this.props.hidden) {\n            this.props.hidden\n                .map(productCode => vasesWithStatuses.find(vas => vas.id === productCode))\n                .filter(vas => vas)\n                .forEach(vas => vas.presentation = \"hidden\");\n        }\n\n        const presentableProducts = [\n            ...vasesWithStatuses.filter(p => !p.deviceType && !p.mandatory),\n            ...prepareDevices(vasesWithStatuses.filter(p => !!p.deviceType), this.props.descriptions, this.props.migratedProducts)];\n\n        const presentableBonus = bonusWithStatus;\n        return(\n            <OraModal open={this.props.open} onClose={this.props.onClose} size=\"medium\">\n                <div className=\"l-row u-spacing-top-s u-spacing-left-l u-spacing-l u-small-spacing\">\n                    <p className=\"h3\">{this.props.descriptions.bonusModalTitle}</p>\n                    <p className=\"h4 u-spacing-top-xl u-small-spacing\">{this.props.descriptions.bonusRelatedProductSectionTitle}</p>\n                </div>\n                <div>\n                    <ProductGroup\n                        key={'bonusRelatedProducts'}\n                        inputType={\"CHECKBOX\"}\n                        products={presentableProducts}\n                        onClick={this.props.onClick}\n                        net={this.props.showNetPrices}\n                        configurables={this.props.configurables}\n                    />\n                </div>\n                <div className=\"l-row u-spacing-top-xl u-spacing-left-l u-spacing-l u-small-spacing\">\n                    <p className=\"h4\">{this.props.descriptions.bonusSectionTitle}</p>\n                </div>\n                <div>\n                    <ProductGroup\n                        key={'bonus'}\n                        inputType={\"CHECKBOX\"}\n                        products={presentableBonus}\n                        onClick={this.props.onClick}\n                        net={this.props.showNetPrices}\n                    />\n                </div>\n                <div className=\"l-row\">\n                    <div className=\"l-col l-col-small-12 l-col-medium-8 l-col-8\"/>\n                </div>\n                <SaveVasesButton saveVasesClicked={this._onSaveWrapper.bind(this)}/>\n            </OraModal>)\n    }\n}\n\nFixSecondaryChoiceBonusModal.propTypes = {\n    uid: PropTypes.string,\n    header: PropTypes.string,\n    bundle: PropTypes.string,\n    cartBundle: PropTypes.string,\n    propositionId: PropTypes.string,\n    open: PropTypes.bool,\n    descriptions: PropTypes.object,\n    services: PropTypes.array,\n    entries: PropTypes.object,\n    mandatories: PropTypes.array,\n    hidden: PropTypes.array\n};"],
    "file": "FixSecondaryChoiceBonusModal.js"
}