{
    "version": 3,
    "sources": ["../../../../../../../../../es6/eshop/modules/cart/components/entriesList/fix/buymore/AnalyzerAdapter.jsx"],
    "names": ["preventDefaultWrapper", "handler", "event", "preventDefault", "AnalyzerAdapter", "props", "state", "createState", "updateCartContents", "bind", "removeProduct", "nextProps", "setState", "prevProps", "forceCartRecalculation", "triggerCartRecalculation", "_", "isEqual", "configurables", "relations", "recalculateCart", "productStatuses", "presentableProducts", "forEach", "product", "cartProducts", "autoadded", "entry", "hidden", "console", "log", "productClicked", "productStatusChanged", "products", "migratedProductStatusesChanged", "productSelected", "productCode", "selectedProducts", "Object", "keys", "filter", "includes", "updateCartProducts", "bundleCode", "offer", "cartBundle", "hasProductBeenSelected", "callback", "extractSelectedProductsFromProductStatuses", "updatedProductsList", "validationResult", "extendedData", "valid", "updatedProductStatuses", "hiddenProducts", "reason", "productCodes", "isOperationValid", "tempAutoadded", "updateProducts", "child", "React", "cloneElement", "children", "entries", "mandatories", "mandatoryProducts", "onClick", "unselectable", "createClickedCallback", "createClickedNonRemovableCallback", "onClickWithoutPreventDefault", "createClickedCallbackWithoutPreventDefault", "onClickMigratedCheckBox", "migratedProductStatusesChangedHandler", "onSave", "Component", "propTypes", "PropTypes", "array", "isRequired", "object", "bool", "mapDispatchToProps", "dispatch", "bundle", "ConnectedAnalyzerAdapter", "withRef", "FixAnalyzerAdapter", "analyzer", "concat", "previouslySelectedInvisible", "JSON", "parse", "stringify", "customRules", "bundleNo", "getWrappedInstance", "defaultProps"],
    "mappings": "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",
    "sourcesContent": ["import React, {Component} from \"react\";\nimport PropTypes from 'prop-types';\nimport {connect} from \"react-redux\";\nimport {updateFixCartProducts} from \"eshop/modules/cart/actions/cart\";\nimport {getCartProductsFromEntry, getPresentableProductsFromConfigurables} from \"eshop/modules/cart/analyzer/CartInfoUtils\";\nimport {analyzeCombination} from \"eshop/modules/cart/analyzer/Analyzer\";\nimport _ from \"lodash\";\n\nconst preventDefaultWrapper = (handler) => (event) => {\n    event.preventDefault();\n    handler(event);\n};\n\n/**\n * Adapter accepts at most a single child\n */\nclass AnalyzerAdapter extends Component {\n\n    constructor (props) {\n        super(props);\n\n        this.state = this.createState(props);\n        this.updateCartContents.bind(this);\n        this.removeProduct.bind(this);\n    }\n\n    componentWillReceiveProps(nextProps) {\n        this.setState(this.createState(nextProps));\n    }\n\n    componentDidUpdate(prevProps) {\n        let forceCartRecalculation = this.props.triggerCartRecalculation === true && this.props.triggerCartRecalculation !== prevProps.triggerCartRecalculation;\n        if (forceCartRecalculation || !_.isEqual(prevProps.configurables.relations, this.props.configurables.relations)) {\n            this.recalculateCart();\n        }\n    }\n\n    createState(props) {\n        let productStatuses = {};\n        props.presentableProducts.forEach(product => productStatuses[product] = false);\n        props.cartProducts.forEach(product => productStatuses[product] = true);\n\n        const state = {\n            productStatuses: productStatuses,\n            autoadded: props.entry.autoadded ? props.entry.autoadded : [],\n            hidden: props.entry.hidden ? props.entry.hidden : []\n        };\n        console.log(state.productStatuses);\n        return state;\n    }\n\n    createClickedCallback(product) {\n        let productClicked = () => {\n           this.productStatusChanged(product);\n        };\n        return preventDefaultWrapper(productClicked.bind(this));\n    }\n\n    createClickedCallbackWithoutPreventDefault(product) {\n        this.productStatusChanged(product);\n    }\n\n    migratedProductStatusesChangedHandler(products) {\n        let productClicked = () => {\n            this.migratedProductStatusesChanged(products);\n        };\n        return preventDefaultWrapper(productClicked.bind(this));\n    }\n\n    createClickedNonRemovableCallback(product) {\n        let productClicked = () => {\n            this.productSelected(product);\n        };\n        return preventDefaultWrapper(productClicked.bind(this));\n    }\n\n    removeProduct(productCode) {\n        this.productStatusChanged(productCode, this.updateCartContents);\n    }\n\n    recalculateCart() {\n        this.productStatusChanged(null, () => {});\n    }\n\n    updateCartContents() {\n        let selectedProducts = Object.keys(this.state.productStatuses)\n            .filter(productCode => this.state.productStatuses[productCode]) //only those, that are marked as selected\n            .filter(productCode => !this.state.autoadded.includes(productCode)); //skip autoadded\n        this.props.updateCartProducts(this.props.bundleCode, this.props.offer, this.props.cartBundle, selectedProducts);\n    }\n\n    productSelected(productCode) {\n        let hasProductBeenSelected = !!this.state.productStatuses[productCode];\n        if(!hasProductBeenSelected) {\n            this.productStatusChanged(productCode);\n        }\n    }\n\n    productStatusChanged(productCode, callback) {\n        let hasProductBeenSelected = !!this.state.productStatuses[productCode];\n        let selectedProducts = this.extractSelectedProductsFromProductStatuses(this.state.productStatuses);\n\n        let updatedProductsList, autoadded, validationResult, extendedData;\n        if (!hasProductBeenSelected) {\n            //Product added\n            [updatedProductsList, autoadded, validationResult, extendedData] = analyzeCombination(this.props.configurables, selectedProducts, this.state.autoadded, productCode);\n        } else {\n            //Product removed\n            [updatedProductsList, autoadded, validationResult, extendedData] = analyzeCombination(this.props.configurables, selectedProducts, this.state.autoadded, null, productCode);\n        }\n        if(validationResult.valid) {\n            let updatedProductStatuses = {};\n            this.props.presentableProducts.forEach(product => updatedProductStatuses[product] = false);\n            updatedProductsList.forEach(product => updatedProductStatuses[product] = true);\n\n            this.setState({\n                        productStatuses: updatedProductStatuses,\n                        autoadded: autoadded,\n                        hidden: extendedData.hiddenProducts\n                    },\n                        callback\n                    );\n            console.log(\"Updated product statuses:\");\n            console.log(updatedProductStatuses);\n\n            console.log(\"Updated product statuses:\");\n            console.log(autoadded);\n        } else {\n            console.log(validationResult.reason);\n        }\n    }\n\n    migratedProductStatusesChanged(productCodes) {\n        let hasProductBeenSelected = !!this.state.productStatuses[productCodes[0]];\n        let selectedProducts = this.extractSelectedProductsFromProductStatuses(this.state.productStatuses);\n        let updatedProductsList, validationResult, extendedData;\n        let autoadded = this.state.autoadded;\n        let updatedProductStatuses = {};\n        let isOperationValid = false;\n        if (!hasProductBeenSelected) {\n            productCodes\n                .forEach((productCode) => {\n                    let tempAutoadded;\n                    [updatedProductsList, tempAutoadded, validationResult, extendedData] = analyzeCombination(this.props.configurables, selectedProducts, autoadded, productCode);\n                    if (validationResult.valid) {\n                        isOperationValid = true;\n                        autoadded = tempAutoadded;\n                        selectedProducts = this.updateProducts(updatedProductStatuses, updatedProductsList);\n                    } else {\n                        console.log(\"updated product \"  + productCode +  \" fail\");\n                        console.log(validationResult.reason);\n                    }\n                });\n        } else {\n            productCodes\n                .forEach((productCode) => {\n                    let tempAutoadded;\n                    [updatedProductsList, tempAutoadded, validationResult, extendedData] = analyzeCombination(this.props.configurables, selectedProducts, autoadded, null,  productCode);\n                    if (validationResult.valid) {\n                        autoadded = tempAutoadded;\n                        isOperationValid = true;\n                        selectedProducts = this.updateProducts(updatedProductStatuses, updatedProductsList);\n                    } else {\n                        console.log(\"updated product \"  + productCode +  \" fail\");\n                        console.log(validationResult.reason);\n                    }\n                });\n        }\n        if (isOperationValid) {\n            this.setState({\n                    productStatuses: updatedProductStatuses,\n                    autoadded: autoadded,\n                    hidden: extendedData.hiddenProducts\n                }\n            );\n            console.log(\"Updated product statuses:\");\n            console.log(updatedProductStatuses);\n\n            console.log(\"Updated product statuses:\");\n            console.log(autoadded);\n        }\n    }\n\n    updateProducts(updatedProductStatuses, updatedProductsList) {\n        this.props.presentableProducts.forEach(product => updatedProductStatuses[product] = false);\n        updatedProductsList.forEach(product => updatedProductStatuses[product] = true);\n        return this.extractSelectedProductsFromProductStatuses(updatedProductStatuses);\n    }\n\n    extractSelectedProductsFromProductStatuses(productStatuses) {\n        if(!productStatuses){\n            return [];\n        }\n        return Object.keys(productStatuses).filter(productCode => productStatuses[productCode]);\n    }\n\n    render() {\n        let child = React.cloneElement(this.props.children, {\n            entries: this.state.productStatuses,\n            mandatories: this.props.configurables.mandatoryProducts,\n            onClick: this.props.unselectable ? this.createClickedCallback.bind(this) : this.createClickedNonRemovableCallback.bind(this),\n            onClickWithoutPreventDefault: this.createClickedCallbackWithoutPreventDefault.bind(this),\n            onClickMigratedCheckBox: this.migratedProductStatusesChangedHandler.bind(this),\n            onSave: this.updateCartContents.bind(this),\n            hidden: this.state.hidden\n        });\n        return (<div>{child}</div>);\n    }\n}\n\nAnalyzerAdapter.propTypes = {\n    cartProducts: PropTypes.array.isRequired,\n    configurables: PropTypes.object.isRequired,\n    triggerCartRecalculation: PropTypes.bool\n};\n\nconst mapDispatchToProps = (dispatch) => ({\n    updateCartProducts: (bundle, offer, cartBundle, products) => dispatch(updateFixCartProducts(bundle, offer, cartBundle, products))\n});\n\nconst ConnectedAnalyzerAdapter = connect(null, mapDispatchToProps, null, {withRef: true})(AnalyzerAdapter);\n\nexport class FixAnalyzerAdapter extends Component {\n\n    constructor(props) {\n        super(props);\n    }\n\n    removeProduct(productCode) {\n        console.log(\"Rmv 2: \"+productCode);\n        if(this.analyzer && this.analyzer.removeProduct) {\n            this.analyzer.removeProduct(productCode);\n        }\n    }\n\n    render() {\n        let cartProducts = getCartProductsFromEntry(this.props.entry);\n        cartProducts = cartProducts.concat(this.props.entry.previouslySelectedInvisible);\n        const presentableProducts = getPresentableProductsFromConfigurables(this.props.configurables);\n        let configurables = JSON.parse(JSON.stringify(this.props.configurables));\n        if (this.props.customRules) {\n            configurables.relations = configurables.relations.concat(this.props.customRules);\n        }\n        return (\n            <ConnectedAnalyzerAdapter\n                triggerCartRecalculation = {this.props.triggerCartRecalculation}\n                entry = { this.props.entry }\n                configurables = { configurables }\n                cartProducts = { cartProducts }\n                presentableProducts = { presentableProducts }\n                children = { this.props.children }\n                bundleCode = { this.props.entry.bundleCode }\n                offer = { this.props.entry.productCode }\n                cartBundle = { this.props.entry.bundleNo }\n                unselectable = { this.props.unselectable }\n                ref={(analyzer) => {\n                    if(!!analyzer){\n                        this.analyzer=analyzer.getWrappedInstance();\n                    }\n                }}\n            />\n        )\n    }\n}\n\nFixAnalyzerAdapter.propTypes = {\n    entry: PropTypes.object.isRequired,\n    configurables: PropTypes.object.isRequired,\n    triggerCartRecalculation: PropTypes.bool\n};\n\nFixAnalyzerAdapter.defaultProps = {\n    unselectable: true,\n    triggerCartRecalculation: false\n};"],
    "file": "AnalyzerAdapter.js"
}