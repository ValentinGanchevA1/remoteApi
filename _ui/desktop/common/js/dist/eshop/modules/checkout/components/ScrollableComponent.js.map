{
    "version": 3,
    "sources": ["../../../../../../es6/eshop/modules/checkout/components/ScrollableComponent.jsx"],
    "names": ["window", "validationComponents", "list", "ScrollableComponent", "props", "state", "no", "scrollToValidationComponent", "bind", "counter", "setState", "setInList", "console", "log", "status", "that", "setTimeout", "filter", "v", "length", "errorList", "consentsErrorList", "afterValidation", "areAllElementsValidated", "firstValidationOffset", "getFirstValidationErrorOffset", "$", "animate", "scrollTop", "elementToFocusOn", "sectionReference", "data", "errorReference", "offset", "sectionTop", "top", "errorTop", "left", "each", "ref", "myTop", "myLeft", "hasClass", "parent", "find", "calculateAdditionalScrollOffset", "headerHeight", "outerHeight", "parseInt", "Component"],
    "mappings": "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",
    "sourcesContent": ["import React, {Component} from \"react\";\n\nwindow.validationComponents = window.validationComponents || {};\nwindow.validationComponents.list = window.validationComponents.list || [];\n\nexport default class ScrollableComponent extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {no: 0};\n        this.scrollToValidationComponent=this.scrollToValidationComponent.bind(this);\n    }\n\n    componentDidMount() {\n        if (validationComponents.counter) {\n            window.validationComponents.counter++;\n        } else {\n            window.validationComponents.counter = 1;\n        }\n        this.setState({no: window.validationComponents.counter - 1});\n        this.setInList(\"registered\");\n        console.log(\"ScrollableComponent componentDidMount\",window.validationComponents.counter-1);\n    }\n\n    setInList(status) {\n        window.validationComponents.list[this.state.no] = status;\n    }\n\n    componentWillUpdate() {\n        this.setInList(\"ready\");\n    }\n\n    componentDidUpdate() {\n        this.setInList(\"validated\");\n        let that=this;\n        setTimeout(function(){that.scrollToValidationComponent()},450);//wait until consents expander opens\n    }\n\n    componentWillUnmount() {\n        console.log(\"ScrollableComponent UNMOUNT\");\n        window.validationComponents.list[this.state.no]='removed';\n    }\n\n    areAllElementsValidated(){\n        return window.validationComponents.list.filter(v => v==\"validated\" || v==\"removed\").length==window.validationComponents.list.length;\n\n    }\n    scrollToValidationComponent() {\n        console.log(\"ScrollableComponent scrollToValidationComponent\",window.validationComponents,this.props.errorList,this.props.consentsErrorList);\n        if (((this.props.errorList && this.props.errorList.length && this.props.errorList[0].afterValidation)||(this.props.consentsErrorList && this.props.consentsErrorList.length && this.props.consentsErrorList[0].afterValidation)) && this.areAllElementsValidated()) {\n            let firstValidationOffset = this.getFirstValidationErrorOffset();\n            console.log(\"Scroll to :\", firstValidationOffset);\n            if (firstValidationOffset) {\n                $('html, body').animate({scrollTop:firstValidationOffset},'50');\n            }\n        }\n\n    }\n    calculateAdditionalScrollOffset(elementToFocusOn) {\n        let sectionReference = $(\"#\" + $(elementToFocusOn).data('scroll-offset-calculate-to'));\n        let errorReference = $(\"#\" + $(elementToFocusOn).data('scroll-offset-calculate-from'));\n        if ($(sectionReference).offset() && $(errorReference).offset()) {\n            let sectionTop = $(sectionReference).offset().top;\n            let errorTop = $(errorReference).offset().top;\n            return sectionTop - errorTop;\n        }\n        return 0;\n    }\n    getFirstValidationErrorOffset() {\n        var top = 9999999999;\n        var left = 9999999999;\n        var elementToFocusOn;\n        $(\".opl-msg--error-anchor\").each(function () {\n            let ref = this;\n            var myTop = $(ref).offset().top;\n            var myLeft = $(ref).offset().left;\n            if ($(ref).hasClass(\"opl-msg-scrollToParent\")) {\n                var myTop = $(ref).parent().offset().top - 100;\n                var myLeft = $(ref).parent().offset().left;\n            }\n\n            if ($(this).parent().find('input').length) {\n                ref = $(this).parent().find('input');\n\n                myTop = $(ref).offset().top;\n            }\n            if (top > myTop && ref && left > myLeft) {\n                left = myLeft;\n                elementToFocusOn = ref\n            }\n            top = top > myTop ? myTop : top;\n        });\n        if (elementToFocusOn) {\n            console.log(\"ScrollableComponent will focus on:\", elementToFocusOn);\n            top += $(elementToFocusOn).data('scroll-offset');\n            if ($(elementToFocusOn).data('scroll-offset-calculate-from') && $(elementToFocusOn).data('scroll-offset-calculate-to')) {\n                top += this.calculateAdditionalScrollOffset(elementToFocusOn);\n            }\n        }\n\n        let headerHeight = $(\".opl-header__main\").outerHeight() || $(\".opl-navBar\").outerHeight() || 100;\n        top = parseInt(top - parseInt(headerHeight));\n        return top-80; //consider animated header\n\n    }\n}\n"],
    "file": "ScrollableComponent.js"
}