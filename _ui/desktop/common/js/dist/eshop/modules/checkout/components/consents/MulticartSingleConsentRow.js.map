{
    "version": 3,
    "sources": ["../../../../../../../es6/eshop/modules/checkout/components/consents/MulticartSingleConsentRow.jsx"],
    "names": ["MulticartSingleConsentRow", "props", "state", "showModal", "open", "size", "showClose", "escapeClose", "clickClose", "onClose", "setShowModal", "bind", "loadExpander", "expanderPromise", "expander", "path", "options", "parentClass", "contentSelector", "triggerSelector", "scrollToSelected", "modalState", "setState", "accept", "bundleNo", "bundleAssignment", "onChangeCallback", "consentCode", "consent", "stateCode", "states", "find", "positive", "code", "event", "target", "value", "hasBonus", "businessImplicationsDescr", "modalContent", "data", "consentsWithBonusLoading", "onUpdate", "onChange", "main", "className", "onClick", "agreeConsentChange", "type", "map", "s", "d", "bonuses", "length", "getButtonProps", "consentPositiveState", "consentNegativeState", "showTitle", "ref", "hasBusinessImplications", "getModalProps", "getModalContent", "formInputType", "name", "onStateChange", "React", "Component"],
    "mappings": "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",
    "sourcesContent": ["import React from \"react\";\nimport {OraSimpleRadio, OraButton, OraLoader} from \"eshop/components/OraCommonComponents\";\nimport OraModal from \"eshop/modules/core/components/ui/Modal\";\nimport {Expander, Trigger, Section} from \"eshop/modules/core/components/ui/Expander\";\nimport MulticartSingleConsentCheckboxRow from \"./MulticartSingleConsentCheckboxRow\";\nimport MulticartSingleConsentRadioButtonRow from \"./MulticartSingleConsentRadioButtonRow\";\nimport {loadModule} from \"eshop/modules/core/utils/ui\";\n\nexport default class MulticartSingleConsentRow extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = ({showModal: false});\n    }\n\n    getModalProps() {\n        return {\n            open: this.state.showModal,\n            size: \"narrow\",\n            showClose: true,\n            escapeClose: false,\n            clickClose: false,\n            onClose: this.setShowModal.bind(this, false)\n        };\n    }\n\n   componentDidMount() {\n        this.loadExpander();\n    }\n\n    loadExpander() {\n        this.expanderPromise = loadModule(this.expander, {\n          path: \"common/modules/opl-expander\",\n          options: {\n              parentClass:\"js-expander__container__nested\",\n              contentSelector:\".js-expander__content__nested\",\n              triggerSelector:\".js-expander__trigger__nested\",\n              scrollToSelected:false\n          }\n        });\n    }\n\n    setShowModal(modalState) {\n        this.setState({showModal: modalState});\n    }\n\n    agreeConsentChange(accept) {\n        this.setShowModal(false);\n        if(accept) {\n            const bundleNo = !!this.bundleAssignment ? this.bundleAssignment.bundleNo : null;\n            this.bundleAssignment = null;\n            this.onChangeCallback(\n                {consentCode: this.props.consent.consentCode, stateCode: this.props.consent.states.find((state) => !state.positive).code, bundleNo: bundleNo}\n            );\n        }\n\n    }\n\n    onStateChange(bundleAssignment, event) {\n        let state = this.props.consent.states.find(state => state.code === event.target.value);\n        if(this.hasBonus() && state.businessImplicationsDescr) {\n            this.bundleAssignment = bundleAssignment;\n            this.setShowModal(true);\n            this.modalContent = state.businessImplicationsDescr;\n        } else {\n            const bundleNo = !!bundleAssignment ? bundleAssignment.bundleNo : null;\n            this.onChangeCallback({consentCode: this.props.consent.consentCode, stateCode: event.target.value, bundleNo: bundleNo});\n        }\n    }\n\n    onChangeCallback(data) {\n        if(this.props.consentsWithBonusLoading){\n            this.props.onUpdate([data]);\n        }\n        else {\n            this.props.onChange([data]);\n        }\n    }\n\n    getButtonProps(main) {\n        return {\n            className: \"u-w-100\",\n            accept: main,\n            onClick: this.agreeConsentChange.bind(this, !main),\n            type: main ? \"primary\" : \"secondary\"\n        }\n    }\n\n    hasBusinessImplications() {\n        return this.props.consent.states.map(s=>s.businessImplicationsDescr).find(d=>d);\n    }\n\n    hasBonus() {\n        return !!this.props.consent.bonuses && this.props.consent.bonuses.length > 0;\n    }\n\n    getModalContent(){\n        return(\n            <div>\n                <div className=\"l-page-row u-font-bold u-small-no-spacing\">\n                    <div className=\"l-row\">\n                        <div className=\"l-col l-col-12 u-spacing-top-l\">\n                          <h2 className=\"u-no-spacing\">Uwaga!</h2>\n                        </div>\n                    </div>\n                    <div className=\"l-row u-spacing-top-l\">\n                        <div className=\"l-col l-col-12\">\n                            <p className=\"u-font-normal u-font-small\">{this.modalContent}</p>\n                        </div>\n                    </div>\n                    <div className=\"o-separator o-separator--m u-spacing-top-l u-small-visible-hide\"></div>\n                    <div className=\"l-row u-spacing-top-l\">\n                        <div className=\"l-col l-col-small-12 l-col-medium-6 l-col-4 large-offset-by-4\">\n                            <OraButton {...this.getButtonProps(true)}>Wróć do zgód</OraButton>\n                        </div>\n                        <div className=\"l-col l-col-small-12 l-col-medium-6 l-col-4 u-small-padding-top-l\">\n                            <OraButton {...this.getButtonProps(false)}>Dalej</OraButton>\n                        </div>\n                    </div>\n                </div>\n            </div>);\n    }\n\n    render() {\n        let consentPositiveState = this.props.consent.states.find((state) => state.positive);\n        let consentNegativeState = this.props.consent.states.find((state) => !state.positive);\n        let showTitle=!(this.props.consent && this.props.consent.type===\"OSW\");\n        return(\n                    <fieldset ref={(ref) => this.expander = ref} className=\"u-padding-top-l opl-agreements__item opl-agreements__item--slave true u-padding-right \" data-js-module=\"common/modules/opl-expander\" data-js-conditions=\"element:{was seen}\">\n                            <div className=\"l-row\">\n                                    <div className={(\"l-col \"+ (showTitle?\"l-col-12\":\"l-col-10\")  + \" u-padding-l\")}>\n                                        {(this.hasBonus() && this.hasBusinessImplications()) ?\n                                            <OraModal {...this.getModalProps()}>\n                                                {this.getModalContent()}\n                                            </OraModal> :\n                                            \"\"\n                                        }\n                                        {((this.props.formInputType && this.props.formInputType===\"CHECKBOX\")\n                                                || (this.props.consent && this.props.consent.type===\"OSW\")) ?\n                                            <MulticartSingleConsentCheckboxRow key = {this.props.name} {...this.props} onStateChange={this.onStateChange.bind(this)} onChangeCallback={this.onChangeCallback.bind(this)} showTitle={showTitle}/>\n                                            :\n                                            <MulticartSingleConsentRadioButtonRow {...this.props} onStateChange={this.onStateChange.bind(this)} onChangeCallback={this.onChangeCallback.bind(this)}/>}\n                                    </div>\n                            </div>\n                    </fieldset>\n        );\n    }\n}\n"],
    "file": "MulticartSingleConsentRow.js"
}