{
    "version": 3,
    "sources": ["../../../../../../es6/eshop/modules/documents/components/MulticartDocumentLink.jsx"],
    "names": ["MulticartDocumentLink", "props", "handleClick", "bind", "e", "getOrCreateDocument", "documentCode", "bundleNo", "documentType", "preventDefault", "entry", "miniCartData", "entries", "find", "documentDescription", "msisdnForDescription", "OnlineUtils", "formatMsisdn", "isMigration", "processType", "mnpNumber", "msisdn", "isMsisdnInDescriptionNeeded", "getDescriptionWithMsisdn", "anyDocumentIsBeingLoaded", "getDocumentDescription", "loaderId", "isDocumentBeingDownloaded", "renderDocumentLink", "Component", "propTypes", "PropTypes", "string", "isRequired", "number", "makeMapStateToProps", "getDocumentLinkForCode", "state", "documentLink", "mapDispatchToProps", "dispatch", "code"],
    "mappings": "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",
    "sourcesContent": ["import React, {Component} from 'react';\nimport PropTypes from 'prop-types';\nimport {connect} from 'react-redux';\nimport {OraLoader} from \"eshop/components/OraCommonComponents\";\nimport {getAnyDocumentIsBeingLoaded, createGetDocumentLinkForCodeSelector, createIsDocumentBeingDownloadedSelector}  from '../selectors';\nimport {getOrCreateDocument} from \"../actions/documents\";\nimport {getMiniCartData} from \"eshop/modules/cart/selectors\";\nimport OnlineUtils from \"eshop/utils/OnlineUtils\";\n\nclass MulticartDocumentLink extends Component {\n\n    constructor(props) {\n        super(props);\n\n        this.handleClick = this.handleClick.bind(this);\n    }\n\n    handleClick(e) {\n        this.props.getOrCreateDocument(this.props.documentCode, this.props.bundleNo, this.props.documentType);\n        e.preventDefault();\n    }\n\n    isMsisdnInDescriptionNeeded() {\n        return (this.props.documentCode === 'MOB_DOC_AGR_B2C' || this.props.documentCode === 'MOB_DOC_AGR_B2B' || this.props.documentCode === 'DOC_AGR_ASSIGNMENT' || this.props.documentCode === 'DOC_AGR_ASSIGNMENT_DEATH');\n    }\n\n    getDescriptionWithMsisdn() {\n        let entry = this.props.miniCartData.entries.find(entry => entry.bundleNo === this.props.bundleNo);\n        if(!entry) {return this.props.documentDescription}\n        let msisdnForDescription = OnlineUtils.formatMsisdn(OnlineUtils.isMigration(entry.processType) ? entry.mnpNumber : entry.msisdn);\n        return this.props.documentDescription + ' (nr ' + msisdnForDescription + ') ';\n    }\n\n    getDocumentDescription() {\n        if(this.isMsisdnInDescriptionNeeded()) {\n            return this.getDescriptionWithMsisdn();\n        } else {\n            return this.props.documentDescription;\n        }\n    }\n\n    renderDocumentLink() {\n        if (this.props.anyDocumentIsBeingLoaded) {\n            return <span className=\"u-font-bold\">\n                {this.getDocumentDescription()}<span className=\"u-acc-hide\">PDF</span>\n            </span>;\n        } else {\n            return <a href=\"#\" onClick={this.handleClick}>\n                    {this.getDocumentDescription()}<span className=\"u-acc-hide\">PDF</span>\n                </a>;\n        }\n    }\n\n    render() {\n        let loaderId = \"print-documents-loader-\" + this.props.documentCode + (this.props.bundleNo ? \"_\" + this.props.bundleNo : '');\n\n        return (\n            <li className=\"u-padding-s\">\n                <OraLoader loading={this.props.isDocumentBeingDownloaded} id={loaderId} parentId=\"document-loader\">\n                    <div className=\"u-vertical-middle\">\n                        {this.renderDocumentLink()}\n                    </div>\n                </OraLoader>\n            </li>\n        );\n    }\n}\n\nMulticartDocumentLink.propTypes = {\n    documentCode: PropTypes.string.isRequired,\n    documentDescription: PropTypes.string.isRequired,\n    bundleNo: PropTypes.number\n};\n\nconst makeMapStateToProps = (() => {\n    let getDocumentLinkForCode = createGetDocumentLinkForCodeSelector();\n    let isDocumentBeingDownloaded = createIsDocumentBeingDownloadedSelector();\n\n    return (state, props) => ({\n        anyDocumentIsBeingLoaded: getAnyDocumentIsBeingLoaded(state),\n        isDocumentBeingDownloaded: isDocumentBeingDownloaded(state, props),\n        documentLink: getDocumentLinkForCode(state, props),\n        miniCartData: getMiniCartData(state)\n    })\n});\n\nconst mapDispatchToProps = dispatch => ({\n    getOrCreateDocument: (code, bundleNo, documentType) => dispatch(getOrCreateDocument(code, bundleNo, documentType))\n});\n\nexport default connect(makeMapStateToProps, mapDispatchToProps)(MulticartDocumentLink);"],
    "file": "MulticartDocumentLink.js"
}