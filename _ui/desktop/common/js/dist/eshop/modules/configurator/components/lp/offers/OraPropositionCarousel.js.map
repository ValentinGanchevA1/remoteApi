{
    "version": 3,
    "sources": ["../../../../../../../../es6/eshop/modules/configurator/components/lp/offers/OraPropositionCarousel.jsx"],
    "names": ["oplExpanderModule", "path", "conditions", "options", "scrollToSelected", "triggerSelector", "contentSelector", "parentClass", "oplLayoutFixerModule", "selectors", "oplBoxDetailsModule", "oplCarousel", "offerCount", "arrows", "dots", "slidesToShow", "mobileFirst", "infinite", "centerMode", "centerPadding", "responsive", "breakpoint", "settings", "jsModules", "updateDimensions", "OPL", "UI", "fire", "EVENTS", "modules", "layoutFixer", "recalculate", "getCarouselContainerId", "getParentCarouselContainerId", "getParentCarouselContainer", "document", "getElementById", "getCarouselContainer", "initModulesInsideCarousel", "initModules", "loadModulesInsideCarousel", "console", "log", "loadModules", "stopModulesInsideCarousel", "stopModules", "OraPropositionCarousel", "props", "state", "isUpdating", "OnlineUtils", "setAsLastViewedOfferPage", "currentProps", "nextProps", "currentFilters", "selectedFilters", "nextFilters", "offerType", "processType", "verifiedMsisdn", "loyaltyLength", "compareFilters", "setState", "setTimeout", "propositionsInContext", "offers", "Component", "PropositionCarousel", "reloadModules", "window", "addEventListener", "handleDefault", "length", "that", "on", "data", "module", "goToDefault", "bind", "selectedBaseRatePlanId", "propositions", "propositionIndexed", "find", "p", "rateplanBaseProductId", "goToIndex", "indexOf", "carousel", "goTo", "nextState", "selectedOffer", "proposition", "features", "featureGroups", "promotionFeatures", "promoFeatures", "featuresPositions", "forEach", "f", "push", "code", "map", "id", "getFeaturesPositions", "mapStateToProps", "selectedOfferId", "offersLoading", "disableAddToCart", "clientContext", "mapDispatchToProps", "dispatch", "selectOfferNoPhone", "propositionId", "pickDevice", "url", "showError", "msg"],
    "mappings": "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",
    "sourcesContent": ["import React, {Component} from \"react\";\nimport {connect} from \"react-redux\";\nimport {selectOffer,pickDevice} from 'eshop/modules/configurator/actions/offers';\nimport {getOffersData,getOffersForCurrentFilters,getSelectedOffer,getSelectedBaseRatePlanId,getSelectedOfferId, getOffersDataInContext} from 'eshop/modules/configurator/selectors/offers';\nimport {getOffersLoading} from 'eshop/modules/configurator/selectors/metaData';\nimport {getSelectedFilters,getDisableAddToCart,getClientContext} from 'eshop/modules/configurator/selectors/filters';\nimport {OfferBox} from \"eshop/modules/configurator/components/lp/offers/OfferBox\";\nimport {HideOnTablet, ShowOnDesktop, ShowOnTablet, ShowOnMobile} from \"eshop/modules/configurator/utils\";\nimport OnlineUtils from \"eshop/utils/OnlineUtils\";\nimport {OraLoader} from \"eshop/components/OraCommonComponents\";\nimport {showError} from \"eshop/modules/auth/actions/authorization\"\n\n\nconst oplExpanderModule =() => ({\n\tpath: \"common/modules/opl-expander\",\n\tconditions: \"media:{eq-small}\",\n\toptions: {\n\t\tscrollToSelected: false,\n\t\ttriggerSelector: \".opl-box__expander__trigger\",\n\t\tcontentSelector: \".opl-box__expander__content\",\n\t\tparentClass: \"opl-box__expander\"\n\t}\n})\n\nconst oplLayoutFixerModule =() => ({\n   path: \"core/modules/layout-fixer\",\n   options: {\n       selectors: [\n           \".js-layout-fixer-group-1\",\n           \".js-layout-fixer-group-2\",\n           \".js-layout-fixer-group-3\",\n           \".js-layout-fixer-group-4\",\n           \".js-layout-fixer-group-5\",\n           \".js-layout-fixer-group-6\",\n           \".js-layout-fixer-group-7\",\n           \".js-layout-fixer-group-classification-attribute\",\n           \".js-layout-rateplan-name-fixer\"\n       ]\n   }\n})\n\nconst oplBoxDetailsModule = () => ({\n    path: \"common/modules/opl-box-details\",\n    options: { }\n})\n\nconst oplCarousel = (offerCount) => ({\n   path: \"common/modules/opl-carousel\",\n   options: {\n       arrows: false,\n       dots: true,\n       slidesToShow: 1,\n       mobileFirst: true,\n       infinite: false,\n       centerMode: true,\n       centerPadding: \"40px\",\n       responsive: [\n           {\n              breakpoint: 200,\n              settings: {\n                  slidesToShow: 1,\n                  centerMode: true,\n                  centerPadding: \"18px\",\n              }\n           },\n           {\n               breakpoint: 567,\n               settings: {\n                   slidesToShow: 2,\n                   centerMode: false\n               }\n           },\n           {\n               breakpoint: 767,\n               settings: {\n                   slidesToShow: 3,\n                   centerMode: false\n               }\n           },\n           {\n               breakpoint: 1259,\n               settings: {\n                   slidesToShow: offerCount,\n                   centerMode: false\n               }\n           }\n       ]\n   }\n})\n\nconst jsModules = (offerCount) =>([\n    oplLayoutFixerModule(),\n    oplCarousel(offerCount)\n])\n\n\nconst updateDimensions = () => {\n   OPL.UI.fire(OPL.UI.EVENTS.modules.layoutFixer.recalculate, getCarouselContainerId());\n}\n\nconst getParentCarouselContainerId = () => \"carousel-parent-container\"\n\n\nconst getCarouselContainerId = () => \"carousel-container\"\n\n\nconst getParentCarouselContainer = () => document.getElementById(getParentCarouselContainerId());\n\n\nconst getCarouselContainer = () => document.getElementById(getCarouselContainerId())\n\n\nconst initModulesInsideCarousel = ()=>{\n    OPL.UI.initModules(getParentCarouselContainer())\n    updateDimensions()\n}\n\nconst loadModulesInsideCarousel = (offerCount = 4) =>{\n    if(offerCount > 4) {\n        offerCount = 4;\n    }\n    console.log(\" loadModulesInsideCarousel **********************************************\");\n    OPL.UI.loadModules(getCarouselContainer(), jsModules(offerCount))\n    updateDimensions()\n}\n\nconst stopModulesInsideCarousel = ()=>{\n    OPL.UI.stopModules(getParentCarouselContainer())\n}\n\n//We need to unmount and mount carousel because UI carousel mess in DOM and react dont like it :(\n//isUpdating is to do this workaround, if u have better idea please share or just refactor this code :P\nclass OraPropositionCarousel extends Component {\n\n    constructor(props) {\n        super(props);\n        this.state = {isUpdating: false};\n    }\n\n    componentDidMount() {\n        OnlineUtils.setAsLastViewedOfferPage();\n    }\n\n    compareFilters(currentProps,nextProps){\n        const currentFilters = currentProps.selectedFilters;\n        const nextFilters = nextProps.selectedFilters;\n\n        return currentFilters.offerType == nextFilters.offerType &&\n               currentFilters.processType == nextFilters.processType &&\n               currentFilters.verifiedMsisdn == nextFilters.verifiedMsisdn &&\n               currentFilters.loyaltyLength[currentFilters.processType] == nextFilters.loyaltyLength[nextFilters.processType]\n    }\n\n    componentWillReceiveProps(nextProps) {\n        if(!this.compareFilters(this.props,nextProps)) {\n            this.setState({\n                isUpdating: true\n            });\n            setTimeout(() => this.setState({isUpdating: false}), 0);\n        }\n    }\n\n    render(){\n        if(!this.state.isUpdating && this.props.propositionsInContext && this.props.propositionsInContext.offers[0]) {\n             return (\n                 <PropositionCarousel {...this.props} />\n             )\n        } else {\n            return null;\n        }\n   }\n}\n\nclass PropositionCarousel extends Component {\n\n    constructor(props) {\n        super(props);\n        this.state={reloadModules:true}\n    }\n\n    componentDidMount(){\n       window.addEventListener(\"resize\", updateDimensions);\n       this.handleDefault();\n       loadModulesInsideCarousel(this.props.propositionsInContext.offers.length);\n       this.setState({reloadModules:false});\n    }\n\n    handleDefault(){\n        const that=this;\n        OPL.UI.on('module.started', function(data){\n            if(data.module=='common/modules/opl-carousel'){\n                setTimeout(that.goToDefault.bind(that),300);\n            }\n       })\n    }\n    goToDefault(){\n        console.log(\"this.props.selectedBaseRatePlanId\",this.props.selectedBaseRatePlanId);\n        if(!this.props.selectedBaseRatePlanId)\n            return;\n        let propositions = this.props.propositionsInContext&&this.props.propositionsInContext.offers;\n        let propositionIndexed=propositions.find(p => p.rateplanBaseProductId==this.props.selectedBaseRatePlanId);\n\n        let goToIndex=propositions.indexOf(propositionIndexed);\n        console.log(\"GOTO \",goToIndex);\n        OPL.UI.fire(OPL.UI.EVENTS.modules.carousel.goTo, goToIndex,getCarouselContainerId() )\n    }\n\n    componentWillUpdate(nextProps, nextState) {\n        if (nextProps.propositionsInContext.offers.length != this.props.propositionsInContext.offers.length) {\n            stopModulesInsideCarousel();\n            this.setState({reloadModules:true});\n        }\n    }\n\n    componentDidUpdate() {\n    console.log(\"onUpdate this.props.selectedOffer=\",this.props.selectedOffer);\n        if(this.state.reloadModules){\n            loadModulesInsideCarousel(this.props.propositionsInContext.offers.length)\n\n        }\n        if(this.props.selectedOffer){\n            console.log(\"onUpdate this.props.selectedOffer=\",this.props.selectedOffer);\n            this.goToDefault();\n        }\n        updateDimensions()\n    }\n\n    componentWillUnmount(){\n        stopModulesInsideCarousel()\n    }\n    getFeaturesPositions(){\n        let propositions = this.props.propositionsInContext.offers;\n\n        if(propositions.length){\n            let proposition=propositions[propositions.length-1];\n            if(proposition.features && proposition.features.featureGroups && proposition.features.featureGroups.promotionFeatures){\n                let promoFeatures=proposition.features.featureGroups.promotionFeatures;\n                let featuresPositions=[];\n                promoFeatures.forEach(f => {\n                        featuresPositions.push(f.code);\n                });\n                return featuresPositions;\n            }\n        }\n        return [];\n    }\n    render() {\n    let propositions = this.props.propositionsInContext.offers;\n\n        return(\n            <div id={getParentCarouselContainerId()} className=\"u-small-no-padding\">\n                <div id={getCarouselContainerId()} className=\"l-row opl-carousel opl-carousel--brand-dots\">\n                    {propositions.map(proposition =>\n                        <OfferBox\n                            {...this.props.selectedOffer}\n                            key={proposition.id}\n                            proposition={proposition}\n                            featuresPositions={this.getFeaturesPositions()}\n                            {...this.props}/>\n                    )}\n                </div>\n            </div>\n        )\n    }\n}\n\nconst mapStateToProps = state => ({\n    selectedBaseRatePlanId:getSelectedBaseRatePlanId(state),\n    selectedOfferId         : getSelectedOfferId(state),\n    selectedOffer         : getSelectedOffer(state),\n    propositionsInContext : getOffersDataInContext(state),\n    offersLoading : getOffersLoading(state),\n    disableAddToCart: getDisableAddToCart(state),\n    clientContext: getClientContext(state),\n    selectedFilters: getSelectedFilters(state)\n});\n\nconst mapDispatchToProps = dispatch => ({\n    selectOfferNoPhone: (propositionId) => dispatch(selectOffer(propositionId)),\n    pickDevice: (propositionId,url) => dispatch(pickDevice(propositionId,url)),\n    showError: (msg) => dispatch(showError(msg))\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(OraPropositionCarousel)\n"],
    "file": "OraPropositionCarousel.js"
}