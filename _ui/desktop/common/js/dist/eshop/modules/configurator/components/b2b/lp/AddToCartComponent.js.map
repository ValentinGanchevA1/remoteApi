{
    "version": 3,
    "sources": ["../../../../../../../../es6/eshop/modules/configurator/components/b2b/lp/AddToCartComponent.jsx"],
    "names": ["AddToCartComponent", "props", "selectOfferNoPhoneAction", "bind", "pickDeviceAction", "showPickDeviceModal", "fetchContractRole", "PickDevicePopup", "initialize", "OnlineUtils", "extractObject", "descriptions", "clearAddTerminalToOfferFromSessionStorage", "e", "preventDefault", "addToCartWithCounter", "setPropositionListSoftBundleGroup", "pickDevice", "deviceListAddress", "open", "onClickConfirm", "onClickDecline", "propositionListCount", "isMsisdndVerificationRequired", "checkMsisdnResult", "isPositive", "warningOn", "scrollToComponent", "firstOfferFromProductFilter", "payments", "priceObj", "getPaymentsForRole", "contractRole", "formatPrice", "basePrice", "originalNetPrice", "isPropositionListCountSetMode", "offersLoading", "selectedLoyaltyLengthValue", "addMorePrice", "addToCartButtonEnabled", "selectedOfferType", "onClick", "increment", "Component", "mapStateToProps", "state", "mapDispatchToProps", "dispatch", "url", "gotoCartSummary"],
    "mappings": "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",
    "sourcesContent": ["import React, {Component} from \"react\";\nimport {connect} from \"react-redux\";\nimport {\n    propositionListCountIncrement,\n    requiredMsisdnVerificationOff,\n    requiredMsisdnVerificationOn,\n    setMarketContext,\n\n    setPropositionListSoftBundleGroup\n} from \"eshop/modules/configurator/actions/filters\";\n\nimport {pickDeviceB2B, fetchContractRole} from 'eshop/modules/configurator/actions/offers';\nimport {addToCartWithCounter} from 'eshop/modules/configurator/actions/cart';\nimport {\n    getContractRole,\n    getFirstOfferFromProductFilter,\n    getSelectedBaseRatePlanId\n} from 'eshop/modules/configurator/selectors/offers';\nimport PickDevicePopup from \"eshop/modules/configurator/components/lp/offers/PickDevicePopup\";\nimport OnlineUtils from \"eshop/utils/OnlineUtils\";\nimport {\n    getCheckMsisdnResult,\n    getPropositionListCount,\n    getPropositionListCountSetMode,\n    getSelectedLoyaltyLengthValue,\n    isMsisdndVerificationRequired,\n    getSelectedOfferType\n} from \"eshop/modules/configurator/selectors/filters\";\nimport {getOffersLoading} from 'eshop/modules/configurator/selectors/metaData';\nimport InfoComponent from \"eshop/components/InfoComponent\";\nimport {gotoCartSummary} from \"eshop/modules/checkout/actions/app\"\nimport {clearAddTerminalToOfferFromSessionStorage} from \"eshop/modules/cart/actions/cart\";\nimport AddMore from \"eshop/modules/configurator/components/AddMoreB2B\";\n\nclass AddToCartComponent extends Component {\n\n    constructor(props) {\n        super(props);\n        this.selectOfferNoPhoneAction = this.selectOfferNoPhoneAction.bind(this)\n        this.pickDeviceAction = this.pickDeviceAction.bind(this)\n        this.showPickDeviceModal = this.showPickDeviceModal.bind(this)\n    }\n\n    componentWillMount() {\n        this.props.fetchContractRole();\n        PickDevicePopup.initialize(\n            OnlineUtils.extractObject(this.props.descriptions, \"label.popup.\")\n        )\n        this.props.clearAddTerminalToOfferFromSessionStorage()\n    }\n\n    selectOfferNoPhoneAction(e) {\n        e && e.preventDefault()\n        this.props.addToCartWithCounter()\n    }\n\n    pickDeviceAction(e) {\n        e && e.preventDefault();\n\n        this.props.setPropositionListSoftBundleGroup();\n        this.props.pickDevice(this.props.descriptions.deviceListAddress);\n    }\n\n    showPickDeviceModal(e) {\n        e.preventDefault()\n        PickDevicePopup.open({\n            onClickConfirm: this.pickDeviceAction,\n            onClickDecline: this.selectOfferNoPhoneAction\n        })\n    }\n\n    onClick() {\n        if (this.props.propositionListCount > 0 && this.props.isMsisdndVerificationRequired && this.props.checkMsisdnResult && !this.props.checkMsisdnResult.isPositive) {\n            this.props.warningOn();\n            OnlineUtils.scrollToComponent(\"msisdn-verification-container-row\", \"header\");\n        } else {\n\n            this.props.setPropositionListSoftBundleGroup()\n            this.props.addToCartWithCounter();\n        }\n\n    }\n\n\n    addMorePrice() {\n        if (this.props.firstOfferFromProductFilter && this.props.firstOfferFromProductFilter.payments) {\n            let priceObj = OnlineUtils.getPaymentsForRole(this.props.firstOfferFromProductFilter.payments, this.props.contractRole)\n            return OnlineUtils.formatPrice(priceObj.basePrice.originalNetPrice)\n        } else {\n            return \"\"\n        }\n    }\n\n    render() {\n        if (this.props.isPropositionListCountSetMode\n            || this.props.offersLoading\n            || (!this.props.selectedLoyaltyLengthValue && this.props.propositionListCount !== 0)) {\n            return (null)\n        }\n        let addMorePrice = this.addMorePrice()\n        return (\n            <div className=\"l-full-row g-gray1-bg\">\n\n                {(this.props.addToCartButtonEnabled) &&\n\n                    <div className={\"l-page-row u-padding-top\"}>\n\n                        <div className=\"g-white1-bg\">\n                            <div className=\"u-position-relative\">\n                                <div className=\"u-padding-left-l u-padding-right-l \">\n                                    <table className=\"u-table-fixed\">\n                                        <tbody>\n                                        <tr>\n                                            <td className=\"opl-checkout__icon__cell\">\n                                                <span\n                                                    className=\"g-icon g-icon--only  g-icon g-icon--device-smartphone\"></span>\n                                            </td>\n                                            <td className=\"u-padding-top-l u-padding-l u-padding-right-l u-font-bold\">\n                                                {\"Dobierz \" + (this.props.selectedOfferType == \"VOICE\" ? \"telefon\" : \"terminal\") + \" do oferty\"}\n                                            </td>\n                                            <td className=\"opl-checkout__button__cell u-padding-top-l u-padding-l\">\n                                                <a href=\"#\" aria-label=\"Dobierz telefon do oferty\"\n                                                   className=\"opl-product-addlink u-right u-small-right\"\n                                                   onClick={this.pickDeviceAction}></a>\n                                            </td>\n                                        </tr>\n                                        </tbody>\n                                    </table>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                }\n\n                <div className=\"l-page-row u-medium-no-padding u-small-no-padding u-small-padding-m  \">\n                    <div className=\"l-row u-padding-top-l u-padding-left-l u-padding-right-l u-padding-s\">\n                        <div className=\"l-col l-col-small-12 l-col-medium-8 l-col-9 u-left u-spacing-l\">\n                            {this.props.propositionListCount > 0 &&\n                            <InfoComponent color={\"grey\"} bgColor={\"grey\"}>Przechodząc do następnej karty bez wybranego\n                                urządzenia, dodasz do koszyka tylko kartę SIM </InfoComponent>}\n                        </div>\n\n                        <div className=\"l-col l-col-small-12 l-col-medium-4 l-col-3 u-right u-spacing-l \">\n                            <button className=\"opl-btn opl-btn--primary opl-btn--medium o-btn u-w-100\"\n                                    onClick={this.onClick.bind(this)}\n                                    disabled={!this.props.addToCartButtonEnabled && this.props.propositionListCount > 0}>{(this.props.propositionListCount > 1) ? \"Przejdź do kolejnej karty\" : ((this.props.propositionListCount === 1) ? \"Dodaj do koszyka\" : \"Przejdź do koszyka\")}\n                            </button>\n                        </div>\n                    </div>\n\n                </div>\n                {(this.props.propositionListCount === 0) && addMorePrice &&\n                <AddMore onClick={this.props.increment} price={addMorePrice}/>}\n            </div>\n        )\n    }\n}\n\nconst mapStateToProps = state => ({\n    selectedLoyaltyLengthValue: getSelectedLoyaltyLengthValue(state),\n    isPropositionListCountSetMode: getPropositionListCountSetMode(state),\n    propositionListCount: getPropositionListCount(state),\n    addToCartButtonEnabled: !!getSelectedBaseRatePlanId(state),\n    offersLoading: getOffersLoading(state),\n    checkMsisdnResult: getCheckMsisdnResult(state),\n    isMsisdndVerificationRequired: isMsisdndVerificationRequired(state),\n    firstOfferFromProductFilter: getFirstOfferFromProductFilter(state),\n    contractRole: getContractRole(state),\n    selectedOfferType: getSelectedOfferType(state),\n});\n\nconst mapDispatchToProps = dispatch => ({\n    addToCartWithCounter: () => dispatch(addToCartWithCounter()),\n    pickDevice: (url) => dispatch(pickDeviceB2B(url)),\n    increment: () => dispatch(propositionListCountIncrement()),\n    gotoCartSummary: () => dispatch(gotoCartSummary()),\n    warningOn: () => dispatch(requiredMsisdnVerificationOn()),\n    clearAddTerminalToOfferFromSessionStorage: () => dispatch(clearAddTerminalToOfferFromSessionStorage()),\n\n    setPropositionListSoftBundleGroup: () => dispatch(setPropositionListSoftBundleGroup()),\n    fetchContractRole: () => dispatch(fetchContractRole())\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(AddToCartComponent)\n\n\n\n"],
    "file": "AddToCartComponent.js"
}