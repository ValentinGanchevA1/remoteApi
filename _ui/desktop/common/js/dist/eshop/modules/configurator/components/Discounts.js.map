{
    "version": 3,
    "sources": ["../../../../../../es6/eshop/modules/configurator/components/Discounts.jsx"],
    "names": ["DiscountsView", "count", "discounts", "props", "fixerClasses", "preprocessForFixer", "attributes", "lengthOfVisibleDiscounts", "map", "a", "hide", "dummy", "reduce", "b", "ifApplyPadding", "f", "visible", "addKeyForReact", "attr", "applyFixerClass", "config", "React", "Component", "propTypes", "PropTypes", "array", "isRequired", "separate", "bool", "box", "paddingFixer", "string", "paddingIfNotEmpty", "table", "defaultProps", "renderFixedPadding", "render", "features", "ret", "forEach", "fixer", "toAdd", "find", "attribute", "value", "push", "distributeProp", "prop", "filter", "key", "extractTechnicalValueIfExists", "dummyExtractor", "extractTechnicalValueFromDataDesc", "splitIndex", "indexOf", "token1", "substring", "token2", "search", "val", "parseInt", "technicalValue", "console", "error", "mapStateToProps", "state", "clientContext", "process", "mapDispatchToProps", "dispatch", "Discounts"],
    "mappings": "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",
    "sourcesContent": ["import React from \"react\";\nimport {connect} from \"react-redux\"\nimport PropTypes from 'prop-types'\nimport Discount from \"./stateless/Discount\";\nimport { getClientContext, getSelectedProcessTypeValue } from \"../selectors/filters\"\n\n/**\n * Renders an attribute box\n */\n\nclass DiscountsView extends React.Component {\n\n    render() {\n\n        var count = 0\n        //Last element should not have border below\n\n        //this.props.attributes\n        let discounts = this.props.fixerClasses ? preprocessForFixer(this.props.attributes, this.props.fixerClasses): this.props.attributes\n\n\n        var lengthOfVisibleDiscounts = discounts.map(a => a.hide || a.dummy ? 0:1).reduce((a, b)=> a+b, 0)\n\n        var ifApplyPadding = () => {\n            if (lengthOfVisibleDiscounts>0){\n                return true\n            }else if (this.props.fixerClasses && this.props.fixerClasses.map(f=>f.visible).reduce((a,b)=>a || b,false)){\n                return true\n            }else{\n                return false\n            }\n        }\n\n//return (\n//<p>discounts</p>\n//)\n\n        return (\n        <div>\n                {\n                    discounts.map(addKeyForReact)\n                    .map((attr)=> applyFixerClass(attr,this.props.fixerClasses))\n                    .map((attr) => <Discount {...attr} {...this.props} config={this.props.config}/>)\n                }\n        </div>\n        )\n\n    }\n}\n\nDiscountsView.propTypes = {\n    attributes: PropTypes.array.isRequired,\n    separate: PropTypes.bool,\n    box: PropTypes.bool,\n    paddingFixer: PropTypes.string,\n    paddingIfNotEmpty: PropTypes.bool,\n    table: PropTypes.bool\n}\n\nDiscountsView.defaultProps = {\n  separate: true,\n  box: true,\n  paddingIfNotEmpty: false,\n  table: false\n}\n\nfunction renderFixedPadding(render){\n\n    if (render) {\n        return(<div className=\"u-padding-l\" ></div>)\n    }else{\n        return null\n\n    }\n}\n\nfunction preprocessForFixer(features, fixerClasses){\n\n    let ret = []\n    fixerClasses.forEach(fixer => {\n      let toAdd = features.find(f => f.attribute === fixer.attribute)\n      toAdd = toAdd || {attribute:fixer.attribute, value:'<div></div>', dummy:true, hide: !fixer.visible}\n      ret.push(toAdd)\n    })\n    return ret;\n}\n\nfunction distributeProp(attr, prop, value) {\n    attr[prop] = value\n    return attr\n}\n\n\nfunction applyFixerClass(attr,fixerClasses ){\n    if(fixerClasses){\n       attr.fixer = fixerClasses.filter(f=>f.attribute === attr.attribute)[0].fixer\n    }\n    return attr\n}\n\nfunction addKeyForReact(attr) {\n    attr.key = attr.attribute\n    return attr\n}\n\nfunction extractTechnicalValueIfExists(attr) {\n\n    return [attr]\n        .map(dummyExtractor)\n        .map(extractTechnicalValueFromDataDesc)[0]\n\n}\n\nfunction dummyExtractor(attr) {\n    return attr\n}\n\n\nfunction extractTechnicalValueFromDataDesc(attr){\nif (attr.attribute === \"data_desc\") {\n    let splitIndex = attr.value.indexOf(\"/\")\n\n    let token1 = attr.value.substring(0, splitIndex)\n    let token2 = attr.value.substring(splitIndex + 1)\n\n    if (token1.search(\"^\\\\d+$\")==0 && token2) {\n        let val = parseInt(token1)\n        return { ...attr, value: token2, technicalValue: val }\n    } else {\n        console.error(\"data_desc format error: \" + attr.value)\n    }\n}\n        return attr\n}\n\n\n\n\n\nconst mapStateToProps = state => ({\n    clientContext: getClientContext(state),\n    process: getSelectedProcessTypeValue(state)\n})\n\nconst mapDispatchToProps = dispatch => ({\n//    setClientContext: (event) => dispatch(setClientContext(event.target.checked))\n})\n\nconst Discounts = connect(mapStateToProps, mapDispatchToProps)(DiscountsView)\n\nexport default Discounts;\n"],
    "file": "Discounts.js"
}