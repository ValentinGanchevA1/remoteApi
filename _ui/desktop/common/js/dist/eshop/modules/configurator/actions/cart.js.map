{
    "version": 3,
    "sources": ["../../../../../../es6/eshop/modules/configurator/actions/cart.js"],
    "names": ["addToCart", "selectedOffer", "selectedProcess", "dispatch", "getState", "addToCartWithCounter", "addInstallmentSalesOfGoodsToCart", "deviceCode", "selectedFilters", "availableProductsKey", "RemoteApi", "checkAndGetOffers", "then", "response", "isPositive", "type", "ACTIONS", "FETCH_OFFERS", "payload", "offers", "data", "description", "catch", "error", "errorMessage", "responseJSON", "message", "getSelectedVasesForProposition", "state", "proposition", "selectedVasesForProposition", "console", "log", "find", "propos", "propositionId", "id", "vases", "getIgnoredVasesForProposition", "addons", "categorizedBonuses", "services", "defaults", "filter", "service", "isDefault", "map", "bonuses", "code", "selected", "defaultBonus", "indexOf", "pushToCart", "selectedDeviceId", "market", "OnlineUtils", "removeParameterFromURL", "val", "args", "rateplanId", "process", "bonusesToAdd", "defaultBonusesToIgnore", "deviceVariant", "POST_TO_CART_START", "postToCart", "responseData", "postToCart200Handler", "errorData", "addToCartError", "removePwaSuflerContextFromSession", "pushGweAddEvents", "request", "GenesysWebEngagementUtils", "pushAddToCartEvent", "bundleNo", "forEach", "vas", "pushAddVasToCartEvent", "productCode", "saveInSessionStorage", "OfferType", "DATA", "window", "location", "href", "getLastViewedOfferPage", "requestData", "addToCartSuccess", "clearVerificationData", "redirectToCart", "REDIRECT_TO_CART", "localStorage", "getItem", "constants", "url", "cart", "OPL", "UI", "fire", "EVENTS", "modules", "basket", "counter", "update", "bundleCount", "POST_TO_CART_SUCCESS", "AUTHORIZATION_ADD_TO_CART_AFTER", "value", "propositionListSoftBundleGroup", "offerCount", "offerType", "CONFACTIONS", "USE_DEFAULT_OFFER_TYPE", "use", "USE_DEFAULT_PROCESS", "USE_DEFAULT_LOYALTY", "USE_DEFAULT_OFFER", "isMnpApplication", "POST_TO_CART_ERROR", "msg", "CLEAR_CHECK_MSISDN"],
    "mappings": "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",
    "sourcesContent": ["import * as ACTIONS from \"../actionTypes\";\nimport * as CONFACTIONS from \"eshop/modules/configurator/actionTypes\";\nimport {getProcessTypesIncludeAssignment} from \"eshop/modules/cart/selectors\";\nimport {getSelectedDeviceId, getSelectedOffer} from '../selectors/offers';\nimport {bodyLoaderEvent, gotoCartSummary} from \"eshop/modules/checkout/actions/app\"\nimport {clearMessage, showError, showMessage} from \"eshop/modules/auth/actions/authorization\"\nimport {addToCartInProgress} from '../selectors/cart';\nimport {constants} from '../constants';\nimport RemoteApi from \"../remoteApi\";\nimport OnlineUtils from \"eshop/utils/OnlineUtils\";\nimport {clearAddTerminalToOfferFromSessionStorage, fetchCart, fetchMiniCart} from \"eshop/modules/cart/actions/cart\";\nimport {\n    clearDeviceInstalmentsCountFromSessionStorage,\n    clearPropositionId,\n    fetchContractRole,\n    clearSelectedVases\n} from \"eshop/modules/configurator/actions/offers\"\n\nimport {\n    getPropositionListCount,\n    getPropositionListCountSetMode,\n    getPropositionListSoftBundleGroup,\n    getSelectedOfferType,\n    isProductDetailsListPage,\n    getMarketContext,\n    getSelectedProcessTypeValue,\n    getSelectedProcess\n} from \"eshop/modules/configurator/selectors/filters\"\n\n\nimport {getSelectedVases} from \"eshop/modules/configurator/selectors/offers\"\n\nimport {\n    clearLoyaltyLength,\n    clearOfferType,\n    clearProcessType,\n    clearPropositionListSoftBundleGroup,\n    propositionListCountDecrement,\n    setPropositionListSoftBundleGroup\n} from \"eshop/modules/configurator/actions/filters\"\nimport {\n    getCurrentSelectedAvailableProductsKey,\n    isProductDetailsPage,\n    isProductListPage,\n    isAccessoryListPage\n} from \"eshop/modules/simfree/selectors\";\nimport {getAddFromLink} from \"eshop/modules/configurator/selectors/metaData\";\nimport GenesysWebEngagementUtils from \"eshop/utils/GenesysWebEngagementUtils\";\nimport $ from \"jquery\";\nimport {getSelectedSoftBundleGroup} from \"eshop/modules/simfree/selectors\"\nimport {AUTHORIZATION_ADD_TO_CART_AFTER} from \"eshop/modules/auth/actionTypes\"\nimport OfferType from \"eshop/modules/simfree/constants/OfferTypeEnum\";\nimport {requestLoggedCustomerData} from \"eshop/modules/auth/actions/api\";\nimport {clearStayLoveRetentionMSISDN} from \"eshop/modules/auth/actions/authorization\"\nimport {getSelectedFilters} from \"../selectors/filters\";\nimport {isDuet} from \"eshop/modules/simfree/selectors\";\nimport MarketSegment from \"../../core/enum/MarketSegment\";\n\nexport const addToCart = (selectedOffer, selectedProcess) => (dispatch, getState) => {\n\n\n        dispatch(addToCartWithCounter());\n\n\n}\n\nexport const addInstallmentSalesOfGoodsToCart = () => (dispatch, getState) => {\n    bodyLoaderEvent('modules.loader.show');\n    const deviceCode = getSelectedDeviceId(getState());\n    const selectedFilters = getSelectedFilters(getState());\n    const availableProductsKey = getCurrentSelectedAvailableProductsKey(getState());\n    RemoteApi.checkAndGetOffers(null, selectedFilters, availableProductsKey, deviceCode).then(response => {\n        bodyLoaderEvent('modules.loader.hide');\n        if(response.isPositive) {\n            dispatch({\n                type: ACTIONS.FETCH_OFFERS,\n                payload: response.offers,\n                selectedFilters: getSelectedFilters(getState()),\n                data: response\n            });\n            dispatch(addToCart());\n        }else{\n            dispatch(showError(response.description));\n        }\n    }).catch(error => {\n        bodyLoaderEvent('modules.loader.hide');\n        let errorMessage = (error.responseJSON && (error.responseJSON.message)) || \"Wystąpił błąd w trakcie dodania do koszyka\";\n        dispatch(showError(errorMessage));\n    });\n};\n\nconst getSelectedVasesForProposition = (state,proposition) =>{\n    let selectedVasesForProposition=getSelectedVases(state);\n    console.log(\"@@@\",selectedVasesForProposition);\n    if(selectedVasesForProposition && selectedVasesForProposition.find(propos => propos.propositionId==proposition.id)){\n        selectedVasesForProposition=selectedVasesForProposition.find(propos => propos.propositionId==proposition.id).vases;\n        return selectedVasesForProposition;\n    }\n    return [];\n}\nconst getIgnoredVasesForProposition = (state,proposition) =>{\n    if(!proposition || !proposition.addons || !proposition.addons.categorizedBonuses || !proposition.addons.categorizedBonuses[\"GratisPackageBonuses\"]|| !proposition.addons.categorizedBonuses[\"GratisPackageBonuses\"].services)\n        return [];\n    let defaults=proposition.addons.categorizedBonuses[\"GratisPackageBonuses\"].services.filter(service=>service.isDefault).map(service=>service.bonuses[0].code);\n    console.log(\"@@@\",defaults);\n    let selected=getSelectedVasesForProposition(state,proposition);\n    return defaults.filter(defaultBonus=>selected.indexOf(defaultBonus)<0);\n}\nexport const pushToCart = (selectedOffer, selectedProcess) => (dispatch, getState) => {\n    selectedOffer = selectedOffer || getSelectedOffer(getState())\n    selectedProcess = selectedProcess || getSelectedProcess(getState())\n    let selectedDeviceId = getSelectedDeviceId(getState())\n    let market = getMarketContext(getState())\n    //coś poszło nie tak i przerywamy dodawanie do koszyka\n    console.log(\"pushToCart\");\n    console.log({selectedOffer, selectedProcess, selectedDeviceId})\n    if (!(selectedOffer && selectedProcess)) {\n        console.log(\"Invalid parameters: cannot add product\");\n        OnlineUtils.removeParameterFromURL(\"autoadd\");\n        return\n    }\n    dispatch(clearMessage());\n    bodyLoaderEvent('modules.loader.show');\n    if (addToCartInProgress(getState())) {\n        return\n    }\n    let availableProductsKey = getCurrentSelectedAvailableProductsKey(getState()) || $('#availableProductsKey').val();\n\n    let args = {\n        rateplanId: selectedOffer.rateplanId,\n        propositionId: selectedOffer.id,\n        process: selectedProcess,\n        market: market,\n        availableProductsKey: availableProductsKey,\n        bonusesToAdd:getSelectedVasesForProposition(getState(),selectedOffer)||[],\n        defaultBonusesToIgnore:getIgnoredVasesForProposition(getState(),selectedOffer)||[]\n    }\n\n    console.log(\"@@@\",args);\n\n    if (selectedDeviceId) {\n        args.deviceVariant = selectedDeviceId\n    }\n\n    dispatch({\n        type: ACTIONS.POST_TO_CART_START,\n        args: args\n    })\n    RemoteApi.postToCart(args).then(\n        responseData => {\n            postToCart200Handler(dispatch, selectedOffer, responseData, args);\n            dispatch(fetchContractRole(availableProductsKey))\n        },\n        errorData => dispatch(addToCartError(selectedOffer, errorData))\n    )\n    OnlineUtils.removePwaSuflerContextFromSession();\n}\n\nconst pushGweAddEvents = (request, response) => {\n    GenesysWebEngagementUtils.pushAddToCartEvent(request.rateplanId, request.propositionId, response.bundleNo);\n    if(request.deviceVariant) {\n        GenesysWebEngagementUtils.pushAddToCartEvent(request.deviceVariant, request.propositionId, response.bundleNo);\n    }\n    if(response.vases)\n        response.vases.forEach(vas => GenesysWebEngagementUtils.pushAddVasToCartEvent(vas.productCode, request.propositionId, response.bundleNo))\n};\n\nexport const addToCartWithCounter = () => (dispatch, getState) => {\n\n    console.log(\"addToCartWithCounter\");\n    if (getPropositionListCount(getState()) == 0 && !isDuet(getState())) {\n\n        if (getPropositionListSoftBundleGroup(getState()) && getPropositionListSoftBundleGroup(getState()) == getSelectedSoftBundleGroup(getState())\n            && (isProductListPage(getState()) || isProductDetailsPage(getState()))\n        ) {\n            let market = getMarketContext(getState())\n            if (market == \"B2B\") {\n                console.log(\"OnlineUtils.saveInSessionStorage(\\\"dontUseDefaults\\\", true)\");\n                OnlineUtils.saveInSessionStorage(\"dontUseDefaults\", true);\n            } else if([OfferType.DATA].indexOf(getSelectedOfferType(getState())) > -1) {\n                dispatch(gotoCartSummary());\n                return;\n            }\n            window.location.href = OnlineUtils.getLastViewedOfferPage();\n        } else {\n            dispatch(gotoCartSummary());\n        }\n        return;\n    }\n    dispatch(pushToCart(null, null))\n}\n\n/*\n * Checks if HTTP200 wraps error message\n */\nconst postToCart200Handler = (dispatch, selectedOffer, responseData, requestData) => {\n    if (responseData && responseData.message && typeof responseData.message === \"string\") {\n        let errorData = {responseJSON: {message: responseData.message}}\n        dispatch(addToCartError(selectedOffer, errorData))\n    } else {\n        dispatch(addToCartSuccess(selectedOffer, responseData, requestData));\n        dispatch(clearVerificationData())\n    }\n}\n\nexport const redirectToCart = () => (dispatch, getState) => {\n    dispatch({type: ACTIONS.REDIRECT_TO_CART});\n    dispatch(clearPropositionId());\n    dispatch(clearLoyaltyLength());\n    dispatch(clearProcessType());\n //   dispatch(clearOfferType());\n    dispatch(clearPropositionListSoftBundleGroup());\n    dispatch(clearAddTerminalToOfferFromSessionStorage());\n    dispatch(clearDeviceInstalmentsCountFromSessionStorage());\n    dispatch(clearSelectedVases());\n\n    if(isDuet(getState())){\n        location.href = localStorage.getItem(\"suflerRedirectUrl\");\n    } else {\n        location.href = constants.url.cart\n    }\n}\n\n\nconst addToCartSuccess = (selectedOffer, responseData, requestData) => (dispatch, getState) => {\n    console.log(\"add to cart success\");\n    pushGweAddEvents(requestData, responseData);\n    dispatch(clearStayLoveRetentionMSISDN());\n    if(getAddFromLink(getState())){\n        dispatch(redirectToCart());\n        return\n    }\n\n    OPL.UI.fire(OPL.UI.EVENTS.modules.basket.counter.update, responseData.bundleCount, 'header');\n    dispatch({type: ACTIONS.POST_TO_CART_SUCCESS});\n    dispatch(propositionListCountDecrement());\n    dispatch({type: AUTHORIZATION_ADD_TO_CART_AFTER, value: false});\n\n\n    if(getProcessTypesIncludeAssignment(getState())){//due to NOR-166133\n        dispatch(redirectToCart());\n        return;\n    }\n\n\n    let propositionListSoftBundleGroup=getPropositionListSoftBundleGroup(getState());\n\n    if(!propositionListSoftBundleGroup\n        && !isProductListPage(getState()) && !isProductDetailsPage(getState()) && !isAccessoryListPage(getState())){\n        dispatch(setPropositionListSoftBundleGroup());\n        propositionListSoftBundleGroup=getPropositionListSoftBundleGroup(getState());\n    }\n\n\n    let offerCount = getPropositionListCount(getState());\n    let market = getMarketContext(getState());\n    const offerType =  getSelectedOfferType(getState());\n    const process = getSelectedProcessTypeValue(getState());\n\n    //duety lub b2b\n    if ((propositionListSoftBundleGroup && propositionListSoftBundleGroup == getSelectedSoftBundleGroup(getState()))\n        && (isProductListPage(getState()) || isProductDetailsPage(getState()) || isAccessoryListPage(getState()) )\n    ) {\n        if (market == \"B2B\") {//usunąć 1\n            OnlineUtils.saveInSessionStorage(\"dontUseDefaults\", true);\n        }\n        console.log(\"SoftBundle group for loop matches filter softBundleGroup\");\n        dispatch(clearPropositionId());\n        dispatch(clearLoyaltyLength());\n        dispatch(clearProcessType());\n        dispatch(clearOfferType());\n        if(OnlineUtils.getLastViewedOfferPage() === \"/pwa\" || market !== \"B2B\" && [OfferType.DATA].indexOf(offerType) > -1) {\n            dispatch(clearPropositionListSoftBundleGroup());\n            dispatch(redirectToCart());\n        } else {\n            if (OnlineUtils.getLastViewedOfferPage() && OnlineUtils.getLastViewedOfferPage() != \"\"){\n                window.location.href = OnlineUtils.getLastViewedOfferPage();\n            }else{\n                dispatch(redirectToCart());\n            }\n        }\n        return;\n    }\n    bodyLoaderEvent('modules.loader.hide');\n\n    if (getMarketContext(getState()) == \"B2B\" ) {\n        if(!propositionListSoftBundleGroup){\n            console.log(\"Market B2B simcount offerType not set\");\n            dispatch(redirectToCart());\n            return;\n        }\n        if(propositionListSoftBundleGroup != getSelectedSoftBundleGroup(getState())){\n            console.log(\"SoftBundle group for loop does not matches filter softBundleGroup\");\n            dispatch(redirectToCart());\n            return;\n\n        }\n        dispatch({type: CONFACTIONS.USE_DEFAULT_OFFER_TYPE, use: false});\n        dispatch({type: CONFACTIONS.USE_DEFAULT_PROCESS, use: false});\n        dispatch({type: CONFACTIONS.USE_DEFAULT_LOYALTY, use: false});\n        dispatch({type: CONFACTIONS.USE_DEFAULT_OFFER, use: false});\n        if (!OnlineUtils.isMnpApplication(process)) {\n            dispatch(clearPropositionId());\n            dispatch(clearLoyaltyLength());\n            dispatch(clearProcessType());\n            dispatch(clearOfferType());\n        }\n        dispatch(fetchMiniCart());\n        dispatch(requestLoggedCustomerData());\n        return;\n    }\n    if([OfferType.DATA].indexOf(offerType) === -1) {\n        if (offerCount == 0 && propositionListSoftBundleGroup &&  !(isProductListPage(getState()) || isProductDetailsPage(getState())|| isAccessoryListPage(getState()))){\n            dispatch(clearPropositionId());\n            dispatch(clearLoyaltyLength());\n            dispatch(clearProcessType());\n            dispatch(fetchMiniCart());\n            dispatch(requestLoggedCustomerData());\n            return;\n        }\n\n        if(propositionListSoftBundleGroup && !(isProductListPage(getState()) || isProductDetailsPage(getState()) || isAccessoryListPage(getState()))){\n            console.log(\"getPropositionListSoftBundleGroup(getState()) && !(isProductListPage(getState()) || isProductDetailsPage(getState()))\");\n            dispatch(fetchMiniCart());\n            dispatch(requestLoggedCustomerData());\n            return;\n        }\n    }\n\n    dispatch(clearPropositionListSoftBundleGroup());\n    dispatch(redirectToCart());\n\n\n};\nconst addToCartError = (selectedOffer, responseData) => (dispatch, getState) => {\n    dispatch({type: ACTIONS.POST_TO_CART_ERROR});\n    let msg = (responseData.responseJSON && (responseData.responseJSON.message)) || \"Wystąpił błąd w trakcie dodania do koszyka\";\n    bodyLoaderEvent('modules.loader.hide');\n    dispatch(showError(msg))\n};\n\nconst clearVerificationData = () => (dispatch, getState) => {\n    dispatch({type: ACTIONS.CLEAR_CHECK_MSISDN})\n};\n"],
    "file": "cart.js"
}