{
    "version": 3,
    "sources": ["../../../../../../../es6/eshop/modules/simfree/components/details/ProductDetailsPOSAndCartComponent.jsx"],
    "names": ["ProductDetailsPOSAndCartComponent", "props", "offerType", "DataLayerUtils", "pushSimfreeProductImpression", "findProductVariant", "deviceData", "price", "marketContext", "channels", "sales", "loggedEmployee", "assistedModeStateData", "assistedEmployee", "setSelectedDeviceData", "isFut", "getSogDocuments", "fetchPickupLastPos", "selectedVariant", "OPL", "UI", "on", "EVENTS", "modules", "modal", "closed", "closeMapModal", "bind", "i", "variantList", "length", "productId", "productVariant", "processType", "OfferType", "CONVERGENT", "magnumProcessType", "stockLevelsPerProcess", "stockLevel", "magnumStore", "possibleTransactions", "salesChannel", "OnlineUtils", "saveInSessionStorage", "constants", "JSON", "stringify", "getPriceFromProductPayments", "product", "first", "checkoutPrice", "priceGross", "monthly", "monthlyPrices", "map", "mp", "monthTo", "monthFrom", "reduce", "a", "b", "ProcessType", "SALE_OF_GOODS", "devicePaymentsData", "oneTimePayment", "originalGrossPrice", "selectedOffer", "deviceTotalPriceGross", "currentDevicePrice", "changedDevice", "bundleTemplateName", "isMobileButton", "addToCart", "handleSimfreeAddToCart", "DATA", "VOICE", "VOICE_LDF", "DATA_LDF", "SIMFREE_INST", "indexOf", "addTerminalToOfferBundleNo", "productsToRemove", "productCodeToRemove", "productsToAdd", "cartBundle", "bundle", "selectedOfferId", "addTerminalToOfferToCart", "selectOfferWithDevice", "selectedOfferPosition", "saveMagnumStore", "updateMagnumBundleTemplate", "addMagnumToCart", "cartIsFix", "setErrorCode", "cashInvoiceLimit", "cartInvoiceValue", "OraCashInvoiceLimitComponent", "openPopup", "onClickConfirm", "event", "preventDefault", "document", "getElementById", "click", "element", "getStockLevel", "pickupPosEnabled", "isConvergentOffer", "openMapModal", "lastPos", "uniqueName", "city", "address", "address2", "pushSimfreeAddToCart", "addToCartSimfree", "isDisableAddToCartButton", "handleAddToCart", "_renderDeliveryInformation", "React", "Component", "mapStateToProps", "productCodeByBundleNo", "magnumBundleTemplate", "state", "ownProps", "productName", "magnum", "assistModeStateData", "mapDispatchToProps", "dispatch", "productCode", "redirectUrl", "propositionId", "position", "offer", "errorCode"],
    "mappings": ";;;;;;;AAAA;AACA;AAUA;AAIA;AAGA;AACA;AACA;AAEA;;;;;;;;;;MAEMA,iC;;;;;AACF,+CAAYC,KAAZ,EAAmB;AAAA;AAAA,+BACTA,KADS;AAElB;;;;0CAEmB;AAChB,YAAG,KAAKA,KAAL,CAAWC,SAAX,KAA0B,SAA7B,EAAwC;AACpCC,kCAAeC,4BAAf,CAA4C,KAAKC,kBAAL,EAA5C,EAAuE,KAAKJ,KAAL,CAAWK,UAAX,CAAsBC,KAA7F,EAAmG,IAAnG,EAAyG,KAAKN,KAAL,CAAWO,aAApH,EAAmI,KAAKP,KAAL,CAAWQ,QAAX,CAAoBC,KAAvJ,EAA8J;AAACC,YAAAA,cAAc,EAAG,KAAKV,KAAL,CAAWW,qBAA7B;AAAoDC,YAAAA,gBAAgB,EAAG,KAAKZ,KAAL,CAAWW;AAAlF,WAA9J;AACH;;AACDT,gCAAeW,qBAAf,CAAqC,KAAKT,kBAAL,EAArC,EAJgB,CAKhB;;;AACA,YAAI,KAAKJ,KAAL,CAAWc,KAAX,IAAoB,OAAxB,EAAiC;AAC9B,eAAKd,KAAL,CAAWe,eAAX;AACF;;AACD,aAAKf,KAAL,CAAWgB,kBAAX,CAA8B,KAAKhB,KAAL,CAAWK,UAAX,CAAsBY,eAApD;AACAC,QAAAA,GAAG,CAACC,EAAJ,CAAOC,EAAP,CAAUF,GAAG,CAACC,EAAJ,CAAOE,MAAP,CAAcC,OAAd,CAAsBC,KAAtB,CAA4BC,MAAtC,EAA8C,KAAKC,aAAL,CAAmBC,IAAnB,CAAwB,IAAxB,CAA9C;AACH;;;2CAEoB;AACjB,aAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAK3B,KAAL,CAAWK,UAAX,CAAsBuB,WAAtB,CAAkCC,MAAtD,EAA8DF,CAAC,EAA/D,EAAmE;AAC/D,cAAI,KAAK3B,KAAL,CAAWK,UAAX,CAAsBuB,WAAtB,CAAkCD,CAAlC,EAAqCG,SAArC,IAAkD,KAAK9B,KAAL,CAAWiB,eAA7D,IACI,CAAC,KAAKjB,KAAL,CAAWiB,eAAZ,IAA+B,KAAKjB,KAAL,CAAWK,UAAX,CAAsBuB,WAAtB,CAAkCD,CAAlC,EAAqCG,SAArC,IAAkD,KAAK9B,KAAL,CAAWK,UAAX,CAAsBY,eAD/G,EACiI;AAC7H,mBAAO,KAAKjB,KAAL,CAAWK,UAAX,CAAsBuB,WAAtB,CAAkCD,CAAlC,CAAP;AACH;AACJ;AACJ;;;sCACc;AACX,YAAII,cAAc,GAAC,KAAK3B,kBAAL,EAAnB;AACA,YAAI4B,WAAW,GAAGC,uBAAUC,UAAV,KAAyB,KAAKlC,KAAL,CAAWC,SAApC,GAAgD,KAAKD,KAAL,CAAWmC,iBAA3D,GAA+E,KAAKnC,KAAL,CAAWgC,WAA5G;;AACA,YAAID,cAAc,CAACK,qBAAf,IAAwCL,cAAc,CAACK,qBAAf,CAAqCJ,WAArC,CAA5C,EAA8F;AAC1F,iBAAOD,cAAc,CAACK,qBAAf,CAAqCJ,WAArC,EAAkDK,UAAzD;AACH;;AAED,eAAO,KAAKjC,kBAAL,GAA0BiC,UAAjC;AACH;;;wCAEiB;AACd,YAAIC,WAAW,qBAAK,KAAKtC,KAAL,CAAWsC,WAAhB,CAAf;;AACAA,QAAAA,WAAW,CAACC,oBAAZ,CAAiCC,YAAjC,GAA8C,KAAKxC,KAAL,CAAWQ,QAAX,CAAoBC,KAAlE;;AACAgC,6BAAYC,oBAAZ,CAAiCC,qBAAUL,WAA3C,EAAwDM,IAAI,CAACC,SAAL,CAAeP,WAAf,CAAxD;AACH;;;8BAEM;AACH,iBAASQ,2BAAT,CAAqCC,OAArC,EAA6C;AACzC,cAAIC,KAAK,GAAGD,OAAO,CAACE,aAAR,CAAsBC,UAAtB,IAAoC,CAAhD;AACA,cAAIC,OAAO,GAAG,CAACJ,OAAO,CAACK,aAAR,IAAyB,EAA1B,EACbC,GADa,CACT,UAAAC,EAAE;AAAA,mBAAI,CAACA,EAAE,CAACC,OAAH,GAAaD,EAAE,CAACE,SAAhB,GAA4B,CAA7B,IAAkCF,EAAE,CAACJ,UAAzC;AAAA,WADO,EAEbO,MAFa,CAEN,UAACC,CAAD,EAAGC,CAAH;AAAA,mBAAOD,CAAC,GAACC,CAAT;AAAA,WAFM,EAEM,CAFN,CAAd;AAIA,iBAAOX,KAAK,GAAGG,OAAf;AACH;;AAED,YAAI7C,KAAK,GAAG,CAAZ;;AACA,YAAG,KAAKN,KAAL,CAAWgC,WAAX,KAA2B4B,qBAAYC,aAA1C,EAAwD;AACpDvD,UAAAA,KAAK,GAAG,KAAKF,kBAAL,GAA0B0D,kBAA1B,CAA6CC,cAA7C,CAA4DC,kBAApE;AACF,SAFF,MAEQ;AACJ1D,UAAAA,KAAK,GAAG,KAAKN,KAAL,CAAWiE,aAAX,CAAyB5D,UAAzB,CAAoC6D,qBAA5C;AACF;;AAED,YAAIC,kBAAkB,GAAI,KAAKnE,KAAL,CAAWoE,aAAX,IAA4BtB,2BAA2B,CAAC,KAAK9C,KAAL,CAAWoE,aAAZ,CAAxD,IAAuF,CAAhH;AAEA,eAAO9D,KAAK,GAAG6D,kBAAf;AACJ;;;sCAEerC,S,EAAWuC,kB,EAAoBC,c,EAAgB;AAAA;;AAE3D,YAAIC,SAAS,GAAG,SAAZA,SAAY,GAAM;AAClB,cAAG,KAAI,CAACvE,KAAL,CAAWgC,WAAX,KAA2B4B,qBAAYC,aAA1C,EAAwD;AACpD,YAAA,KAAI,CAACW,sBAAL,CAA4B1C,SAA5B,EAAuCuC,kBAAvC;AACH,WAFD,MAEO,IAAI,CAACpC,uBAAUwC,IAAX,EAAiBxC,uBAAUyC,KAA3B,EAAkCzC,uBAAU0C,SAA5C,EAAuD1C,uBAAU2C,QAAjE,EAA2E3C,uBAAU4C,YAArF,EAAmGC,OAAnG,CAA2G,KAAI,CAAC9E,KAAL,CAAWC,SAAtH,IAAmI,CAAC,CAAxI,EAA2I;AAC9I,gBAAG,CAAC,CAAC,KAAI,CAACD,KAAL,CAAW+E,0BAAhB,EAA2C;AACvC,kBAAIC,gBAAgB,GAAG,CAAC,KAAI,CAAChF,KAAL,CAAWiF,mBAAZ,CAAvB;AACA,kBAAIC,aAAa,GAAG,CAAC,KAAI,CAAClF,KAAL,CAAWiB,eAAZ,CAApB;AACA,kBAAIkE,UAAU,GAAG,KAAI,CAACnF,KAAL,CAAW+E,0BAA5B;AACA,kBAAIK,MAAM,GAAG,KAAI,CAACpF,KAAL,CAAWqF,eAAxB;;AACA,cAAA,KAAI,CAACrF,KAAL,CAAWsF,wBAAX,CAAoCF,MAApC,EAA4C,IAA5C,EAAkDD,UAAlD,EAA8DH,gBAA9D,EAAgFE,aAAhF;AACH,aAND,MAMO;AACH,cAAA,KAAI,CAAClF,KAAL,CAAWuF,qBAAX,CAAiC,KAAI,CAACvF,KAAL,CAAWqF,eAA5C,EAA4D,KAAI,CAACrF,KAAL,CAAWwF,qBAAvE,EAA8F,KAAI,CAACpF,kBAAL,GAA0B0B,SAAxH;AACH;AACJ,WAVM,MAUA,IAAGG,uBAAUC,UAAV,KAAyB,KAAI,CAAClC,KAAL,CAAWC,SAAvC,EAAkD;AACrD,YAAA,KAAI,CAACwF,eAAL;;AACA,gBAAG,CAAC,CAAC,KAAI,CAACzF,KAAL,CAAW+E,0BAAhB,EAA2C;AACvC,kBAAIC,iBAAgB,GAAG,CAAC,KAAI,CAAChF,KAAL,CAAWiF,mBAAZ,CAAvB;AACA,kBAAIC,cAAa,GAAG,CAAC,KAAI,CAAClF,KAAL,CAAWiB,eAAZ,CAApB;AACA,kBAAIkE,WAAU,GAAG,KAAI,CAACnF,KAAL,CAAW+E,0BAA5B;AACA,kBAAIK,OAAM,GAAG,KAAI,CAACpF,KAAL,CAAW0F,0BAAxB;;AACA,cAAA,KAAI,CAAC1F,KAAL,CAAWsF,wBAAX,CAAoCF,OAApC,EAA4C,IAA5C,EAAkDD,WAAlD,EAA8DH,iBAA9D,EAAgFE,cAAhF;AACH,aAND,MAMO;AACH,cAAA,KAAI,CAAClF,KAAL,CAAW2F,eAAX,CAA2B7D,SAA3B;AACH;AACJ;AACJ,SAzBD;;AA2BA,YAAG,KAAK9B,KAAL,CAAW4F,SAAX,IAAwB,KAAK5F,KAAL,CAAWQ,QAAnC,IAA+C,KAAKR,KAAL,CAAWQ,QAAX,CAAoBC,KAApB,IAA6B,KAA/E,EAAqF;AACjF,eAAKT,KAAL,CAAW6F,YAAX,CAAwB,WAAxB;AACA;AACH;;AAED,YAAG,KAAK7F,KAAL,CAAW8F,gBAAX,IAAgC,KAAK9F,KAAL,CAAW+F,gBAAX,GAA8B,KAAKzF,KAAL,EAA/B,GAA+C,KAAKN,KAAL,CAAW8F,gBAA5F,EAA6G;AACvGE,gDAA6BC,SAA7B,CAAuC;AACnCC,YAAAA,cAAc,EAAE3B;AADmB,WAAvC;AAGL,SAJD,MAIO;AACHA,UAAAA,SAAS;AACZ;AACJ;;;mCAEY4B,K,EAAO;AAChBA,QAAAA,KAAK,CAACC,cAAN;AACAC,QAAAA,QAAQ,CAACC,cAAT,CAAwB,gBAAxB,EAA0CC,KAA1C;AACH;;;sCAEe;AACZ,aAAKvG,KAAL,CAAWgB,kBAAX,CAA8B,KAAKhB,KAAL,CAAWK,UAAX,CAAsBY,eAApD;AACH;;;mDAE4B;AAAA;;AACzB,YAAIuF,OAAO,gBAAG;AAAK,UAAA,SAAS,EAAC;AAAf,UAAd;;AACA,YAAI,KAAKC,aAAL,OAAyB,CAA7B,EAAgC;AAC5BD,UAAAA,OAAO,gBAAG;AACN,YAAA,SAAS,EAAC;AADJ,0BAEN;AAAK,YAAA,SAAS,EAAC;AAAf,0BACI;AAAG,YAAA,SAAS,EAAC;AAAb,YADJ,eAEI;AAAG,YAAA,SAAS,EAAC;AAAb,+CAFJ,CAFM,CAAV;AAOH,SARD,MAQO,IAAI,KAAKxG,KAAL,CAAW0G,gBAAf,EAAiC;AACpCF,UAAAA,OAAO,gBAAG;AACN,YAAA,SAAS,EAAC;AADJ,0BAEN;AAAK,YAAA,MAAM,EAAE,KAAKG,iBAAL;AAAb,0BACI;AAAG,YAAA,SAAS,EAAC;AAAb,4CADJ,eAEI;AAAG,YAAA,IAAI,EAAC,GAAR;AAAY,YAAA,SAAS,EAAC,iCAAtB;AACG,YAAA,OAAO,EAAE,iBAAAR,KAAK;AAAA,qBAAI,MAAI,CAACS,YAAL,CAAkBT,KAAlB,CAAJ;AAAA;AADjB,aACgD,KAAKnG,KAAL,CAAW6G,OAAX,CAAmBC,UAAnB,GAAgC,OAAhC,GAA0C,cAD1F,CAFJ,CAFM,EAOL,KAAK9G,KAAL,CAAW6G,OAAX,CAAmBC,UAAnB,iBACG,wCAAI,KAAK9G,KAAL,CAAW6G,OAAX,CAAmBE,IAAvB,QAA+B,KAAK/G,KAAL,CAAW6G,OAAX,CAAmBG,OAAlD,OAA4D,KAAKhH,KAAL,CAAW6G,OAAX,CAAmBI,QAA/E,CARE,CAAV;AAWH;;AACD,eAAOT,OAAP;AACH;;;6CAEsB1E,S,EAAWuC,kB,EAAoB;AAClD,YAAMpD,eAAe,GAAG,KAAKb,kBAAL,EAAxB;;AACAF,gCAAegH,oBAAf,CAAoCjG,eAApC,EAAqDA,eAAe,IAAIA,eAAe,CAAC6C,kBAAhB,CAAmCC,cAAnC,CAAkDzD,KAA1H,EAAiI,KAAKN,KAAL,CAAWO,aAA5I,EAA2J,KAAKP,KAAL,CAAWQ,QAAX,CAAoBC,KAA/K,EAAsL;AAACC,UAAAA,cAAc,EAAG,KAAKV,KAAL,CAAWW,qBAA7B;AAAoDC,UAAAA,gBAAgB,EAAG,KAAKZ,KAAL,CAAWW;AAAlF,SAAtL;;AACA,aAAKX,KAAL,CAAWmH,gBAAX,CAA4BrF,SAA5B,EAAuCuC,kBAAvC;AACH;;;0CAEkB;AACf,eAAO,KAAKrE,KAAL,CAAWC,SAAX,KAA0B,YAAjC;AACH;;;+BAEQ;AAEL,4BACI;AAAK,UAAA,SAAS,EAAC;AAAf,wBACI;AAAK,UAAA,SAAS,EAAC;AAAf,wBACI,6BAAC,8BAAD;AAAW,UAAA,IAAI,EAAC,SAAhB;AAA0B,UAAA,SAAS,EAAC,wDAApC;AACW,UAAA,QAAQ,EAAE,KAAKD,KAAL,CAAWoH,wBAAX,IAAyC,KAAKX,aAAL,OAAyB,CADvF;AAEW,UAAA,OAAO,EAAE,KAAKY,eAAL,CAAqB3F,IAArB,CAA0B,IAA1B,EAAgC,KAAKtB,kBAAL,GAA0B0B,SAA1D,EAAqE,KAAK9B,KAAL,CAAWK,UAAX,CAAsBgE,kBAA3F,EAA+G,IAA/G;AAFpB,wBADJ,CADJ,EAQK,KAAKiD,0BAAL,EARL,eASI;AACI,UAAA,SAAS,EAAC;AADd,wBAEI,6BAAC,8BAAD;AAAW,UAAA,IAAI,EAAC,SAAhB;AAA0B,UAAA,SAAS,EAAC,wDAApC;AACW,UAAA,QAAQ,EAAE,KAAKtH,KAAL,CAAWoH,wBAAX,IAAwC,KAAKX,aAAL,OAAyB,CADtF;AAEW,UAAA,OAAO,EAAE,KAAKY,eAAL,CAAqB3F,IAArB,CAA0B,IAA1B,EAAgC,KAAKtB,kBAAL,GAA0B0B,SAA1D,EAAqE,KAAK9B,KAAL,CAAWK,UAAX,CAAsBgE,kBAA3F,EAA+G,KAA/G;AAFpB,wBAFJ,CATJ,eAiBI,6BAAC,oCAAD,OAjBJ,eAkBI,6BAAC,wCAAD,OAlBJ,CADJ;AAsBH;;;IAhL2CkD,eAAMC,S;;AAmLtD,MAAMC,eAAe,GAAG,SAAlBA,eAAkB,GAAM;AAC1B,QAAMC,qBAAqB,GAAG,2CAA9B;AACA,QAAMC,oBAAoB,GAAG,0CAA7B;AAEA,WAAO,UAACC,KAAD,EAAQC,QAAR;AAAA,aAAsB;AACzBC,QAAAA,WAAW,EAAE,+BAAeF,KAAf,CADY;AAEzB3G,QAAAA,eAAe,EAAE,mCAAmB2G,KAAnB,CAFQ;AAGzBvC,QAAAA,eAAe,EAAE,gCAAmBuC,KAAnB,CAHQ;AAIzB3D,QAAAA,aAAa,EAAE,8BAAiB2D,KAAjB,CAJU;AAKzB3H,QAAAA,SAAS,EAAE,mCAAqB2H,KAArB,CALc;AAMzB5F,QAAAA,WAAW,EAAC,0CAA4B4F,KAA5B,CANa;AAOzBpC,QAAAA,qBAAqB,EAAC,sCAAyBoC,KAAzB,CAPG;AAQzBR,QAAAA,wBAAwB,EAAE,wCAAwBQ,KAAxB,CARD;AASzBf,QAAAA,OAAO,EAAE,2BAAWe,KAAX,CATgB;AAUzBlB,QAAAA,gBAAgB,EAAE,mCAAmBkB,KAAnB,CAVO;AAWzB7C,QAAAA,0BAA0B,EAAE,+CAA8B6C,KAA9B,CAXH;AAYzB3C,QAAAA,mBAAmB,EAAEyC,qBAAqB,CAACE,KAAD,EAAQC,QAAQ,CAAC9C,0BAAjB,CAZjB;AAazBzC,QAAAA,WAAW,EAAEsF,KAAK,CAACG,MAbM;AAczBrC,QAAAA,0BAA0B,EAAEiC,oBAAoB,CAACC,KAAD,EAAQC,QAAQ,CAAC9C,0BAAjB,CAdvB;AAezBiD,QAAAA,mBAAmB,EAAG,wCAAuBJ,KAAvB,CAfG;AAgBzBrH,QAAAA,aAAa,EAAE,gCAAiBqH,KAAjB,CAhBU;AAiBzB9B,QAAAA,gBAAgB,EAAE,oCAAoB8B,KAApB,CAjBO;AAkBzB7B,QAAAA,gBAAgB,EAAE,oCAAoB6B,KAApB,CAlBO;AAmBzBxD,QAAAA,aAAa,EAAE,kCAAiBwD,KAAjB,CAnBU;AAoBzBzF,QAAAA,iBAAiB,EAAE,0CAAyByF,KAAzB;AApBM,OAAtB;AAAA,KAAP;AAsBH,GA1BD;;AA4BA,MAAMK,kBAAkB,GAAG,SAArBA,kBAAqB,CAACC,QAAD;AAAA,WAAe;AACtCf,MAAAA,gBAAgB,EAAE,0BAACgB,WAAD,EAAc9D,kBAAd,EAAkC+D,WAAlC;AAAA,eAAkDF,QAAQ,CAAC,oBAAUC,WAAV,EAAuB9D,kBAAvB,EAA2C+D,WAA3C,CAAD,CAA1D;AAAA,OADoB;AAEtC7C,MAAAA,qBAAqB,EAAE,+BAAC8C,aAAD,EAAgBC,QAAhB,EAA0BH,WAA1B;AAAA,eAA0CD,QAAQ,CAAC,0BAAYG,aAAZ,EAA2BC,QAA3B,EAAqCH,WAArC,CAAD,CAAlD;AAAA,OAFe;AAGtCpH,MAAAA,eAAe,EAAE;AAAA,eAAMmH,QAAQ,CAAC,+BAAD,CAAd;AAAA,OAHqB;AAItClH,MAAAA,kBAAkB,EAAE,4BAACmH,WAAD;AAAA,eAAiBD,QAAQ,CAAC,6BAAmBC,WAAnB,CAAD,CAAzB;AAAA,OAJkB;AAKtCxC,MAAAA,eAAe,EAAE,yBAACwC,WAAD;AAAA,eAAiBD,QAAQ,CAAC,2BAAgBC,WAAhB,CAAD,CAAzB;AAAA,OALqB;AAMtC7C,MAAAA,wBAAwB,EAAE,kCAACF,MAAD,EAASmD,KAAT,EAAgBpD,UAAhB,EAA4BH,gBAA5B,EAA8CE,aAA9C;AAAA,eAAgEgD,QAAQ,CAAC,iCAAsB9C,MAAtB,EAA8BmD,KAA9B,EAAqCpD,UAArC,EAAiDH,gBAAjD,EAAmEE,aAAnE,CAAD,CAAxE;AAAA,OANY;AAOtCW,MAAAA,YAAY,EAAE,sBAAC2C,SAAD;AAAA,eAAeN,QAAQ,CAAC,uBAAaM,SAAb,CAAD,CAAvB;AAAA;AAPwB,KAAf;AAAA,GAA3B;;iBAUe,yBAAQf,eAAR,EAAyBQ,kBAAzB,EAA6ClI,iCAA7C,C",
    "sourcesContent": ["import React from \"react\";\nimport DataLayerUtils from \"eshop/utils/DataLayerUtils\";\nimport {OraButton} from \"eshop/components/OraCommonComponents\";\n\nimport {connect} from \"react-redux\";\nimport {addToCart, getSimfreeDocuments,fetchPickupLastPos, setErrorCode} from \"eshop/modules/simfree/actions/app\";\nimport {getProductName, getSelectedVariant, getStateAddToCartButton, getLastPos, isPickupPosEnabled, getCashInvoiceLimit, getCartInvoiceValue} from \"eshop/modules/simfree/selectors\";\nimport {getSelectedOfferId,getSelectedOfferPosition, getSelectedOffer} from 'eshop/modules/configurator/selectors/offers';\nimport {selectOffer} from 'eshop/modules/configurator/actions/offers';\nimport {getSelectedOfferType,getSelectedProcessTypeValue} from \"eshop/modules/configurator/selectors/filters\";\nimport {addMagnumToCart} from \"../../actions/app\";\nimport OfferType from \"../../constants/OfferTypeEnum\";\nimport {getAddTerminalToOfferBundleNo, getProductCodeByBundleNo, getMagnumBundleTemplate, getChangedDevice} from \"eshop/modules/cart/selectors\";\nimport {updateTerminalToOffer} from \"eshop/modules/cart/actions/cart\";\nimport {constants} from \"eshop/modules/configurator/constants\";\nimport OnlineUtils from  \"eshop/utils/OnlineUtils\";\nimport {getAssistModeStateData} from \"../../../checkout/selectors\";\nimport {getMarketContext} from \"../../../configurator/selectors/filters\";\nimport ProcessType from \"../../../cart/enum/ProcessType\";\nimport OraCashInvoiceLimitComponent from \"eshop/modules/simfree/components/modals/OraCashInvoiceLimitComponent\";\nimport OraVasPacketPickerComponent from \"eshop/modules/simfree/components/modals/OraVasPacketPickerComponent\";\nimport {getMagnumTerminalProcess} from \"eshop/modules/magnum2/selectors\"\nimport ProductDetailsDeliveryComponent from \"./ProductDetailsDeliveryComponent\";\n\nclass ProductDetailsPOSAndCartComponent extends React.Component {\n    constructor(props) {\n        super(props);\n    }\n\n    componentDidMount() {\n        if(this.props.offerType  === \"SIMFREE\") {\n            DataLayerUtils.pushSimfreeProductImpression(this.findProductVariant(), this.props.deviceData.price,null, this.props.marketContext, this.props.channels.sales, {loggedEmployee : this.props.assistedModeStateData, assistedEmployee : this.props.assistedModeStateData});\n        }\n        DataLayerUtils.setSelectedDeviceData(this.findProductVariant())\n        // TODO: FIXME: remove after FUT tests finish.\n        if (this.props.isFut == \"false\") {\n           this.props.getSogDocuments();\n        }\n        this.props.fetchPickupLastPos(this.props.deviceData.selectedVariant);\n        OPL.UI.on(OPL.UI.EVENTS.modules.modal.closed, this.closeMapModal.bind(this));\n    }\n\n    findProductVariant() {\n        for (var i = 0; i < this.props.deviceData.variantList.length; i++) {\n            if (this.props.deviceData.variantList[i].productId == this.props.selectedVariant\n                || (!this.props.selectedVariant && this.props.deviceData.variantList[i].productId == this.props.deviceData.selectedVariant)) {\n                return this.props.deviceData.variantList[i];\n            }\n        }\n    }\n    getStockLevel(){\n        let productVariant=this.findProductVariant();\n        let processType = OfferType.CONVERGENT === this.props.offerType ? this.props.magnumProcessType : this.props.processType;\n        if (productVariant.stockLevelsPerProcess && productVariant.stockLevelsPerProcess[processType]){\n            return productVariant.stockLevelsPerProcess[processType].stockLevel;\n        }\n\n        return this.findProductVariant().stockLevel\n    }\n\n    saveMagnumStore() {\n        let magnumStore={...this.props.magnumStore};\n        magnumStore.possibleTransactions.salesChannel=this.props.channels.sales;\n        OnlineUtils.saveInSessionStorage(constants.magnumStore, JSON.stringify(magnumStore));\n    }\n\n    price(){\n        function getPriceFromProductPayments(product){\n            let first = product.checkoutPrice.priceGross || 0\n            let monthly = (product.monthlyPrices || [])\n            .map(mp => (mp.monthTo - mp.monthFrom + 1) * mp.priceGross)\n            .reduce((a,b)=>a+b, 0)\n\n            return first + monthly;\n        }\n\n        let price = 0;\n        if(this.props.processType === ProcessType.SALE_OF_GOODS){\n            price = this.findProductVariant().devicePaymentsData.oneTimePayment.originalGrossPrice;\n         } else {\n            price = this.props.selectedOffer.deviceData.deviceTotalPriceGross\n         }\n\n         let currentDevicePrice = (this.props.changedDevice && getPriceFromProductPayments(this.props.changedDevice)) || 0;\n\n         return price - currentDevicePrice\n    }\n\n    handleAddToCart(productId, bundleTemplateName, isMobileButton) {\n\n        var addToCart = () => {\n            if(this.props.processType === ProcessType.SALE_OF_GOODS){\n                this.handleSimfreeAddToCart(productId, bundleTemplateName);\n            } else if ([OfferType.DATA, OfferType.VOICE, OfferType.VOICE_LDF, OfferType.DATA_LDF, OfferType.SIMFREE_INST].indexOf(this.props.offerType) > -1) {\n                if(!!this.props.addTerminalToOfferBundleNo){\n                    let productsToRemove = [this.props.productCodeToRemove];\n                    let productsToAdd = [this.props.selectedVariant];\n                    let cartBundle = this.props.addTerminalToOfferBundleNo;\n                    let bundle = this.props.selectedOfferId;\n                    this.props.addTerminalToOfferToCart(bundle, null, cartBundle, productsToRemove, productsToAdd)\n                } else {\n                    this.props.selectOfferWithDevice(this.props.selectedOfferId,this.props.selectedOfferPosition, this.findProductVariant().productId)\n                }\n            } else if(OfferType.CONVERGENT === this.props.offerType) {\n                this.saveMagnumStore();\n                if(!!this.props.addTerminalToOfferBundleNo){\n                    let productsToRemove = [this.props.productCodeToRemove];\n                    let productsToAdd = [this.props.selectedVariant];\n                    let cartBundle = this.props.addTerminalToOfferBundleNo;\n                    let bundle = this.props.updateMagnumBundleTemplate;\n                    this.props.addTerminalToOfferToCart(bundle, null, cartBundle, productsToRemove, productsToAdd);\n                } else {\n                    this.props.addMagnumToCart(productId);\n                }\n            }\n        }\n\n        if(this.props.cartIsFix && this.props.channels && this.props.channels.sales == \"WWW\"){\n            this.props.setErrorCode(\"fixincart\");\n            return;\n        }\n\n        if(this.props.cashInvoiceLimit && (this.props.cartInvoiceValue + this.price()) > this.props.cashInvoiceLimit){\n              OraCashInvoiceLimitComponent.openPopup({\n                  onClickConfirm: addToCart\n              });\n        } else {\n            addToCart();\n        }\n    }\n\n    openMapModal(event) {\n        event.preventDefault();\n        document.getElementById('pickupPosModal').click();\n    }\n\n    closeMapModal() {\n        this.props.fetchPickupLastPos(this.props.deviceData.selectedVariant);\n    }\n\n    _renderDeliveryInformation() {\n        let element = <div className=\"l-col l-col-small-12 l-col-medium-8 l-col-8  u-medium-padding-left-l u-medium-padding-right-l u-small-padding-all-l-xl\"></div>;\n        if (this.getStockLevel() === 0) {\n            element = <div\n                className=\"l-col l-col-small-12 l-col-medium-8 l-col-8   u-padding-left-l u-medium-padding-top-l u-medium-padding-left-l-xl u-medium-padding-right-l-xl u-small-padding-top-m u-small-padding-right-l-xl u-small-padding-left-l-xl\">\n                <div className=\"u-display_table u-w-auto u-padding-s\">\n                    <p className=\"u-display_table-cell g-icon g-icon--info g-icon--xs-s u-padding-right-m\"></p>\n                    <p className=\"u-display_table-cell\">Model chwilowo niedostępny</p>\n                </div>\n            </div>\n        } else if (this.props.pickupPosEnabled) {\n            element = <div\n                className=\"l-col l-col-small-12 l-col-medium-8 l-col-8  u-padding-left-l u-medium-padding-left-l-xl u-medium-padding-right-l-xl u-small-padding-top-m u-small-padding-left-l-xl u-small-padding-right-l-xl\">\n                <div hidden={this.isConvergentOffer()}>\n                    <p className=\"u-font-bold u-inline-block u-medium-padding-top-l\">Darmowy odbiór w salonie.</p>\n                    <a href=\"#\" className=\"u-inline-block u-padding-left-l\"\n                       onClick={event => this.openMapModal(event)}>{this.props.lastPos.uniqueName ? 'Zmień' : 'Znajdź salon'}</a>\n                </div>\n                {this.props.lastPos.uniqueName &&\n                    <p>{this.props.lastPos.city}, {this.props.lastPos.address} {this.props.lastPos.address2}</p>\n                }\n            </div>;\n        }\n        return element;\n    }\n\n    handleSimfreeAddToCart(productId, bundleTemplateName) {\n        const selectedVariant = this.findProductVariant();\n        DataLayerUtils.pushSimfreeAddToCart(selectedVariant, selectedVariant && selectedVariant.devicePaymentsData.oneTimePayment.price, this.props.marketContext, this.props.channels.sales, {loggedEmployee : this.props.assistedModeStateData, assistedEmployee : this.props.assistedModeStateData});\n        this.props.addToCartSimfree(productId, bundleTemplateName);\n    }\n\n    isConvergentOffer(){\n        return this.props.offerType  === \"CONVERGENT\";\n    }\n\n    render() {\n\n        return (\n            <div className=\"l-row u-padding-top-l u-small-no-padding-top\">\n                <div className=\"l-col l-col-small-12 u-large-hide u-padding u-padding-right-l-xl u-padding-left-l-xl u-small-padding-top-m\">\n                    <OraButton type=\"primary\" className=\"o-btn opl-btn opl-btn--primary opl-btn--medium u-w-100\"\n                               disabled={this.props.isDisableAddToCartButton ||  (this.getStockLevel() === 0)}\n                               onClick={this.handleAddToCart.bind(this, this.findProductVariant().productId, this.props.deviceData.bundleTemplateName, true)}>\n                        Do koszyka\n                    </OraButton>\n                </div>\n                {this._renderDeliveryInformation()}\n                <div\n                    className=\"l-col l-col-small-12 l-col-medium-4 l-col-4 u-small-hide u-padding u-medium-hide u-padding-right-l\">\n                    <OraButton type=\"primary\" className=\"o-btn opl-btn opl-btn--primary opl-btn--medium u-w-100\"\n                               disabled={this.props.isDisableAddToCartButton || (this.getStockLevel() === 0)}\n                               onClick={this.handleAddToCart.bind(this, this.findProductVariant().productId, this.props.deviceData.bundleTemplateName, false)}>\n                        Do koszyka\n                    </OraButton>\n                </div>\n                <OraVasPacketPickerComponent />\n                <ProductDetailsDeliveryComponent />\n            </div>\n        )\n    }\n}\n\nconst mapStateToProps = () => {\n    const productCodeByBundleNo = getProductCodeByBundleNo();\n    const magnumBundleTemplate = getMagnumBundleTemplate();\n\n    return (state, ownProps) => ({\n        productName: getProductName(state),\n        selectedVariant: getSelectedVariant(state),\n        selectedOfferId: getSelectedOfferId(state),\n        selectedOffer: getSelectedOffer(state),\n        offerType: getSelectedOfferType(state),\n        processType:getSelectedProcessTypeValue(state),\n        selectedOfferPosition:getSelectedOfferPosition(state),\n        isDisableAddToCartButton: getStateAddToCartButton(state),\n        lastPos: getLastPos(state),\n        pickupPosEnabled: isPickupPosEnabled(state),\n        addTerminalToOfferBundleNo: getAddTerminalToOfferBundleNo(state),\n        productCodeToRemove: productCodeByBundleNo(state, ownProps.addTerminalToOfferBundleNo),\n        magnumStore: state.magnum,\n        updateMagnumBundleTemplate: magnumBundleTemplate(state, ownProps.addTerminalToOfferBundleNo),\n        assistModeStateData : getAssistModeStateData(state),\n        marketContext: getMarketContext(state),\n        cashInvoiceLimit: getCashInvoiceLimit(state),\n        cartInvoiceValue: getCartInvoiceValue(state),\n        changedDevice: getChangedDevice(state),\n        magnumProcessType: getMagnumTerminalProcess(state)\n    });\n};\n\nconst mapDispatchToProps = (dispatch) => ({\n    addToCartSimfree: (productCode, bundleTemplateName, redirectUrl) => dispatch(addToCart(productCode, bundleTemplateName, redirectUrl)),\n    selectOfferWithDevice: (propositionId, position, productCode) => dispatch(selectOffer(propositionId, position, productCode)),\n    getSogDocuments: () => dispatch(getSimfreeDocuments()),\n    fetchPickupLastPos: (productCode) => dispatch(fetchPickupLastPos(productCode)),\n    addMagnumToCart: (productCode) => dispatch(addMagnumToCart(productCode)),\n    addTerminalToOfferToCart: (bundle, offer, cartBundle, productsToRemove, productsToAdd) => dispatch(updateTerminalToOffer(bundle, offer, cartBundle, productsToRemove, productsToAdd)),\n    setErrorCode: (errorCode) => dispatch(setErrorCode(errorCode))\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ProductDetailsPOSAndCartComponent);\n"],
    "file": "ProductDetailsPOSAndCartComponent.js"
}