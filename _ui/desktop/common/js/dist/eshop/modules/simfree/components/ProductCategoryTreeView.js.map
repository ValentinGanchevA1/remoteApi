{
    "version": 3,
    "sources": ["../../../../../../es6/eshop/modules/simfree/components/ProductCategoryTreeView.jsx"],
    "names": ["count", "ProductCategoryTreeView", "props", "console", "log", "queryParams", "fetchConfiguration", "producer", "selectedCategory", "window", "location", "href", "indexOf", "changeCategory", "code", "name", "getFilters", "initiallyFiltered", "initializeFilters", "document", "getElementById", "isModal", "hasAttribute", "OPL", "UI", "initModules", "$", "sticker", "changeStickerFilter", "isNaN", "priceFrom", "changePriceFilter", "priceTo", "esim", "changeEsimFilterAttributeIfAvailable", "products", "setProductsFilter", "category", "event", "preventDefault", "changeCurrentPage", "reloadTree", "reloadMatchToFilter", "OnlineUtils", "resetUrlPathWithoutReload", "element", "checkSubcategory", "subCategories", "length", "result", "map", "pos", "index", "indent", "counter", "categoryNameUrl", "replace", "checkSelectedCategory", "e", "clickCategory", "display", "renderTree", "JSON", "stringify", "hideOtherElements", "duration", "renderCategory", "currentId", "id", "scrollToSelected", "triggerSelector", "initiallyExpanded", "title", "categories", "React", "Component"],
    "mappings": "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",
    "sourcesContent": ["import React from \"react\";\nimport {changeEsimFilterAttributeIfAvailable} from \"../actions/filter\";\nimport OnlineUtils from \"eshop/utils/OnlineUtils\";\n\nlet count = 0;\nexport default class ProductCategoryTreeView extends React.Component {\n\n    constructor(props) {\n        super(props);\n        console.log(\"ProductCategoryTreeView CONSTRUCTOR\", this.props.queryParams);\n        this.props.fetchConfiguration(this.props.queryParams.producer, this.props.queryParams.selectedCategory, this.props.queryParams);\n        if(window.location.href.indexOf(\"akcesoria\") !== -1 ){\n            this.props.changeCategory({code: \"accesories\", name: \"Akcesoria\"});\n        }\n        if(!!this.props.selectedCategory && this.props.selectedCategory!='0')\n            this.props.getFilters(this.props.selectedCategory);\n        if(!this.props.initiallyFiltered) {\n            this.initializeFilters();\n        }\n        console.log(\"ProductCategoryTreeView CONSTRUCTOR current count = \" + count);\n    }\n\n    componentDidMount() {\n    }\n\n    componentDidUpdate(){\n        if(document.getElementById(\"opl-tree-expander-main\"+ this.props.isModal) != null && !document.getElementById(\"opl-tree-expander-main\"+ this.props.isModal).hasAttribute(\"data-js-processed\")) {\n            OPL.UI.initModules($('#ora-product-category-tree-component')[0]);\n        }\n    }\n    initializeFilters(){\n        if(this.props.queryParams.sticker) {\n            this.props.changeStickerFilter(this.props.queryParams.sticker);\n        }\n        if(!isNaN(this.props.queryParams.priceFrom)){\n            this.props.changePriceFilter(\"from\", this.props.queryParams.priceFrom);\n        }\n        if(!isNaN(this.props.queryParams.priceTo)){\n            this.props.changePriceFilter(\"to\", this.props.queryParams.priceTo);\n        }\n        if (this.props.queryParams.esim) {\n            this.props.changeEsimFilterAttributeIfAvailable(this.props.queryParams.esim, this.props.queryParams.selectedCategory || \"Phones and Devices\");\n        }\n        if (this.props.queryParams.products) {\n            this.props.setProductsFilter(this.props.queryParams.products);\n        }\n    }\n\n    clickCategory(category, event){\n        event.preventDefault();\n        this.props.changeCurrentPage(1);\n        this.props.changeCategory(category);\n        this.props.getFilters(category.code);\n        this.props.reloadTree();\n        this.props.reloadMatchToFilter();\n        OnlineUtils.resetUrlPathWithoutReload();\n    }\n\n    checkSelectedCategory(element) {\n        if(this.props.selectedCategory===element.code){\n            return true;\n        }\n        return this.checkSubcategory(element);\n    }\n\n    checkSubcategory(element) {\n        if(!element)\n            return false;\n        if(element.subCategories.length===0)\n            return false;\n\n        let result = false;\n\n        element.subCategories.map((pos, index) => {\n            if(pos.code === this.props.selectedCategory) {\n                result = true;\n                return true;\n            }\n\n            result = result || this.checkSubcategory(pos);\n        });\n\n        return result;\n    }\n\n    renderCategory(indent, element, index){\n        if(element.counter === 0)\n            return false;\n        const name = element.categoryNameUrl ? element.categoryNameUrl : element.name.replace(/ /g,'-');\n        return (\n            <li className={\"u-spacing\"} key={index+element.code}>\n                <div className={\"js-expander__container\" + indent + (this.checkSelectedCategory(element) ? \" is-expanded\" : \"\")}>\n                    <a href={\"/sklep/\" + name} aria-expanded={this.props.selectedCategory === element.code}\n                        className={(this.props.selectedCategory === element.code ? \"g-brand-c\" : \"u-font-normal\") + \" u-text-decoration-none u-spacing-right-s js-expander__trigger\" + indent}\n                        onClick={e => {\n                            this.clickCategory(element, e)\n                        }}>\n                        {element.name}\n                    </a>\n                    <span className=\"g-gray4-c u-font-small\">({element.counter})</span>\n                    <div style={{display: (this.checkSelectedCategory(element) ? \"block\" : \"none\")}} className={\"js-expander__content\"+indent}>\n                        {this.renderTree(indent, element, index)}\n                    </div>\n                </div>\n            </li>\n            );\n    }\n\n    renderTree(indent, element, index) {\n        if(!element)\n            return;\n        if(element.subCategories.length===0)\n            return;\n        return (\n            <div>\n                <div data-js-module={\"core/modules/expander\"} data-js-options={JSON.stringify({\n                    hideOtherElements: true,\n                    duration: 300,\n                    \"contentSelector\": \".js-expander__content\" + (indent + 1),\n                    \"triggerSelector\": \".js-expander__trigger\" + (indent + 1),\n                    \"parentClass\": \"js-expander__container\" + (indent + 1),\n                })}>\n                    <ul className={indent === 0 ? \"\" : \"u-padding-left-l u-padding-top\"}>\n                            {element.subCategories.map((pos, index) => {\n                                  return this.renderCategory(indent+1, pos, index);\n                            })}\n                    </ul>\n                </div>\n            </div>\n        );\n\n    }\n\n    render() {\n        let currentId = count;\n        count++;\n        return (\n            <div id={\"opl-tree-expanders\"+currentId+ this.props.isModal} className=\"opl-category-tree__list u-spacing-l\">\n                <div id={this.props.id || \"opl-tree-expander-main\" + this.props.isModal} data-js-module=\"common/modules/opl-expander\"\n                     data-js-options={JSON.stringify({scrollToSelected: false, triggerSelector: \".opl-section__trigger\",\n                         \"contentSelector\": \".opl-section__content\", \"parentClass\": \"opl-section\"})}\n                     role=\"tablist\" aria-multiselectable=\"false\">\n\n                    <div className={\"opl-section u-no-padding\" + (this.props.initiallyExpanded? \" is-expanded\" : \"\")}\n                        aria-expanded={(this.props.initiallyExpanded? \"true\" : \"false\")}>\n                        <div className=\"opl-section__header u-no-padding\">\n                            <div className=\"o-separator u-spacing-l u-spacing-top-l\"/>\n                            <div className=\"l-row\">\n                                <div className=\"l-col l-col-9 \">\n                                    <h4 className=\"h4 u-spacing-l\">{this.props.title}</h4>\n                                </div>\n                                <div className=\"l-col l-col-3 \">\n                                    <a href=\"#\" className=\"u-text-right u-block opl-section__trigger opl-wiking-expander__trigger--plus\"\n                                       role=\"tab\">\n                                        <span className=\"g-icon g-icon--only g-icon--plus g-icon--xs\"/>\n                                        <span className=\"u-acc-hide\">{\"Rozwiń sekcję \" + this.props.title}</span>\n                                    </a>\n                                </div>\n                            </div>\n                        </div>\n\n                        <div className=\"opl-section__content u-hide--soft\"\n                             role=\"tabpanel\">\n                            <div className=\"l-row\">\n                                <div className=\"l-col l-col-12 \">\n                                    <div className=\"u-padding-right-xl\">\n                                        <ul className=\"opl-wiking-manufacturers\">\n                                            {this.renderTree(0,this.props.categories)}\n                                        </ul>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        )\n\n    }\n\n}\n"],
    "file": "ProductCategoryTreeView.js"
}