{
    "version": 3,
    "sources": ["../../../../../../../es6/eshop/modules/simfree/components/comparator/ComparatorChooserComponent.jsx"],
    "names": ["ComparatorChooserComponent", "props", "fetchComparatorDevicesList", "checkIsComparatorCategory", "loadModules", "nextProps", "nextContext", "selectedCategory", "document", "getElementById", "OPL", "UI", "initModules", "isComparatorCategory", "categories", "filter", "category", "length", "storeIsComparatorCategory", "marketContextPrefixUrl", "comparatorPageUrl", "filtersUrl", "comparatorDevices", "title", "map", "device", "index", "className", "productId", "updateComparatorDevices", "imageUrl", "name", "Array", "x", "i", "fetchProducers", "redirectToComparator", "getComparatorUrl", "modalCategoryErrorMessage", "modalDevicesLimitErrorMessage", "modalLeftButtonText", "modalRightButtonText", "Component", "mapStateToProps", "state", "mapDispatchToProps", "dispatch", "url"],
    "mappings": ";;;;;;;AACA;AAUA;AACA;;;;;;MAGMA,0B;;;;;AACF,wCAAYC,KAAZ,EAAmB;AAAA;AAAA,+BACTA,KADS;AAElB;;;;2CACoB;AACjB,aAAKA,KAAL,CAAWC,0BAAX;AACH;;;0CACmB;AAChB,aAAKC,yBAAL,CAA+B,KAAKF,KAApC;AACA,aAAKG,WAAL;AACH;;;2CACoB;AACjB,aAAKA,WAAL;AACH;;;gDACyBC,S,EAAWC,W,EAAa;AAC9C,YAAI,KAAKL,KAAL,CAAWM,gBAAX,KAAgCF,SAAS,CAACE,gBAA9C,EAAgE;AAC5D,eAAKJ,yBAAL,CAA+BE,SAA/B;AACH;AACJ;;;oCAEa;AACV,YAAIG,QAAQ,CAACC,cAAT,CAAwB,0CAAxB,KAAuE,IAA3E,EAAiF;AAC7EC,UAAAA,GAAG,CAACC,EAAJ,CAAOC,WAAP,CAAmBJ,QAAQ,CAACC,cAAT,CAAwB,0CAAxB,CAAnB;AACH;AACJ;;;gDAEyBR,K,EAAO;AAC7B,YAAIY,oBAAoB,GAAGZ,KAAK,CAACa,UAAN,IAAoBb,KAAK,CAACa,UAAN,CAAiBC,MAAjB,CAAwB,UAAAC,QAAQ;AAAA,iBAAIA,QAAQ,KAAKf,KAAK,CAACM,gBAAvB;AAAA,SAAhC,EAAyEU,MAAzE,GAAkF,CAAjI;AACA,aAAKhB,KAAL,CAAWiB,yBAAX,CAAqCL,oBAArC;AACH;;;yCAEiB;AAEd,eAAS,KAAKZ,KAAL,CAAWkB,sBAAZ,GAAoC,KAAKlB,KAAL,CAAWmB,iBAAhD,GAAqE,GAArE,GAA2E,KAAKnB,KAAL,CAAWoB,UAAtF,GAAmG,oBAAnG,GAA0H,KAAKpB,KAAL,CAAWM,gBAA5I;AACH;;;+BAGQ;AAAA;;AACL,4BACI;AAAK,UAAA,EAAE,EAAC;AAAR,WACK,KAAKN,KAAL,CAAWY,oBAAX,IAAmC,KAAKZ,KAAL,CAAWqB,iBAA9C,IAAmE,KAAKrB,KAAL,CAAWqB,iBAAX,CAA6BL,MAA7B,GAAsC,CAAzG,iBACD;AAAK,UAAA,EAAE,EAAC,0CAAR;AAAmD,UAAA,SAAS,EAAC;AAA7D,wBACQ;AAAK,UAAA,SAAS,EAAC;AAAf,wBACI;AAAI,UAAA,SAAS,EAAC;AAAd,WAAoB,KAAKhB,KAAL,CAAWsB,KAA/B,CADJ,eAEI;AAAK,UAAA,SAAS,EAAC;AAAf,wBACI,6BAAC,iCAAD;AAA0B,UAAA,KAAK,EAAE,KAAKtB,KAAL,CAAWsB,KAA5C;AAC0B,UAAA,OAAO,EAAE;AADnC,UADJ,EAGK,KAAKtB,KAAL,CAAWqB,iBAAX,IAAgC,KAAKrB,KAAL,CAAWqB,iBAAX,CAA6BE,GAA7B,CAAiC,UAACC,MAAD,EAASC,KAAT,EAAmB;AAC7E,cAAIC,SAAJ;;AACA,cAAID,KAAK,IAAI,CAAb,EAAgB;AACZC,YAAAA,SAAS,GAAG,gEAAZ;AACH,WAFD,MAEO;AACHA,YAAAA,SAAS,GAAG,oDAAZ;AACH;;AACD,8BAAO;AAAS,YAAA,GAAG,EAAEF,MAAM,CAACG,SAArB;AACS,YAAA,SAAS,EAAED;AADpB,0BAEH;AAAK,YAAA,EAAE,EAAE,cAAcF,MAAM,CAACG,SAA9B;AAAyC,YAAA,SAAS,EAAC,uCAAnD;AACK,8BAAe;AADpB,0BAEI;AAAM,YAAA,SAAS,EAAC,qDAAhB;AAAsE,YAAA,IAAI,EAAC,QAA3E;AACM,YAAA,OAAO,EAAE;AAAA,qBAAM,KAAI,CAAC3B,KAAL,CAAW4B,uBAAX,CAAmCJ,MAAnC,CAAN;AAAA;AADf,0BAEI;AAAM,YAAA,SAAS,EAAC;AAAhB,yBAFJ,CAFJ,eAMI;AAAK,YAAA,SAAS,EAAC,+CAAf;AACK,YAAA,GAAG,EAAEA,MAAM,CAACK,QADjB;AAC2B,YAAA,GAAG,EAAC;AAD/B,YANJ,eAQI;AAAG,YAAA,SAAS,EAAC;AAAb,aAA0EL,MAAM,CAACM,IAAjF,CARJ,CAFG,CAAP;AAaH,SApB4B,CAHrC,EAyBK,+BAAIC,KAAK,CAAC,IAAI,KAAK/B,KAAL,CAAWqB,iBAAX,CAA6BL,MAAlC,CAAT,EAAoDO,GAApD,CAAwD,UAACS,CAAD,EAAIC,CAAJ,EAAU;AAC3D,cAAIP,SAAJ;;AACA,cAAI,KAAI,CAAC1B,KAAL,CAAWqB,iBAAX,CAA6BL,MAA7B,KAAwC,CAAxC,IAA8C,KAAI,CAAChB,KAAL,CAAWqB,iBAAX,CAA6BL,MAA7B,KAAwC,CAAxC,IAA6CiB,CAAC,KAAK,CAArG,EAAyG;AACrGP,YAAAA,SAAS,GAAG,oDAAZ;AACH,WAFD,MAEO;AACHA,YAAAA,SAAS,GAAG,gEAAZ;AACH;;AACD,8BAAO;AAAS,YAAA,GAAG,EAAE,UAAUO,CAAxB;AAA2B,YAAA,SAAS,EAAEP;AAAtC,0BACH;AAAG,YAAA,EAAE,EAAC,qCAAN;AACG,YAAA,SAAS,EAAC,qCADb;AAEG,YAAA,IAAI,EAAC,8BAFR;AAGG,8BAAe,oBAHlB;AAIG,YAAA,OAAO,EAAE;AAAA,qBAAM,KAAI,CAAC1B,KAAL,CAAWkC,cAAX,EAAN;AAAA;AAJZ,0BAKI;AACI,YAAA,SAAS,EAAC;AADd,YALJ,wBAM2E,wCAN3E,oBADG,CAAP;AAUH,SAjBJ,CAzBL,eA4CI;AAAQ,UAAA,QAAQ,EAAE,KAAKlC,KAAL,CAAWqB,iBAAX,CAA6BL,MAA7B,GAAsC,CAAxD;AACQ,UAAA,OAAO,EAAE;AAAA,mBAAM,KAAI,CAAChB,KAAL,CAAWmC,oBAAX,CAAgC,KAAI,CAACC,gBAAL,EAAhC,CAAN;AAAA,WADjB;AAEQ,UAAA,SAAS,EAAC;AAFlB,wBAGI,yDAHJ,CA5CJ,CAFJ,CADR,CAFJ,eA0DI,6BAAC,6BAAD;AAAsB,UAAA,yBAAyB,EAAE,KAAKpC,KAAL,CAAWqC,yBAA5D;AACsB,UAAA,6BAA6B,EAAE,KAAKrC,KAAL,CAAWsC,6BADhE;AAEsB,UAAA,mBAAmB,EAAE,KAAKtC,KAAL,CAAWuC,mBAFtD;AAGsB,UAAA,oBAAoB,EAAE,KAAKvC,KAAL,CAAWwC,oBAHvD;AAIsB,UAAA,iBAAiB,EAAE,KAAKJ,gBAAL;AAJzC,UA1DJ,CADJ;AAmEH;;;IAzGoCK,gB;;AA4GzC,MAAMC,eAAe,GAAG,SAAlBA,eAAkB,CAAAC,KAAK;AAAA,WAAK;AAC9BtB,MAAAA,iBAAiB,EAAE,qCAAqBsB,KAArB,CADW;AAE9BrC,MAAAA,gBAAgB,EAAE,oCAAoBqC,KAApB,CAFY;AAG9B/B,MAAAA,oBAAoB,EAAE,wCAAwB+B,KAAxB,CAHQ;AAI9BvB,MAAAA,UAAU,EAAE,4BAAcuB,KAAd,CAJkB;AAK9BzB,MAAAA,sBAAsB,EAAC,yCAA0ByB,KAA1B;AALO,KAAL;AAAA,GAA7B;;AAQA,MAAMC,kBAAkB,GAAG,SAArBA,kBAAqB,CAACC,QAAD,EAAW7C,KAAX;AAAA,WAAsB;AAC7CmC,MAAAA,oBAAoB,EAAE,8BAACW,GAAD;AAAA,eAASD,QAAQ,CAAC,sCAAqBC,GAArB,CAAD,CAAjB;AAAA,OADuB;AAE7C7C,MAAAA,0BAA0B,EAAE;AAAA,eAAM4C,QAAQ,CAAC,6CAAD,CAAd;AAAA,OAFiB;AAG7CjB,MAAAA,uBAAuB,EAAE,iCAACJ,MAAD;AAAA,eAAYqB,QAAQ,CAAC,6CAA4BrB,MAA5B,CAAD,CAApB;AAAA,OAHoB;AAI7CP,MAAAA,yBAAyB,EAAE,mCAACL,oBAAD;AAAA,eAA0BiC,QAAQ,CAAC,2CAA0BjC,oBAA1B,CAAD,CAAlC;AAAA,OAJkB;AAK7CsB,MAAAA,cAAc,EAAE;AAAA,eAAMW,QAAQ,CAAC,iCAAD,CAAd;AAAA;AAL6B,KAAtB;AAAA,GAA3B;;iBAQe,yBAAQH,eAAR,EAAyBE,kBAAzB,EAA6C7C,0BAA7C,C",
    "sourcesContent": ["import {connect} from \"react-redux\";\nimport React, {Component} from \"react\";\nimport {\n    updateComparatorDevicesList,\n    fetchComparatorDevicesList,\n    fetchProducers,\n    redirectToComparator,\n    storeIsComparatorCategory\n} from \"eshop/modules/simfree/actions/comparator\";\nimport {getComparatorDevices, getSelectedCategory, getIsComparatorCategory} from \"eshop/modules/simfree/selectors\";\nimport {getFiltersUrl} from \"eshop/modules/configurator/selectors/filters\";\nimport ComparatorAddDeviceModal from \"eshop/modules/simfree/components/comparator/ComparatorAddDeviceModal\";\nimport ComparatorErrorModal from \"eshop/modules/simfree/components/comparator/ComparatorErrorModal\";\nimport {getMarketContextPrefixUrl} from \"eshop/modules/configurator/selectors/metaData\";\n\nclass ComparatorChooserComponent extends Component {\n    constructor(props) {\n        super(props);\n    }\n    componentWillMount() {\n        this.props.fetchComparatorDevicesList();\n    }\n    componentDidMount() {\n        this.checkIsComparatorCategory(this.props);\n        this.loadModules();\n    }\n    componentDidUpdate() {\n        this.loadModules();\n    }\n    componentWillReceiveProps(nextProps, nextContext) {\n        if (this.props.selectedCategory !== nextProps.selectedCategory) {\n            this.checkIsComparatorCategory(nextProps);\n        }\n    }\n\n    loadModules() {\n        if (document.getElementById(\"opl-comparator-chooser-component-content\") != null) {\n            OPL.UI.initModules(document.getElementById(\"opl-comparator-chooser-component-content\"));\n        }\n    }\n\n    checkIsComparatorCategory(props) {\n        let isComparatorCategory = props.categories && props.categories.filter(category => category === props.selectedCategory).length > 0;\n        this.props.storeIsComparatorCategory(isComparatorCategory);\n    }\n\n    getComparatorUrl(){\n\n        return ((this.props.marketContextPrefixUrl)+this.props.comparatorPageUrl) + '?' + this.props.filtersUrl + '&selectedCategory=' + this.props.selectedCategory;\n    }\n\n\n    render() {\n        return (\n            <div id=\"opl-comparator-chooser-component\">\n                {this.props.isComparatorCategory && this.props.comparatorDevices && this.props.comparatorDevices.length > 0 &&\n                <div id=\"opl-comparator-chooser-component-content\" className=\"l-row u-margin-top-l-xl\">\n                        <div className=\"l-col l-col-12\">\n                            <h2 className=\"h3\">{this.props.title}</h2>\n                            <div className=\"opl-compare-products\">\n                                <ComparatorAddDeviceModal title={this.props.title}\n                                                          trigger={\"opl-compare-products__modal-trigger\"}/>\n                                {this.props.comparatorDevices && this.props.comparatorDevices.map((device, index) => {\n                                        let className;\n                                        if (index <= 1) {\n                                            className = \"opl-compare-products__box u-margin-right-m u-small-no-margin-r\";\n                                        } else {\n                                            className = \"opl-compare-products__box u-large-margin-right-xxl\";\n                                        }\n                                        return <section key={device.productId}\n                                                        className={className}>\n                                            <div id={\"box-item-\" + device.productId} className=\"opl-compare-products__item g-gray1-bg\"\n                                                 data-js-module='[{\"path\":\"common/modules/opl-ellipsis\",\"conditions\": \"element:{seen}\", \"options\":{\"maxLength\": \"40\", \"smallMaxLength\" : \"15\"}}]'>\n                                                <span className=\"opl-compare-products__item-btn g-icon g-icon--close\" role=\"button\"\n                                                      onClick={() => this.props.updateComparatorDevices(device)}>\n                                                    <span className=\"u-acc-hide\">Usuń</span>\n                                                </span>\n                                                <img className=\"opl-compare-products__item-img u-margin-right\"\n                                                     src={device.imageUrl} alt=\"\"/>\n                                                <p className=\"opl-compare-products__item-name ellipsis-item u-font-bold\">{device.name}</p>\n                                            </div>\n                                        </section>\n                                    }\n                                )}\n                                {[...Array(3 - this.props.comparatorDevices.length)].map((x, i) => {\n                                        let className;\n                                        if (this.props.comparatorDevices.length === 2 || (this.props.comparatorDevices.length === 1 && i === 1)) {\n                                            className = \"opl-compare-products__box u-large-margin-right-xxl\";\n                                        } else {\n                                            className = \"opl-compare-products__box u-margin-right-m u-small-no-margin-r\";\n                                        }\n                                        return <section key={\"empty\" + i} className={className}>\n                                            <a id=\"opl-compare-products__modal-trigger\"\n                                               className=\"opl-btn--box o-btn o-modal__trigger\"\n                                               href=\"#opl-compare-products__modal\"\n                                               data-js-module=\"core/modules/modal\"\n                                               onClick={() => this.props.fetchProducers()}>\n                                                <span\n                                                    className=\"u-spacing-right g-icon--xs-s g-icon g-icon--plus\"/>Dodaj<br/>urządzenie\n                                            </a>\n                                        </section>\n                                    }\n                                )}\n                                <button disabled={this.props.comparatorDevices.length < 2}\n                                        onClick={() => this.props.redirectToComparator(this.getComparatorUrl())}\n                                        className=\"opl-compare-products__btn opl-btn opl-btn--primary o-btn u-small-margin-top-l u-medium-margin-top-l\">\n                                    <span>Porównaj</span>\n                                </button>\n                            </div>\n                        </div>\n                </div>\n                }\n                <ComparatorErrorModal modalCategoryErrorMessage={this.props.modalCategoryErrorMessage}\n                                      modalDevicesLimitErrorMessage={this.props.modalDevicesLimitErrorMessage}\n                                      modalLeftButtonText={this.props.modalLeftButtonText}\n                                      modalRightButtonText={this.props.modalRightButtonText}\n                                      comparatorPageUrl={this.getComparatorUrl()}/>\n            </div>\n\n        )\n    }\n}\n\nconst mapStateToProps = state => ({\n    comparatorDevices: getComparatorDevices(state),\n    selectedCategory: getSelectedCategory(state),\n    isComparatorCategory: getIsComparatorCategory(state),\n    filtersUrl: getFiltersUrl(state),\n    marketContextPrefixUrl:getMarketContextPrefixUrl(state),\n});\n\nconst mapDispatchToProps = (dispatch, props) => ({\n    redirectToComparator: (url) => dispatch(redirectToComparator(url)),\n    fetchComparatorDevicesList: () => dispatch(fetchComparatorDevicesList()),\n    updateComparatorDevices: (device) => dispatch(updateComparatorDevicesList(device)),\n    storeIsComparatorCategory: (isComparatorCategory) => dispatch(storeIsComparatorCategory(isComparatorCategory)),\n    fetchProducers: () => dispatch(fetchProducers())\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ComparatorChooserComponent);\n"],
    "file": "ComparatorChooserComponent.js"
}