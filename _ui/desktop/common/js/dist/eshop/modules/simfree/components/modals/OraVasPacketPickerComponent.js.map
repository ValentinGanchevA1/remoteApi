{
    "version": 3,
    "sources": ["../../../../../../../es6/eshop/modules/simfree/components/modals/OraVasPacketPickerComponent.jsx"],
    "names": ["OraVasPacketPickerComponent", "props", "state", "showModal", "selected", "conflicts", "open", "bind", "onClose", "openData", "onSelect", "onUselect", "onSubmit", "data", "setState", "showHint", "window", "OraVasPacketPickerComponentOpenPopup", "console", "error", "plan", "capacity", "packetCode", "conflictCode", "find", "s", "concat", "filter", "c", "capacityCount", "usedCapacity", "packets", "toAdd", "now", "toRemove", "submit", "OnlineUtils", "extractObject", "descriptions", "Component", "OraPacketPickerPopup", "toPacket", "idx", "packetProps", "isSelected", "includes", "id", "isEnabled", "weight", "conflictResolveMsg", "conflictMsgTemplate", "name", "titleTemplate", "replace", "subtitleTemplate", "getPacketCountText", "getTitle", "getSubtitle", "map", "hintSelectMoreTemplate", "hintFull", "defaultProps", "Packet", "sectionHeader", "beforeSelectWarning", "warning", "onChange", "event", "target", "checked", "enabled", "title", "features", "f", "moreFeatures", "info", "Bottom", "completed", "chosenCount", "hintSelectMore", "p", "reduce", "a", "b"],
    "mappings": "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",
    "sourcesContent": ["import {connect} from \"react-redux\";\nimport React, {Component} from \"react\";\nimport OraModal from \"eshop/modules/core/components/ui/Modal\";\nimport {Expander, Section, Trigger} from \"eshop/modules/core/components/ui/Expander\";\nimport OnlineUtils from \"eshop/utils/OnlineUtils\";\n\n//    USAGE\n//    <OraVasPacketPickerComponent /> - has to be mounted anywhere on the page (once!) and then:\n//    <p onClick={event => OraVasPacketPickerComponent.openPopup({ ...this.data(), submit: this.submit})}>wybierz</p>\n//\n//    submit(toAdd, toRemove, conflicts){\n//        alert(toAdd + '-' + selected + '-' + conflicts)\n//    }\n//\n//    data(){\n//        return {\n//            plan: {\n//                name: 'Testowy',\n//                capacity: 3\n//            },\n//            packets: [\n//                {\n//                    id: 'p1',\n//                    title: 'Paczka - 1',\n//                    weight: 1,\n//                    features: [\n//                        'feature - 1',\n//                        'feature - 2'\n//                    ],\n//                    moreFeatures: [\n//                        'add feature - 1',\n//                        'add feature - 2'\n//                    ]\n//                },\n//                {\n//                    id: 'p2',\n//                    title: 'Paczka - 2 - niby Office',\n//                    weight: 2,\n//                    warning: {\n//                        id : 'vas-in-cart-id',\n//                        name: 'Office'\n//                    },\n//                    features: [\n//                        'feature - 1',\n//                        'feature - 2'\n//                    ],\n//                    moreFeatures: [\n//                        'add feature - 1',\n//                        'add feature - 2'\n//                    ],\n//                    info: 'Office to dwie paczki',\n//                },\n//                {\n//                    id: 'p3',\n//                    title: 'Paczka - 3',\n//                    weight: 1,\n//                    features: [\n//                        'feature - 1',\n//                        'feature - 2'\n//                    ],\n//                    moreFeatures: [\n//                        'add feature - 1',\n//                        'add feature - 2'\n//                    ]\n//                },\n//                {\n//                    id: 'p4',\n//                    title: 'Paczka - 4',\n//                    weight: 1,\n//                    features: [\n//                        'feature - 1',\n//                        'feature - 2'\n//                    ],\n//                    moreFeatures: [\n//                        'add feature - 1',\n//                        'add feature - 2'\n//                    ]\n//                }\n//            ],\n//            selected:[\n//                'p1',\n//                'p4'\n//            ]\n//        }\n//    }\n\nexport default class OraVasPacketPickerComponent extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            showModal: false,\n            selected:  [],\n            conflicts: []\n        };\n        this.open = this.open.bind(this);\n        this.onClose = this.onClose.bind(this);\n        this.openData = {};\n        this.onSelect=this.onSelect.bind(this);\n        this.onUselect=this.onUselect.bind(this);\n        this.onSubmit=this.onSubmit.bind(this);\n    }\n\n    static openPopup(data) {\n        if(window.OraVasPacketPickerComponentOpenPopup){\n            window.OraVasPacketPickerComponentOpenPopup(data);\n        } else {\n            console.error(\"OraVasPacketPickerComponent has not been mounted\");\n        }\n    }\n\n    open(data){\n        this.openData = data;\n        this.setState({\n            showModal: true,\n            selected: this.openData.selected || [],\n            conflicts: [],\n            showHint: true\n        });\n    }\n\n    componentWillMount(){\n        if(!window.OraVasPacketPickerComponentOpenPopup){\n            window.OraVasPacketPickerComponentOpenPopup = this.open;\n        } else {\n            console.error(\"OraVasPacketPickerComponent should be mounted only once!\")\n        }\n    }\n\n    capacityCount(){\n        return (this.openData && this.openData.plan && this.openData.plan.capacity) || -1\n    }\n\n    onClose() {\n        this.setState({showModal: false});\n    }\n\n    onSelect(packetCode, conflictCode){\n        let selected = this.state.selected;\n        let conflicts = this.state.conflicts;\n\n        if(packetCode && !this.state.selected.find(s => s === packetCode)){\n            selected = selected.concat(packetCode);\n        }\n\n        if(conflictCode && !this.state.conflicts.find(s => s === conflictCode)){\n            conflicts = conflicts.concat(conflictCode);\n        }\n\n        this.setState({\n            showHint: true,\n            selected,\n            conflicts\n        });\n    }\n\n    onUselect(packetCode, conflictCode){\n        let selected = packetCode ? this.state.selected.filter(s => s !== packetCode ) : this.state.selected;\n        let conflicts = conflictCode ? this.state.conflicts.filter(c => c !== conflictCode ) : this.state.conflicts;\n\n        this.setState({\n            showHint: false,\n            selected,\n            conflicts\n        });\n    }\n\n    onSubmit(){\n        if(this.capacityCount() === usedCapacity(this.openData.packets, this.state.selected)){\n            let toAdd = this.state.selected.filter(now=>!this.openData.selected.find(s=>s===now))\n            let toRemove = this.openData.selected.filter(now=>!this.state.selected.find(s=>s===now))\n            this.openData.submit(toAdd, toRemove, this.state.conflicts)\n            this.onClose()\n        } else {\n            this.setState({\n                showHint: true\n            });\n        }\n    }\n\n    render() {\n        return (\n            <OraModal\n                id = \"packet-picker-popup\"\n                size = \"narrow\"\n                noPadding = {true}\n                fullscreenMobile = {true}\n                escapeClose = {true}\n                showClose = {true}\n                clickClose = {true}\n                open = {this.state.showModal}\n                onClose = {this.onClose}>\n                    <OraPacketPickerPopup\n                        {...this.openData}\n                        selected={this.state.selected}\n                        showHint={this.state.showHint}\n                        onSelect={this.onSelect}\n                        onUselect={this.onUselect}\n                        onSubmit={this.onSubmit}\n                        {...OnlineUtils.extractObject(this.props.descriptions, \"label.popup.\")}\n                    />\n            </OraModal>\n        );\n    }\n}\n\nclass OraPacketPickerPopup extends Component {\n\n    constructor(props){\n        super(props);\n        this.toPacket = this.toPacket.bind(this);\n    }\n\n    getPacketCountText(idx){\n      switch (idx) {\n          case 1:\n              return \"jedną paczkę\";\n          case 2:\n              return \"dwie paczki\";\n          case 3:\n              return \"trzy paczki\";\n          case 4:\n              return \"cztery paczki\";\n          case 5:\n              return \"pięć paczek\";\n          case 6:\n              return \"sześć paczek\";\n          default:\n              return \"-\";\n        }\n    }\n\n    toPacket(packetProps){\n        let isSelected = (this.props.selected || []).includes(packetProps.id);\n        let isEnabled = usedCapacity(this.props.packets, this.props.selected) + packetProps.weight <= this.props.plan.capacity || isSelected;\n        return (\n            <Packet\n                key={packetProps.id}\n                {...packetProps}\n                enabled = {isEnabled}\n                selected = {isSelected}\n                onSelect={this.props.onSelect}\n                onUselect={this.props.onUselect}\n                conflictResolveMsg = {this.props.conflictResolveMsg}\n                conflictMsgTemplate = {this.props.conflictMsgTemplate}\n            />\n        );\n    }\n\n    getTitle(){\n        if(this.props.plan && this.props.plan.name){\n            return this.props.titleTemplate.replace('%PLAN_NAME%', this.props.plan.name)\n        }\n    }\n\n    getSubtitle(){\n        if(this.props.plan && this.props.plan.capacity){\n            return this.props.subtitleTemplate.replace('%AVAILABLE_PACKET_COUNT%', this.getPacketCountText(this.props.plan.capacity))\n        }\n    }\n\n    render() {\n        return (\n            <div>\n                <div className=\"opl-packet-box__modal--top u-padding g-white1-bgc\">\n                    <h3 className=\"u-padding-all-l u-padding-top-xl\">{this.getTitle()}</h3>\n                    <p className=\"u-padding-all-l u-no-padding-top u-no-padding-bottom\">{this.getSubtitle()}</p>\n                </div>\n                <div className=\"opl-packet-box__modal--center\">\n                    <div className=\"opl-packet-box__modal--center-content u-padding-top\">\n                         {this.props.packets && this.props.packets.map(this.toPacket)}\n                    </div>\n                </div>\n                <Bottom\n                    showHint={this.props.showHint}\n                    chosenCount={usedCapacity(this.props.packets, this.props.selected)}\n                    capacity={this.props.plan && this.props.plan.capacity}\n                    onSubmit={this.props.onSubmit}\n                    hintSelectMoreTemplate={this.props.hintSelectMoreTemplate}\n                    hintFull={this.props.hintFull}\n                />\n            </div>\n        );\n    }\n}\n\nOraPacketPickerPopup.defaultProps = {\n    titleTemplate: '%PLAN_NAME%. Wybierz paczki usług do planu.',\n    subtitleTemplate: 'W tym planie możesz wybrać %AVAILABLE_PACKET_COUNT% usług z listy poniżej. Nie płacisz za nie dodatkowo, są już w cenie abonamentu. Co miesiąc możesz je zamienić na inne.',\n    hintSelectMoreTemplate: 'Wybierz paczki (wybrano %USED_CAPACITY% z %AVAILABLE_PACKET_COUNT% dostępnych)',\n    hintFull: 'Wybrałeś już maksymalną liczbę paczek. Jeśli chcesz dodać inną musisz najpierw odznaczyć jedną z aktualnie zaznaczonych.',\n    conflictMsgTemplate: 'Wybrałeś już %CONFLICT_NAME% w usługach dodatkowych',\n    conflictResolveMsg: 'Zamieniam usługę na paczkę'\n}\n\nconst Packet = props => {\n    const sectionHeader = <Trigger className=\"js-expander__trigger\">\n            <span className=\"js-expander__trigger--hide\">Więcej</span>\n            <span className=\"js-expander__trigger--show\">Zwiń</span>\n            <span className=\"g-icon g-icon--arrow-down g-icon--xs u-padding-left-s\"></span>\n    </Trigger>;\n    let beforeSelectWarning = !props.selected && !!props.warning;\n    let onChange = event => {\n         if(event.target.checked){\n            props.onSelect(props.id)\n        } else {\n            props.onUselect(props.id, props.warning && props.warning.id)\n        }\n    };\n    return (\n        <div className={\"opl-packet-box__checkbox u-padding-l\" + (!props.enabled?\" disabled\":\"\") + (beforeSelectWarning?\" g-gray1-bg\":\"\")}>\n                <label className=\"opl-checkbox opl-checkbox--red-disabled o-checkbox u-padding-l\">\n                    <input type=\"checkbox\" disabled={(!props.enabled || beforeSelectWarning) && \"disabled\"} checked={props.selected} onChange={onChange} /><span className=\"o-ci\"></span><span className=\"o-ci-label h4\">{props.title}</span>\n                </label>\n                <ul className=\"opl-packet-box__checkbox--list u-padding\" >\n                    {(props.features || []).map((f, idx) => <li key={\"feature_\" + idx}>{f}</li>)}\n                    {props.moreFeatures && props.moreFeatures[0] &&\n                    <Expander>\n                        <Section header={sectionHeader} headerBelow={true}>\n                            <ul>\n                                {(props.moreFeatures || []).map((f, idx) => <li key={\"moreFeatures_\" + idx}>{f}</li>)}\n                            </ul>\n                        </Section>\n                    </Expander>\n                    }\n                </ul>\n                {props.info &&\n                <div className=\"u-margin-l u-padding-left-l-xl u-table\">\n                    <span className={\"g-icon g-icon--info g-icon--xs-s u-padding-right u-table-cell u-vertical-middle\" + (props.enabled?\" g-bluef-c\":\"\")}></span>\n                    <span className=\"u-table-cell u-font-small u-font-bold u-vertical-middle\">{props.info}</span>\n                </div>\n                }\n                {beforeSelectWarning &&\n                <div>\n                    <div className=\"opl-msg opl-msg--warn-black opl-msg--context u-margin-l\">\n                        <p>{props.conflictMsgTemplate.replace('%CONFLICT_NAME%',props.warning.name)}</p>\n                    </div>\n                    <button className=\"opl-btn o-btn opl-btn--small u-padding-left-xl u-padding-right-xl\" disabled={!props.enabled && \"disabled\"} onClick={() => props.onSelect(props.id, props.warning.id)}>\n                        {props.conflictResolveMsg}\n                    </button>\n                </div>\n                }\n         </div>\n    );\n};\n\nconst Bottom = props => {\n    let completed = props.chosenCount === props.capacity\n    let hintSelectMore = props.hintSelectMoreTemplate.replace('%USED_CAPACITY%', props.chosenCount).replace('%AVAILABLE_PACKET_COUNT%', props.capacity)\n    return (\n        <div className=\"opl-packet-box__modal--bottom\">\n            <div className=\"u-padding-all-l u-box-sizing u-w-100\">\n                <div className=\"u-table u-margin-auto-l u-small-block\">\n                    {props.showHint && !completed && <div className=\"u-table-cell u-vertical-middle u-padding-right-l u-small-hide\">\n                        <span className=\"u-font-bold u-inline-block u-margin-right\">{hintSelectMore}</span>\n                    </div>}\n                    {props.showHint && completed && <div className=\"u-table-cell u-vertical-middle u-padding-right-l u-small-block u-small-no-padding-r\">\n                        <div className=\"opl-msg opl-msg--info opl-msg--context u-inline-block\">\n                            <p>{props.hintFull}</p>\n                        </div>\n                    </div>}\n                    <div className=\"u-table-cell u-vertical-middle u-small-block u-small-margin-top-l\">\n                        <button className=\"opl-btn opl-btn--primary opl-btn--medium o-btn u-padding-right-l-xl u-padding-left-l-xl\" onClick={props.onSubmit}>Gotowe</button>\n                    </div>\n                </div>\n            </div>\n        </div>\n    )\n}\n\nconst usedCapacity = (packets, selected) => {\n    return (packets || [])\n        .filter(p => selected && !!selected.includes(p.id))\n        .map(p => p.weight || 0)\n        .reduce((a, b) => a+b, 0);\n};\n\n\n"],
    "file": "OraVasPacketPickerComponent.js"
}