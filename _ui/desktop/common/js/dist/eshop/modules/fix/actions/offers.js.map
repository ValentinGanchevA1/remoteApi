{
    "version": 3,
    "sources": ["../../../../../../es6/eshop/modules/fix/actions/offers.js"],
    "names": ["fetchOffers", "address", "customerServicesHashCode", "reset", "forceAfterWwt", "kna", "dispatch", "getState", "type", "ACTIONS", "FETCH_OFFERS_START", "HIDE_PAYMENT_LINK_COMPONENT", "addressObject", "convertAddressToCommonFormat", "magnumActions", "GET_SELECTED_WWT_ADDRESS_ACTION_TYPES", "success", "payload", "designationNumber", "optionallyRedirectAfterWWT", "selectedLoyalty", "RemoteApi", "getOffers", "fromSession", "then", "response", "FETCH_OFFERS", "getDocuments", "offers", "map", "offer", "broadband", "bundleId", "responseDocuments", "FETCH_DOCUMENTS", "error", "console", "errorMessage", "process", "length", "technologies", "includes", "isAddressNotEmpty", "fetchTvChannels", "propositionId", "getTvPackages", "configurables", "tvPackages", "CARTACTIONS", "FETCH_FIX_CONFIGURABLES", "log", "zip", "preZipCode", "substr", "postalCode", "town", "cityName", "line1", "streetName", "line2", "streetNumber", "appartmentNo", "apartmentNumber", "streetId", "cityId", "fetchOffersAndCheckAvailablePromotions", "www", "checkAvailablePromotions", "availableApartments", "MAGNUM_ACTIONS", "SAVE_WWT_ADDITIONAL_DATA", "Promise", "resolve", "reject", "PROMOTION_IS_AVAILABLE_START", "request", "context", "checkWwtAdditionalData", "wwtData", "redirectionData", "componentUid", "boxID", "formType", "leadAddressForm", "decodeURI", "$", "param", "replace", "base64Address", "localStorage", "setItem", "JSON", "stringify", "redirectAvailable", "window", "location", "pathname", "redirectUrl", "PROMOTION_IS_AVAILABLE_LOADED", "redirectUrlAfterWWT", "refreshOffertsByLoyalty", "loyalty", "SELECT_LOYALTY", "showTVModal", "id", "SHOW_MODAL_ACTION", "modalId", "closeTvModal", "CLOSE_TV_MODAL", "showCartNotEmptyModal", "show", "SHOW_CART_NOT_EMPTY_MODAL", "chooseOffer", "offerId", "secondaryChoiceOffer", "enableVoipSelection", "saveSelectedOfferId", "removeFromCart", "res", "description", "addToCart", "CART_MOD_LOADING", "addOfferToCart", "status", "catch", "err", "SAVE_BUNDLE_NOS", "data", "responseJSON", "bundleNos", "errorCode", "modalConfig", "showIcon", "setTimeout", "OnlineUtils", "removePwaSuflerContextFromSession", "removeCart", "OPL", "UI", "fire", "EVENTS", "modules", "header", "updateRightMenuBadge", "value", "showBaseOffer", "SHOW_BASE_OFFER", "FETCH_OFFERS_STOP", "showSecondaryChoiceOffer", "SHOW_SECONDARY_CHOICE_OFFER", "isEmptyObject", "obj", "Object", "keys", "SAVE_SELECTED_OFFER_ID", "saveSelectedLoyalty", "updateIsLandingPage", "isLP", "IS_LP"],
    "mappings": "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",
    "sourcesContent": ["import * as ACTIONS from \"../actionTypes\";\nimport * as MAGNUM_ACTIONS from \"../../magnum2/actionTypes\";\nimport RemoteApi from \"../remoteApi\";\nimport * as CARTACTIONS from \"eshop/modules/cart/actionTypes\"\nimport {showKnaModal, showPaymentLink} from \"./kna\";\nimport * as magnumActions from \"eshop/modules/checkout/actionTypes\";\nimport {openErrorModal} from \"./errors\";\nimport {\n    getKnaModalRegistered,\n    getPageContext,\n    getSelectedLoyalty,\n    getWwtCityId,\n    isPreLandingPage,\n    isWWW,\n    voipModalComponentIsMounted\n} from \"../selectors/root\";\nimport {doShowWWTModal, saveWWTAddress} from \"./wwt\";\nimport {fetchVoipNumbers, voipSelection} from \"./voip\";\nimport {getRedirectUrlAfterWWT} from \"eshop/modules/fix/selectors\"\nimport OnlineUtils from \"eshop/utils/OnlineUtils\";\n\nexport const fetchOffers = (address, customerServicesHashCode = null, reset = false, forceAfterWwt = false, kna = false) => (dispatch, getState) => {\n    dispatch({\n      type: ACTIONS.FETCH_OFFERS_START\n    });\n    dispatch({\n          type: ACTIONS.HIDE_PAYMENT_LINK_COMPONENT\n    });\n\n    let addressObject = convertAddressToCommonFormat(address, kna);\n    if (addressObject) {\n        dispatch({\n            type: magnumActions.GET_SELECTED_WWT_ADDRESS_ACTION_TYPES.success,\n            payload: addressObject\n        });\n    } else {\n        addressObject = {};\n    }\n\n    dispatch(saveWWTAddress({address: addressObject, forceAfterWwt, designationNumber: customerServicesHashCode}));\n\n    dispatch(optionallyRedirectAfterWWT());\n\n    const selectedLoyalty = getSelectedLoyalty(getState());\n\n    RemoteApi.getOffers(!!addressObject.fromSession ? null : addressObject, selectedLoyalty, customerServicesHashCode, reset)\n        .then(response => {\n                dispatch({\n                    type: ACTIONS.FETCH_OFFERS,\n                    payload: response\n                });\n\n                RemoteApi.getDocuments(!!response.offers ? response.offers.map(offer => offer.broadband.bundleId) : [])\n                    .then(responseDocuments => {\n                        dispatch({\n                            type: ACTIONS.FETCH_DOCUMENTS,\n                            payload: responseDocuments\n                        });\n                    },\n                        (error) => console.error(\"getDocuments\", error)\n                    );\n\n                if (!response || !response.offers) {\n                    dispatch(openErrorModal(response.errorMessage));\n                    return;\n                }\n\n                if (response.process === \"ACTIVATION\" && response.offers.length > 0\n                    && !response.technologies.includes(\"FTTH\") && isAddressNotEmpty(addressObject)) {\n                    if (getKnaModalRegistered(getState())) {\n                        dispatch(showKnaModal(false));\n                    } else {\n                        dispatch(showPaymentLink());\n                    }\n                }\n\n                    if(reset && !isAddressNotEmpty(addressObject)) {\n                        dispatch(doShowWWTModal());\n                    }\n            },\n            (error) => console.error('fetchOffers getOffers error', error))\n\n};\nexport const fetchTvChannels = (propositionId) => (dispatch)=>{\n    RemoteApi.getTvPackages(propositionId).then(response => {\n        let configurables=[{tvPackages:response}]\n        dispatch({type:CARTACTIONS.FETCH_FIX_CONFIGURABLES,payload:configurables})\n\n        console.log(response)});\n}\nconst convertAddressToCommonFormat = (address, kna) => {\n    if (address) {\n        if (!!address.zip) {\n            return {\n                preZipCode: address.zip && address.zip.substr(0, 2),\n                postalCode: address.zip && address.zip.substr(2),\n                town: address.cityName,\n                line1: address.streetName,\n                line2: address.streetNumber,\n                appartmentNo: address.apartmentNumber,\n                streetId: address.streetId,\n                cityId: address.cityId,\n            };\n        } else if (kna || !!address.preZipCode) {\n            return address;\n        }\n    }\n};\n\nexport const fetchOffersAndCheckAvailablePromotions = (address, forceAfterWwt) => (dispatch, getState) => {\n    const www = isWWW(getState());\n    dispatch(checkAvailablePromotions(address))\n        .then((response) => {\n            if (!address.fromSession && !www && !!response && !!response.availableApartments && response.availableApartments.length > 0) {\n                dispatch({\n                    type: MAGNUM_ACTIONS.SAVE_WWT_ADDITIONAL_DATA,\n                    payload: response\n                });\n            } else {\n                dispatch(fetchOffers(address, null, false, forceAfterWwt));\n            }\n        });\n};\n\nexport const checkAvailablePromotions = (address) => (dispatch, getState) => {\n    return new Promise((resolve, reject) => {\n        dispatch({type: ACTIONS.PROMOTION_IS_AVAILABLE_START});\n        const addressObject = convertAddressToCommonFormat(address, false);\n        if (addressObject && addressObject.preZipCode && addressObject.postalCode && addressObject.cityId && addressObject.line2) {\n            const request = {\n                address: addressObject,\n                context: getPageContext(getState())\n            };\n            RemoteApi.checkWwtAdditionalData(request)\n                .then(wwtData => {\n                    if (wwtData) {\n                        const redirectionData = {\n                            componentUid: \"WWT_NewLove\",\n                            boxID: \"love-offer\",\n                            formType: \"DETAILED\",\n                            leadAddressForm: decodeURI($.param(wwtData.address)).replace(\"+\", \" \"),\n                            address: wwtData.base64Address\n                        };\n                        localStorage.setItem(\"OPL-prompterWWT_address\", JSON.stringify(redirectionData));\n                    }\n                    if (wwtData && wwtData.redirectAvailable && wwtData.redirectAvailable === true && window.location.pathname !== wwtData.redirectUrl) {\n                        window.location = wwtData.redirectUrl;\n                        reject();\n                    } else {\n                        dispatch({type: ACTIONS.PROMOTION_IS_AVAILABLE_LOADED});\n                        resolve(wwtData);\n                    }\n                }, () => {\n                    dispatch({type: ACTIONS.PROMOTION_IS_AVAILABLE_LOADED});\n                    resolve();\n                });\n        } else {\n            dispatch({type: ACTIONS.PROMOTION_IS_AVAILABLE_LOADED});\n            resolve();\n        }\n    });\n};\n\nexport const optionallyRedirectAfterWWT = () => (dispatch,getState)=>{\n\n    let redirectUrlAfterWWT=getRedirectUrlAfterWWT(getState());\n    if(isPreLandingPage(getState()) && redirectUrlAfterWWT && window.location.pathname!=redirectUrlAfterWWT){\n        window.location=redirectUrlAfterWWT;\n    }\n};\nexport const refreshOffertsByLoyalty = (loyalty) => (dispatch) => {\n\n    dispatch({\n      type: ACTIONS.FETCH_OFFERS_START\n    });\n\n    RemoteApi.getOffers({}, loyalty)\n            .then(response => {\n                dispatch({\n                        type: ACTIONS.FETCH_OFFERS,\n                        payload: response\n                    });\n                dispatch({\n                         type: ACTIONS.SELECT_LOYALTY,\n                         payload: loyalty\n                     });\n\n                RemoteApi.getDocuments(response.offers.map(offer => offer.broadband.bundleId))\n                    .then(responseDocuments => {\n                        dispatch({\n                            type: ACTIONS.FETCH_DOCUMENTS,\n                            payload: responseDocuments\n                        });\n                    });\n            });\n};\n\n\nexport function showTVModal(id) {\n    return {\n        type: ACTIONS.SHOW_MODAL_ACTION,\n        payload: {\n            modalId: id\n        }\n    };\n}\n\nexport function closeTvModal(id) {\n    return {\n        type: ACTIONS.CLOSE_TV_MODAL,\n        payload: {\n            modalId: id\n        }\n    };\n}\n\n\nexport const showCartNotEmptyModal = (show) => (dispatch) => {\n    dispatch({\n        type: ACTIONS.SHOW_CART_NOT_EMPTY_MODAL,\n        payload: show\n    });\n};\n\nexport const chooseOffer = ({offerId, secondaryChoiceOffer}) => (dispatch, getState) => {\n    const enableVoipSelection = voipModalComponentIsMounted(getState());\n    dispatch(saveSelectedOfferId(offerId));\n    //due to NOR-156774\n\n    RemoteApi.removeFromCart().then(res=>{\n        if (enableVoipSelection) {\n            if(res && res.description==null){//cart was not empty\n                dispatch(fetchVoipNumbers(getWwtCityId(getState())));\n            }\n            dispatch(voipSelection(true));\n        } else {\n\n            dispatch(addToCart(offerId, secondaryChoiceOffer));\n        }\n        }\n\n    );\n\n\n };\n\nexport const addToCart = (id, secondaryChoiceOffer) => (dispatch) =>  {\n    dispatch({\n        type: ACTIONS.CART_MOD_LOADING,\n        payload: true\n    });\n    RemoteApi.addOfferToCart(id, secondaryChoiceOffer).then(response => {\n        if (response.status) {\n            window.location.replace(\"/koszyk/multi\");\n        }\n    }).catch((err) => {\n        dispatch({\n            type: ACTIONS.CART_MOD_LOADING,\n            payload: false\n        });\n\n        dispatch({\n            type: ACTIONS.SAVE_BUNDLE_NOS,\n            data: err.responseJSON.bundleNos\n        });\n\n        if (err && err.responseJSON && err.responseJSON.errorCode) {\n            const modalConfig = {showIcon: 'HtmlErrorMessage' !== err.responseJSON.errorCode};\n            dispatch(openErrorModal(err.responseJSON.errorCode, err.responseJSON.description, modalConfig));\n        } else {\n            setTimeout(() =>  dispatch(showCartNotEmptyModal(true)), 400);\n        }\n    });\n    OnlineUtils.removePwaSuflerContextFromSession();\n};\n\nexport const removeCart = () => (dispatch, getState) => {\n    dispatch({\n        type: ACTIONS.CART_MOD_LOADING,\n        payload: true\n    });\n    dispatch(showCartNotEmptyModal(false))\n    RemoteApi.removeFromCart().then(() => {\n        OPL.UI.fire(OPL.UI.EVENTS.modules.header.updateRightMenuBadge, { id: 'basketBadgeService',  value: 0})\n    }).then(() => {\n        dispatch({\n            type: ACTIONS.CART_MOD_LOADING,\n            payload: false\n        });\n    }).then(() => {\n        const enableVoipSelection = voipModalComponentIsMounted(getState());\n        if (enableVoipSelection) {\n            dispatch(fetchVoipNumbers(getWwtCityId(getState())));\n        }\n    });\n};\n\nexport const showBaseOffer = () => (dispatch) => {\n    dispatch({type: ACTIONS.SHOW_BASE_OFFER});\n    //Workaround for opl-carousel\n    dispatch({type: ACTIONS.FETCH_OFFERS_START});\n    setTimeout(() => dispatch({type: ACTIONS.FETCH_OFFERS_STOP}), 100);\n};\n\nexport const showSecondaryChoiceOffer = () => (dispatch) => {\n    dispatch({type: ACTIONS.SHOW_SECONDARY_CHOICE_OFFER});\n    //Workaround for opl-carousel\n    dispatch({type: ACTIONS.FETCH_OFFERS_START});\n    setTimeout(() => dispatch({type: ACTIONS.FETCH_OFFERS_STOP}), 100);\n};\n\nexport function isAddressNotEmpty(addressObject) {\n    return !isEmptyObject(addressObject) && addressObject.preZipCode !== \"\" && addressObject.town !== \"\";\n}\n\nfunction isEmptyObject(obj) {\n    return !obj || !Object.keys(obj).length;\n}\n\nexport function saveSelectedOfferId(id) {\n    return {\n        type: ACTIONS.SAVE_SELECTED_OFFER_ID,\n        payload: id\n    };\n}\n\nexport function saveSelectedLoyalty(loyalty) {\n    return {\n        type: ACTIONS.SELECT_LOYALTY,\n        payload: loyalty\n    };\n}\n\nexport const updateIsLandingPage = (isLP) => (dispatch) =>  {\n    dispatch({type: ACTIONS.IS_LP, payload: isLP});\n};\n\n\n"],
    "file": "offers.js"
}