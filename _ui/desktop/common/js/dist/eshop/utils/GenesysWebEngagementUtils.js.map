{
    "version": 3,
    "sources": ["../../../../es6/eshop/utils/GenesysWebEngagementUtils.js"],
    "names": ["GenesysWebEngagementUtils", "SIMFREE_ENTRY_TYPE", "SIMFREE_PROPOSITION", "pushAddToCartEvent", "compositeProductOfferingId", "propositionProductOfferingId", "cartBundle", "pushOnCartEvent", "createProduct", "pushDeleteFromCartEvent", "deleteAllFromCartEvent", "entries", "buildGweProductList", "pushAddVasToCartEvent", "pushDeleteVasFromCartEvent", "action", "product", "data", "window", "_gt", "eventData", "event", "console", "log", "JSON", "stringify", "push", "COMPOSITE_PROD_OFFR_ID", "PROPOSITION_PROD_OFFR_ID", "splitProposition", "reduce", "products", "entry", "buildGweProductListForEntry", "result", "entryType", "productCode", "bundleCode", "terminals", "forEach", "terminal", "getPropositionIdForEntry", "vases", "vas", "propositionProdOfferId", "split"],
    "mappings": "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",
    "sourcesContent": ["const GenesysWebEngagementUtils = function (GenesysWebEngagementUtils) {\n\n    const SIMFREE_ENTRY_TYPE = 'SIMFREE';\n    const SIMFREE_PROPOSITION = 'DEFAULT_SALES_OF_GOODS_PROPOSITION$MOB_CPO_SALES_OF_GOODS';\n\n    GenesysWebEngagementUtils.pushAddToCartEvent = (compositeProductOfferingId, propositionProductOfferingId, cartBundle) => {\n        pushOnCartEvent('add', [createProduct(compositeProductOfferingId, propositionProductOfferingId)], cartBundle);\n    };\n\n    GenesysWebEngagementUtils.pushDeleteFromCartEvent = (compositeProductOfferingId, propositionProductOfferingId, cartBundle) => {\n        pushOnCartEvent('delete', [createProduct(compositeProductOfferingId, propositionProductOfferingId)], cartBundle);\n    };\n\n    GenesysWebEngagementUtils.deleteAllFromCartEvent = (entries) => {\n        pushOnCartEvent('deleteAll', buildGweProductList(entries));\n    };\n\n    GenesysWebEngagementUtils.pushAddVasToCartEvent = (compositeProductOfferingId, propositionProductOfferingId, cartBundle) => {\n        pushOnCartEvent('addVas', [createProduct(compositeProductOfferingId, propositionProductOfferingId)], cartBundle);\n    };\n\n    GenesysWebEngagementUtils.pushDeleteVasFromCartEvent = (compositeProductOfferingId, propositionProductOfferingId, cartBundle) => {\n        pushOnCartEvent('deleteVas', [createProduct(compositeProductOfferingId, propositionProductOfferingId)], cartBundle);\n    };\n\n    function pushOnCartEvent(action, product, cartBundle) {\n        let data = {\n            action: action,\n            product: product\n        };\n        if (cartBundle) {\n            data.cartBundle = cartBundle;\n        }\n        window._gt = window._gt || [];\n        let eventData = {\n            data: data\n        };\n        let event = ['event', 'portalCartChange', eventData];\n        console.log(JSON.stringify(event));\n        window._gt.push(event);\n    }\n\n    function createProduct(compositeProductOfferingId, propositionProductOfferingId) {\n        let product = {};\n        if (compositeProductOfferingId) {\n            product.COMPOSITE_PROD_OFFR_ID = compositeProductOfferingId;\n        }\n        if (propositionProductOfferingId) {\n            product.PROPOSITION_PROD_OFFR_ID = splitProposition(propositionProductOfferingId);\n        }\n        return product;\n    }\n\n    function buildGweProductList(entries) {\n        return entries.reduce((products, entry) => [...products, ...buildGweProductListForEntry(entry)], []);\n    }\n\n    function buildGweProductListForEntry(entry) {\n        let result = [];\n        if (entry.entryType !== SIMFREE_ENTRY_TYPE) {\n            result.push(createProduct(entry.productCode, entry.bundleCode));\n        }\n        entry.terminals.forEach(terminal => result.push(createProduct(terminal.productCode, getPropositionIdForEntry(entry))));\n        entry.vases.forEach(vas => result.push(createProduct(vas.productCode, getPropositionIdForEntry(entry))))\n        return result;\n    }\n\n    function splitProposition(propositionProdOfferId) {\n        return propositionProdOfferId.split('$')[0];\n    }\n\n    function getPropositionIdForEntry(entry) {\n        return entry.entryType === SIMFREE_ENTRY_TYPE ? SIMFREE_PROPOSITION : entry.bundleCode;\n    }\n\n    return GenesysWebEngagementUtils;\n}({});\n\nexport default GenesysWebEngagementUtils;"],
    "file": "GenesysWebEngagementUtils.js"
}