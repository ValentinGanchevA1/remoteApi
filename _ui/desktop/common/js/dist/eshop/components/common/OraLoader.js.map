{
    "version": 3,
    "sources": ["../../../../../es6/eshop/components/common/OraLoader.jsx"],
    "names": ["loaderId", "OraParentLoader", "nextProps", "props", "loading", "OPL", "UI", "fire", "id", "parentId", "String", "ref", "size", "children", "Component", "propTypes", "PropTypes", "bool", "string", "oneOf", "any", "defaultProps", "OraLoaderChildren", "prevProps", "window", "loaderHeigthFixerTimeout", "loaderTimeout", "OraLoader", "showLoader", "bind", "hideLoader", "className", "traceHeight", "console", "log", "clearTimeout", "useHeightFixing", "height", "that", "prvProps", "childrenHeight", "setTimeout", "mode", "blockType", "getClassName"],
    "mappings": "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",
    "sourcesContent": ["import React, {Component} from \"react\";\nimport PropTypes from \"prop-types\";\nimport $ from \"jquery\";\n\nimport {styleVariant} from \"../../modules/core/utils/ui\";\n\nlet loaderId = 1;\nexport class OraParentLoader extends Component {\n    componentWillUpdate(nextProps) {\n        if (this.props.loading === nextProps.loading)\n            return;\n        if (nextProps.loading) {\n            OPL.UI.fire('modules.loader.show', $(\"#\" + this.id), this.props.parentId);\n\n        } else {\n            const id = this.id;\n            const parentId = this.props.parentId;\n            OPL.UI.fire('modules.loader.hide', $(\"#\" + id), parentId);\n        }\n    }\n\n    componentWillMount() {\n        if (this.props.id) {\n            this.id = this.props.id\n        }else{\n            this.id = \"loaderParent-\" + String(loaderId++)\n        }\n    }\n\n    componentDidMount() {\n        // initial checking of loading attribute value:\n        if (this.props.loading) {\n            OPL.UI.fire('modules.loader.show', $(\"#\" + this.id), this.props.parentId);\n        }\n    }\n    render() {\n        return  <div  id={this.props.parentId} ref={(ref) => this.ref = ref} data-js-module=\"core/modules/loader\">\n            <div  data-loader-class={styleVariant(\"opl-loader--size-\", this.props.size)} id={this.id} >\n                {this.props.children}\n            </div>\n        </div>\n    }\n}\n\nOraParentLoader.propTypes = {\n    loading: PropTypes.bool,\n    id: PropTypes.string,\n    parentId: PropTypes.string,\n    size: PropTypes.oneOf(['s', 'm', 'l']),\n    children: PropTypes.any\n};\n\nOraParentLoader.defaultProps = {\n//    id: \"loaderParent-\" + String(loaderId++),\n    size: \"l\"\n};\n\n\nexport class OraLoaderChildren extends Component {\n    componentDidUpdate(prevProps) {\n        if (prevProps.loading === this.props.loading)\n            return;\n        if(this.props.loading) {\n            OPL.UI.fire('modules.loader.show', $(\"#\" + this.props.id), this.props.parentId);\n        } else {\n            OPL.UI.fire('modules.loader.hide', $(\"#\" + this.props.id), this.props.parentId);\n        }\n    }\n\n    render() {\n        return  <div id={this.props.id}>\n            {this.props.children}\n        </div>\n    }\n}\n\nOraLoaderChildren.propTypes = {\n    loading: PropTypes.bool,\n    id: PropTypes.string,\n    parentId: PropTypes.string,\n    children: PropTypes.any\n};\n\nOraLoaderChildren.defaultProps = {\n    id: \"loaderChildren-\" + String(loaderId++),\n    parentId: \"\",\n    loading: false\n};\n\nwindow.loaderHeigthFixerTimeout=0;\nwindow.loaderTimeout=[];\nexport class OraLoader extends Component {\n    constructor(props) {\n        super(props);\n        this.showLoader = this.showLoader.bind(this);\n        this.hideLoader = this.hideLoader.bind(this);\n    }\n\n    getClassName() {\n        return \"u-position-relative \"+styleVariant(\" \", this.props.className);\n    }\n\n    componentDidMount() {\n        // initial checking of loading attribute value:\n        if (this.props.loading) {\n            this.showLoader();\n            this.traceHeight(true);\n        }\n\n    }\n\n    traceHeight(loading){\n        console.log(\"traceHeight beg \",loading);\n        clearTimeout(window.loaderHeigthFixerTimeout);\n        if(!this.props.useHeightFixing || !loading)\n            return;\n\n            let height=$(\"#\"+this.props.id).height();\n            $(\".\"+this.props.id).height(height);\n            let that=this;\n       //     window.loaderHeigthFixerTimeout=setTimeout(function(){that.traceHeight(loading); },300);\n\n            console.log(\"Loader height\",height);\n\n\n    }\n    componentDidUpdate(prvProps) {\n        if(this.props.useHeightFixing) {\n            console.log(\"prvProps\", prvProps);\n            console.log(\"actProps\", this.props);\n\n            if (this.props.childrenHeight != prvProps.childrenHeight) {\n                console.log(\":):):):):):):):):):):):):):):):):):):):):):):):):):):):):):):):):):):):):)\");\n                this.traceHeight(this.props.loading);\n            }\n        }\n        if (this.props.loading === prvProps.loading)\n            return;\n        let that=this;\n        clearTimeout(window.loaderTimeout[this.props.id]);\n        if (prvProps.loading) {\n            window.loaderTimeout[this.props.id]=setTimeout(function(){that.hideLoader()},10)\n            //this.hideLoader();\n        } else {\n            window.loaderTimeout[this.props.id]=setTimeout(function(){that.showLoader()},50)\n//            this.showLoader();\n        }\n\n    }\n\n    showLoader() {\n        if (this.props.mode === 'FULL_SCREEN') {\n            OPL.UI.fire('modules.loader.show');\n        } else {\n            OPL.UI.fire('modules.loader.show', $(\"#\" + this.props.id), this.props.parentId);\n     //       this.traceHeight(this.props.loading);\n        }\n    }\n\n    hideLoader() {\n        if (this.props.mode === 'FULL_SCREEN') {\n            OPL.UI.fire('modules.loader.hide');\n        } else {\n            OPL.UI.fire('modules.loader.hide', $(\"#\" + this.props.id), this.props.parentId);\n        }\n    }\n\n    render() {\n        if(this.props.blockType==\"span\")\n        return  <span id={this.props.id} data-loader-class={styleVariant(\"opl-loader--size-\", this.props.size)} className={this.getClassName()} >\n            {this.props.children}\n        </span>\n        return  <div id={this.props.id} data-loader-class={styleVariant(\"opl-loader--size-\", this.props.size)} className={this.getClassName()} >\n            {this.props.children}\n        </div>\n    };\n}\n\nOraLoader.propTypes = {\n    id: PropTypes.string,\n    parentId: PropTypes.any,\n    loading: PropTypes.bool,\n    className: PropTypes.string,\n    size: PropTypes.oneOf(['s', 'm', 'l']),\n    mode: PropTypes.string,\n    children: PropTypes.any,\n    useHeightFixing:PropTypes.bool\n};\n\nOraLoader.defaultProps = {\n    id: \"loader-\" + String(loaderId++),\n    parentId: \"bsf-container-div\",\n    loading: false,\n    className: \"\",\n    size: \"m\",\n    useHeightFixing:false\n};"],
    "file": "OraLoader.js"
}